<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2018/08/18/cylc-scheduler-internals-part-3.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Cylc Scheduler Internals - Part 3"><meta property="og:description" content="This is the part 3, in a series of posts about Cylc internals. The [part 1]({% post_url 2018-07-14-cylc-scheduler-internals-part-1 %}) had the beginning of the workflow. [part 2]({% post_url 2018-07-27-cylc-scheduler-internals-part-2 %}) documented from the moment the method configure() is called. This post will continue right after the continue() method returns, going on with the next method: run().
"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-08-18T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-25T20:47:22+02:00"><meta property="article:tag" content="Cylc"><meta property="article:tag" content="Python"><meta property="article:tag" content="Opensource"><meta property="article:tag" content="Workflows"><meta property="article:tag" content="Programming"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Cylc Scheduler Internals - Part 3"><meta name=twitter:description content="This is the part 3, in a series of posts about Cylc
internals. The [part 1]({% post_url 2018-07-14-cylc-scheduler-internals-part-1 %})
had the beginning of the workflow. [part 2]({% post_url 2018-07-27-cylc-scheduler-internals-part-2 %})
documented from the moment the method configure() is called. This post will
continue right after the continue() method returns, going on with the next method: run().

"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2018/08/18/cylc-scheduler-internals-part-3/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.2bf0e81b866986f8e894e04d30e6e1e76e2829c06afda356b6fca355d1000a94.css integrity="sha256-K/DoG4ZphvjolOBNMObh524oKcBq/aNWtvyjVdEACpQ="><title>kinow | Cylc Scheduler Internals - Part 3</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Cylc Scheduler Internals - Part 3","headline":"Cylc Scheduler Internals - Part 3","alternativeHeadline":"","description":"\u003cp\u003eThis is the part 3, in a series of posts about \u003ca href=\u0022https:\/\/cylc.github.io\/cylc\u0022\u003eCylc\u003c\/a\u003e\ninternals. The [part 1]({% post_url 2018-07-14-cylc-scheduler-internals-part-1 %})\nhad the beginning of the workflow. [part 2]({% post_url 2018-07-27-cylc-scheduler-internals-part-2 %})\ndocumented from the moment the method \u003ccode\u003econfigure()\u003c\/code\u003e is called. This post will\ncontinue right after the \u003ccode\u003econtinue()\u003c\/code\u003e method returns, going on with the next method: \u003ccode\u003erun()\u003c\/code\u003e.\u003c\/p\u003e\n\u003cp style=\u0027text-align: center;\u0027\u003e\n\u003ca href=\u0022\/assets\/posts{{page.path | remove: \u0022.md\u0022 | remove: \u0022_posts\u0022 }}\/cylc-scheduler_run.png\u0022\u003e\n\n\n\n\u003cfigure class=\u0022feature\u0022\u003e\n\n  \u003cimg\n    src=\u0027\/assets\/posts\/2018-08-18-cylc-scheduler-internals-part-3\/cylc-scheduler_run.png\u0027\n    alt=\u0027\u0027\n    title=\u0027\u0027\n    style=\u0027display: inline; width: 100%;\u0027\n    width=\u0027\u0027\n    height=\u0027\u0027\n    \/\u003e\n  \u003cfigcaption\u003e\u003c\/figcaption\u003e\n\n\u003c\/figure\u003e\n\n\n\u003c\/a\u003e\n\u003c\/p\u003e","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2018\/08\/18\/cylc-scheduler-internals-part-3.html"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"kinow","copyrightYear":"2018","dateCreated":"2018-08-18T00:00:00.00Z","datePublished":"2018-08-18T00:00:00.00Z","dateModified":"2025-10-25T20:47:22.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2018\/08\/18\/cylc-scheduler-internals-part-3.html","wordCount":"56","genre":["cylc","python","opensource","workflows","programming"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul style=position:relative><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li><li style=position:absolute;right:0;bottom:-.75rem;text-align:right><span style=text-transform:uppercase;font-weight:700;font-size:3rem;color:#fffefa;line-height:normal;letter-spacing:-.1rem>Kinow</span></li></ul></nav></header><main><article class=content><h1>Cylc Scheduler Internals - Part 3</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2018-08-18>Aug 18, 2018</time></div><aside><nav id=TableOfContents></nav></aside><p>This is the part 3, in a series of posts about <a href=https://cylc.github.io/cylc>Cylc</a>
internals. The [part 1]({% post_url 2018-07-14-cylc-scheduler-internals-part-1 %})
had the beginning of the workflow. [part 2]({% post_url 2018-07-27-cylc-scheduler-internals-part-2 %})
documented from the moment the method <code>configure()</code> is called. This post will
continue right after the <code>continue()</code> method returns, going on with the next method: <code>run()</code>.</p><p style=text-align:center><a href="/assets/posts{{page.path | remove:" .md" | remove: "_posts" }}/cylc-scheduler_run.png"><figure class=feature><img src=/assets/posts/2018-08-18-cylc-scheduler-internals-part-3/cylc-scheduler_run.png alt title style=display:inline;width:100% width height><figcaption></figcaption></figure></a></p><p>At this point, the Suite Server program must have been initialized, with the
objects that it requires, and with everything configured. So this method is the one
that starts the whole work on the tasks & proxies.</p><p>The runahead points, i.e. what are the next available cycle points, are calculated
and scheduled. In the scheduling, tasks are queued for execution.</p><p>Most of the interesting action takes place when <code>process_task_pool()</code> is called,
and in the <code>submit_task_jobs()</code>. The latter is a method from <code>TaskJobManager</code>, and
it is here where - in this case - my shell command is executed through a temporary
shell script file.</p><p>The graph was created from the initial execution of a suite that was starting from
scratch (they can also be reinitialized). If there are multiple tasks waiting,
or if a suite was restarted, the diagram would look considerably different.</p><p>You can download the
&lt;a href="/assets/posts{{page.path | remove: &ldquo;.md&rdquo; | remove: &ldquo;_posts&rdquo; }}/cylc-scheduler_run-src.xml">source file</a>
for the diagram used in this post, and edit it with <a href=https://draw.io>draw.io</a>.</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/cylc.html>Cylc</a>,
<a href=/tags/python.html>Python</a>,
<a href=/tags/opensource.html>Opensource</a>,
<a href=/tags/workflows.html>Workflows</a>,
<a href=/tags/programming.html>Programming</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2018/08/12/use-of-logging-in-java-image-processing-libraries.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2018/10/06/a-couple-of-class-diagrams-of-jupyterhub.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://bsky.app/profile/kinow.bsky.social><img src=/assets/icons/bluesky.png alt="BlueSky link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>