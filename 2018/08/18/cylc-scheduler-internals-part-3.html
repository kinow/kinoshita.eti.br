<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:title" content="Cylc Scheduler Internals - Part 3">
<meta property="og:description" content="This is the part 3, in a series of posts about Cylc
internals. The [part 1]({% post_url 2018-07-14-cylc-scheduler-internals-part-1 %})
had the beginning of the workflow. [part 2]({% post_url 2018-07-27-cylc-scheduler-internals-part-2 %})
documented from the moment the method configure() is called. This post will
continue right after the continue() method returns, going on with the next method: run().

">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kinoshita.eti.br/2018/08/18/cylc-scheduler-internals-part-3.html"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-08-18T00:00:00+00:00">
<meta property="article:modified_time" content="2018-08-18T00:00:00+00:00">
<link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.09b56b6037e962b67cf7a7701bf2a9ee5da840a4f74b74139c4731f2156a5917.css integrity="sha256-CbVrYDfpYrZ896dwG/Kp7l2oQKT3S3QTnEcx8hVqWRc=">
<title>kinow | Cylc Scheduler Internals - Part 3</title>
</head>
<body>
<header role=banner class=content>
<nav id=nav aria-label=Main role=navigation class=content>
<ul><li>
<a href=/><i data-feather=about></i> About</a>
</li><li>
<a href=/blog/><i data-feather=blog></i> Blog</a>
</li><li>
<a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a>
</li>
</ul>
</nav>
</header>
<main>
<article class=content>
<h1>Cylc Scheduler Internals - Part 3</h1><div class=metadata>
<i data-feather=calendar></i>
<time datetime=2018-08-18>Aug 18, 2018</time>
</div>
<aside>
<nav id=TableOfContents></nav>
</aside>
<p>This is the part 3, in a series of posts about <a href=https://cylc.github.io/cylc>Cylc</a>
internals. The [part 1]({% post_url 2018-07-14-cylc-scheduler-internals-part-1 %})
had the beginning of the workflow. [part 2]({% post_url 2018-07-27-cylc-scheduler-internals-part-2 %})
documented from the moment the method <code>configure()</code> is called. This post will
continue right after the <code>continue()</code> method returns, going on with the next method: <code>run()</code>.</p>
<p style=text-align:center>
<a href="/assets/posts{{page.path | remove:" .md" | remove: "_posts" }}/cylc-scheduler_run.png">
<figure class=feature>
<img src=/assets/posts/2018-08-18-cylc-scheduler-internals-part-3/cylc-scheduler_run.png alt title style=display:inline;width:100% width height>
<figcaption></figcaption>
</figure>
</a>
</p>
<p>At this point, the Suite Server program must have been initialized, with the
objects that it requires, and with everything configured. So this method is the one
that starts the whole work on the tasks & proxies.</p>
<p>The runahead points, i.e. what are the next available cycle points, are calculated
and scheduled. In the scheduling, tasks are queued for execution.</p>
<p>Most of the interesting action takes place when <code>process_task_pool()</code> is called,
and in the <code>submit_task_jobs()</code>. The latter is a method from <code>TaskJobManager</code>, and
it is here where - in this case - my shell command is executed through a temporary
shell script file.</p>
<p>The graph was created from the initial execution of a suite that was starting from
scratch (they can also be reinitialized). If there are multiple tasks waiting,
or if a suite was restarted, the diagram would look considerably different.</p>
<p>You can download the
&lt;a href="/assets/posts{{page.path | remove: &ldquo;.md&rdquo; | remove: &ldquo;_posts&rdquo; }}/cylc-scheduler_run-src.xml">source file</a>
for the diagram used in this post, and edit it with <a href=https://draw.io>draw.io</a>.</p>
<aside class=links>
<a class=previous href=https://kinoshita.eti.br/2018/08/12/use-of-logging-in-java-image-processing-libraries.html>&#171; Previous</a>
<a class=next href=https://kinoshita.eti.br/2018/10/06/a-couple-of-class-diagrams-of-jupyterhub.html>Next &#187;</a>
</aside>
</article>
</main>
<footer role=contentinfo>
<ul id=social-media-icons>
<li>
<a href=https://www.instagram.com/brunokinoshita/>
<img src=/assets/icons/instagram.png alt="Instagram link">
</a>
</li>
<li>
<a href=https://twitter.com/kinow/>
<img src=/assets/icons/twitter.png alt="Twitter link">
</a>
</li>
<li>
<a href=https://github.com/kinow/>
<img src=/assets/icons/github.png alt="GitHub link">
</a>
</li>
<li>
<a href=/feed.xml>
<img src=/assets/icons/news.png alt="RSS feed link">
</a>
</li>
</ul>
</footer>
</body>
</html>