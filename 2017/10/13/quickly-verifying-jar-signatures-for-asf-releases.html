<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Quickly Verifying jar Signatures For ASF Releases | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Quickly Verifying jar Signatures For ASF Releases" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures. During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release. Tired of always having to manually check several artefacts, or having to come up with the correct shell commands to iterate through a list of files, the other day I wrote a simple script to download the KEYS file, import it, download all the artefacts, then iterate through them and verify the signature. Here’s the script. Licensed under the GPL licence. #!/usr/bin/env bash url=&quot;&quot; # From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/ USAGE=&quot;Usage: `basename $0` [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/&quot; # Parse command line options. while getopts hv: OPT; do case &quot;$OPT&quot; in h) echo $USAGE exit 0 ;; v) echo &quot;`basename $0` version 0.0.1&quot; exit 0 ;; \?) # getopts issues an error message echo $USAGE &gt;&amp;2 exit 1 ;; esac done # Remove the switches we parsed above. shift `expr $OPTIND - 1` # We want at least one non-option argument. # Remove this block if you don&#39;t need it. if [ $# -eq 0 ]; then echo $USAGE &gt;&amp;amp;2 exit 1 fi # Access additional arguments as usual through # variables $@, $*, $1, $2, etc. or using this loop: URL=$1 echo &quot;url: ${URL}&quot; # Use a local temporary directory BUILD_DIR=$(mktemp -d) pushd &quot;$BUILD_DIR&quot; echo &quot;build dir: ${BUILD_DIR}&quot; # Download KEYS file KEYS_URL=https://www.apache.org/dist/commons/KEYS echo &quot;importing KEYS from: ${KEYS_URL}&quot; wget &quot;$KEYS_URL&quot; gpg --import KEYS # Download JARs and signature files echo &quot;downloading all jars and signature files...&quot; wget -r -nd -np -e robots=off --wait 1 -R &quot;index.html*&quot; &quot;${URL}&quot; # Check the files for x in *.jar; do gpg --verify &quot;${x}&quot;.asc; done # EOF The script can be found at GitHub too: https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs" />
<meta property="og:description" content="The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures. During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release. Tired of always having to manually check several artefacts, or having to come up with the correct shell commands to iterate through a list of files, the other day I wrote a simple script to download the KEYS file, import it, download all the artefacts, then iterate through them and verify the signature. Here’s the script. Licensed under the GPL licence. #!/usr/bin/env bash url=&quot;&quot; # From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/ USAGE=&quot;Usage: `basename $0` [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/&quot; # Parse command line options. while getopts hv: OPT; do case &quot;$OPT&quot; in h) echo $USAGE exit 0 ;; v) echo &quot;`basename $0` version 0.0.1&quot; exit 0 ;; \?) # getopts issues an error message echo $USAGE &gt;&amp;2 exit 1 ;; esac done # Remove the switches we parsed above. shift `expr $OPTIND - 1` # We want at least one non-option argument. # Remove this block if you don&#39;t need it. if [ $# -eq 0 ]; then echo $USAGE &gt;&amp;amp;2 exit 1 fi # Access additional arguments as usual through # variables $@, $*, $1, $2, etc. or using this loop: URL=$1 echo &quot;url: ${URL}&quot; # Use a local temporary directory BUILD_DIR=$(mktemp -d) pushd &quot;$BUILD_DIR&quot; echo &quot;build dir: ${BUILD_DIR}&quot; # Download KEYS file KEYS_URL=https://www.apache.org/dist/commons/KEYS echo &quot;importing KEYS from: ${KEYS_URL}&quot; wget &quot;$KEYS_URL&quot; gpg --import KEYS # Download JARs and signature files echo &quot;downloading all jars and signature files...&quot; wget -r -nd -np -e robots=off --wait 1 -R &quot;index.html*&quot; &quot;${URL}&quot; # Check the files for x in *.jar; do gpg --verify &quot;${x}&quot;.asc; done # EOF The script can be found at GitHub too: https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs" />
<link rel="canonical" href="https://kinoshita.eti.br/2017/10/13/quickly-verifying-jar-signatures-for-asf-releases.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2017/10/13/quickly-verifying-jar-signatures-for-asf-releases.html" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-10-13T06:24:54-05:00" />
<script type="application/ld+json">
{"datePublished":"2017-10-13T06:24:54-05:00","headline":"Quickly Verifying jar Signatures For ASF Releases","description":"The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures. During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release. Tired of always having to manually check several artefacts, or having to come up with the correct shell commands to iterate through a list of files, the other day I wrote a simple script to download the KEYS file, import it, download all the artefacts, then iterate through them and verify the signature. Here’s the script. Licensed under the GPL licence. #!/usr/bin/env bash url=&quot;&quot; # From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/ USAGE=&quot;Usage: `basename $0` [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/&quot; # Parse command line options. while getopts hv: OPT; do case &quot;$OPT&quot; in h) echo $USAGE exit 0 ;; v) echo &quot;`basename $0` version 0.0.1&quot; exit 0 ;; \\?) # getopts issues an error message echo $USAGE &gt;&amp;2 exit 1 ;; esac done # Remove the switches we parsed above. shift `expr $OPTIND - 1` # We want at least one non-option argument. # Remove this block if you don&#39;t need it. if [ $# -eq 0 ]; then echo $USAGE &gt;&amp;amp;2 exit 1 fi # Access additional arguments as usual through # variables $@, $*, $1, $2, etc. or using this loop: URL=$1 echo &quot;url: ${URL}&quot; # Use a local temporary directory BUILD_DIR=$(mktemp -d) pushd &quot;$BUILD_DIR&quot; echo &quot;build dir: ${BUILD_DIR}&quot; # Download KEYS file KEYS_URL=https://www.apache.org/dist/commons/KEYS echo &quot;importing KEYS from: ${KEYS_URL}&quot; wget &quot;$KEYS_URL&quot; gpg --import KEYS # Download JARs and signature files echo &quot;downloading all jars and signature files...&quot; wget -r -nd -np -e robots=off --wait 1 -R &quot;index.html*&quot; &quot;${URL}&quot; # Check the files for x in *.jar; do gpg --verify &quot;${x}&quot;.asc; done # EOF The script can be found at GitHub too: https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2017/10/13/quickly-verifying-jar-signatures-for-asf-releases.html"},"@type":"BlogPosting","url":"https://kinoshita.eti.br/2017/10/13/quickly-verifying-jar-signatures-for-asf-releases.html","dateModified":"2017-10-13T06:24:54-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /></head>
<body>
<div id="wrapper">
  <div id="sidebar"><ul class="menu">
  <li class="item">
    <a href="/" aria-label="Home page link">
      <svg id="svg8" version="1.1" viewBox="0 0 58.208 9.2604" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svg-logo-title svg-logo-desc">
        <title id="svg-logo-title">KINOSHITA image</title>
        <desc id="svg-logo-desc">A logo with the word KINOSHITA</desc>
        <g id="layer1" transform="translate(0 -287.74)">
          <g id="text817" transform="translate(-2.4568 -.23624)">
            <g id="logo" transform="matrix(2.6585 0 0 2.5911 -63.587 100.56)" fill="#000000" stroke-width=".26458px">
              <path role="presentation" id="path819" d="m25.178 72.637h0.54187v2.9633h-0.54187zm0.5842 1.397 1.0964-1.397h0.635l-1.1049 1.397 1.1049 1.5663h-0.635z"/>
              <path role="presentation" id="path821" d="m27.832 72.637h0.54187v2.9633h-0.54187z"/>
              <path role="presentation" id="path823" d="m29.023 72.637h0.5334l1.2658 1.9135v-1.9135h0.54187v2.9633h-0.4445l-1.3547-2.032v2.032h-0.54187z"/>
              <path role="presentation" id="path825" d="m33.298 75.66q-0.4191 0-0.75353-0.1905-0.3302-0.19473-0.5207-0.54187-0.18627-0.35137-0.18627-0.80857t0.18627-0.80433q0.1905-0.35137 0.5207-0.54187 0.33443-0.19473 0.75353-0.19473t0.7493 0.19473q0.33443 0.1905 0.5207 0.54187 0.1905 0.34713 0.1905 0.80433t-0.1905 0.80857q-0.18627 0.34713-0.5207 0.54187-0.3302 0.1905-0.7493 0.1905zm0-0.52493q0.4318 0 0.6604-0.2794 0.23283-0.2794 0.23283-0.7366t-0.23283-0.7366q-0.2286-0.2794-0.6604-0.2794t-0.66463 0.2794q-0.2286 0.2794-0.2286 0.7366t0.2286 0.7366q0.23283 0.2794 0.66463 0.2794z"/>
              <path role="presentation" id="path827" d="m36.091 75.66q-0.24977 0-0.53763-0.06773-0.28363-0.06773-0.4445-0.14817l0.0635-0.57573q0.5588 0.27093 0.98213 0.27093 0.22437 0 0.35137-0.08467 0.127-0.0889 0.127-0.25823 0-0.127-0.07197-0.20743-0.06773-0.08467-0.19897-0.1397-0.13123-0.05927-0.4191-0.16087-0.27093-0.09313-0.44873-0.19473-0.1778-0.10583-0.28363-0.2667-0.1016-0.1651-0.1016-0.40217 0-0.381 0.2794-0.61383t0.8001-0.23283q0.24553 0 0.48683 0.05503 0.24553 0.05503 0.44873 0.13547l-0.05503 0.55457q-0.26247-0.1143-0.4826-0.16933-0.2159-0.05927-0.4318-0.05927-0.2413 0-0.3683 0.08043t-0.127 0.23283q0 0.11853 0.06773 0.19473t0.18203 0.127q0.11853 0.0508 0.34713 0.12277 0.51223 0.16087 0.74507 0.37253 0.23707 0.20743 0.23707 0.5715 0 0.34713-0.2413 0.60537t-0.90593 0.25823z"/>
              <path role="presentation" id="path829" d="m37.688 72.637h0.54187v1.1726h1.3547v-1.1726h0.54187v2.9633h-0.54187v-1.2827h-1.3547v1.2827h-0.54187z"/>
              <path role="presentation" id="path831" d="m40.78 72.637h0.54187v2.9633h-0.54187z"/>
              <path role="presentation" id="path833" d="m42.546 73.162h-0.8382v-0.52493h2.2183v0.52493h-0.8382v2.4384h-0.54187z"/>
              <path role="presentation" id="path835" d="m45.632 74.898h-1.0795l-0.24553 0.70273h-0.52493l1.0541-2.9633h0.51223l1.0541 2.9633h-0.52493zm-0.16933-0.47413-0.3683-1.0583-0.37253 1.0583z"/>
            </g>
          </g>
        </g>
      </svg>
    </a>
  </li>
  <li class="item">
    <a href="/blog/" class="">Blog</a>
    <ul>
      <li class="item">
        <a href="/blog/drawing/">Drawing</a>
      </li>
      <li class="item">
        <a href="/blog/languages/">Languages</a>
      </li>
      <li class="item">
        <a href="/blog/music/">Music</a>
      </li>
      <li class="item">
        <a href="/blog/writing/">Writing</a>
      </li>
    </ul>
  </li>
  <li class="item">
    <a href="/art/" class="">Illustrations</a>
  </li>
  <li class="item">
    <a href="/maps/" class="">Maps</a>
  </li>
</ul>
<div id="menu-bottom">
  <p id="feed-subscribe">
    <a href="/feed.xml">
      <svg id="feed-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px" viewBox="0 0 256 256">
        <circle cx="68" cy="189" r="24" fill="rgba(255, 255, 255, .2)"/>
        <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="rgba(255, 255, 255, .2)"/>
        <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="rgba(255, 255, 255, .2)"/>
      </svg>
    </a>
  </p>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Quickly Verifying jar Signatures For ASF Releases</h1>
    <spab class="post-meta">
      <time class="dt-published" datetime="2017-10-13T06:24:54-05:00" itemprop="datePublished">Oct 13, 2017
      </time>
      <span>&mdash; star date: -305134.25</span></spab>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>The release process within the Apache Software Foundation includes a series of steps. Amongst these
steps is the <a href="https://www.apache.org/foundation/voting.html">voting process</a>. In Apache Commons, the
<a href="https://commons.apache.org/releases/prepare.html">release instructions</a> includes a note on artefact
signatures.</p>

<blockquote>
  <p>During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release.</p>
</blockquote>

<p>Tired of always having to manually check several artefacts, or having to come up with the correct
shell commands to iterate through a list of files, the other day I wrote a simple script to download
the KEYS file, import it, download all the artefacts, then iterate through them and verify the
signature.</p>

<p>Here’s the script. Licensed under the GPL licence.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

<span class="nv">url</span><span class="o">=</span><span class="s2">""</span>

<span class="c"># From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/</span>
<span class="nv">USAGE</span><span class="o">=</span><span class="s2">"Usage: </span><span class="sb">`</span><span class="nb">basename</span> <span class="nv">$0</span><span class="sb">`</span><span class="s2"> [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/"</span>

<span class="c"># Parse command line options.</span>
<span class="k">while </span><span class="nb">getopts </span>hv: OPT<span class="p">;</span> <span class="k">do
    case</span> <span class="s2">"</span><span class="nv">$OPT</span><span class="s2">"</span> <span class="k">in
        </span>h<span class="p">)</span>
            <span class="nb">echo</span> <span class="nv">$USAGE</span>
            <span class="nb">exit </span>0
            <span class="p">;;</span>
        v<span class="p">)</span>
            <span class="nb">echo</span> <span class="s2">"</span><span class="sb">`</span><span class="nb">basename</span> <span class="nv">$0</span><span class="sb">`</span><span class="s2"> version 0.0.1"</span>
            <span class="nb">exit </span>0
            <span class="p">;;</span>
        <span class="se">\?</span><span class="p">)</span>
            <span class="c"># getopts issues an error message</span>
            <span class="nb">echo</span> <span class="nv">$USAGE</span> <span class="o">&gt;</span>&amp;2
            <span class="nb">exit </span>1
            <span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done</span>

<span class="c"># Remove the switches we parsed above.</span>
<span class="nb">shift</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$OPTIND</span> - 1<span class="sb">`</span>

<span class="c"># We want at least one non-option argument. </span>
<span class="c"># Remove this block if you don't need it.</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span><span class="nt">-eq</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="nv">$USAGE</span> <span class="o">&gt;</span>&amp;amp<span class="p">;</span>2
    <span class="nb">exit </span>1
<span class="k">fi</span>

<span class="c"># Access additional arguments as usual through </span>
<span class="c"># variables $@, $*, $1, $2, etc. or using this loop:</span>
<span class="nv">URL</span><span class="o">=</span><span class="nv">$1</span>

<span class="nb">echo</span> <span class="s2">"url: </span><span class="k">${</span><span class="nv">URL</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># Use a local temporary directory</span>
<span class="nv">BUILD_DIR</span><span class="o">=</span><span class="si">$(</span><span class="nb">mktemp</span> <span class="nt">-d</span><span class="si">)</span>
<span class="nb">pushd</span> <span class="s2">"</span><span class="nv">$BUILD_DIR</span><span class="s2">"</span>

<span class="nb">echo</span> <span class="s2">"build dir: </span><span class="k">${</span><span class="nv">BUILD_DIR</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># Download KEYS file</span>
<span class="nv">KEYS_URL</span><span class="o">=</span>https://www.apache.org/dist/commons/KEYS

<span class="nb">echo</span> <span class="s2">"importing KEYS from: </span><span class="k">${</span><span class="nv">KEYS_URL</span><span class="k">}</span><span class="s2">"</span>

wget <span class="s2">"</span><span class="nv">$KEYS_URL</span><span class="s2">"</span>
gpg <span class="nt">--import</span> KEYS

<span class="c"># Download JARs and signature files</span>
<span class="nb">echo</span> <span class="s2">"downloading all jars and signature files..."</span>

wget <span class="nt">-r</span> <span class="nt">-nd</span> <span class="nt">-np</span> <span class="nt">-e</span> <span class="nv">robots</span><span class="o">=</span>off <span class="nt">--wait</span> 1 <span class="nt">-R</span> <span class="s2">"index.html*"</span> <span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># Check the files</span>
<span class="k">for </span>x <span class="k">in</span> <span class="k">*</span>.jar<span class="p">;</span> <span class="k">do </span>gpg <span class="nt">--verify</span> <span class="s2">"</span><span class="k">${</span><span class="nv">x</span><span class="k">}</span><span class="s2">"</span>.asc<span class="p">;</span> <span class="k">done</span>

<span class="c"># EOF</span>
</code></pre></div></div>

<p>The script can be found at GitHub too: <a href="https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs">https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs</a></p>

  </div>

  <div class="tags"><a class="label" href="/tags#programming">programming</a><a class="label" href="/tags#shell script">shell script</a><a class="label" href="/tags#security">security</a><a class="label" href="/tags#opensource">opensource</a><a class="label" href="/tags#apache software foundation">apache software foundation</a></div>

  <a class="u-url" href="/2017/10/13/quickly-verifying-jar-signatures-for-asf-releases.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
