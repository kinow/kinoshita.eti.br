<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2017/10/14/quickly-verifying-jar-signatures-for-asf-releases.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Quickly Verifying jar Signatures For ASF Releases"><meta property="og:description" content="The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures.
During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-10-14T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-17T19:23:44+02:00"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Shell Script"><meta property="article:tag" content="Security"><meta property="article:tag" content="Opensource"><meta property="article:tag" content="Apache Software Foundation"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Quickly Verifying jar Signatures For ASF Releases"><meta name=twitter:description content="The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures.
During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2017/10/14/quickly-verifying-jar-signatures-for-asf-releases/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.c3626db3678f53e4a53e3e75c7b2fe34bb46566f00eb84692501404d0064c32a.css integrity="sha256-w2Jts2ePU+SlPj51x7L+NLtGVm8A64RpJQFATQBkwyo="><title>kinow | Quickly Verifying jar Signatures For ASF Releases</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Quickly Verifying jar Signatures For ASF Releases","headline":"Quickly Verifying jar Signatures For ASF Releases","alternativeHeadline":"","description":"The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures.\nDuring the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2017\/10\/14\/quickly-verifying-jar-signatures-for-asf-releases.html"},"author":{"@type":"Person","name":"Bruno P. Kinoshita"},"creator":{"@type":"Person","name":"Bruno P. Kinoshita"},"accountablePerson":{"@type":"Person","name":"Bruno P. Kinoshita"},"copyrightHolder":"kinow","copyrightYear":"2017","dateCreated":"2017-10-14T00:00:00.00Z","datePublished":"2017-10-14T00:00:00.00Z","dateModified":"2024-05-17T19:23:44.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2017\/10\/14\/quickly-verifying-jar-signatures-for-asf-releases.html","wordCount":"343","genre":["programming","shell script","security","opensource","apache software foundation"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li></ul></nav></header><main><article class=content><h1>Quickly Verifying jar Signatures For ASF Releases</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2017-10-14>Oct 14, 2017</time></div><aside><nav id=TableOfContents></nav></aside><p>The release process within the Apache Software Foundation includes a series of steps. Amongst these
steps is the <a href=https://www.apache.org/foundation/voting.html>voting process</a>. In Apache Commons, the
<a href=https://commons.apache.org/releases/prepare.html>release instructions</a> includes a note on artefact
signatures.</p><blockquote><p>During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release.</p></blockquote><p>Tired of always having to manually check several artefacts, or having to come up with the correct
shell commands to iterate through a list of files, the other day I wrote a simple script to download
the KEYS file, import it, download all the artefacts, then iterate through them and verify the
signature.</p><p>Here&rsquo;s the script. Licensed under the GPL licence.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#633820>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#633820></span>
</span></span><span style=display:flex><span><span style=color:#000>url</span><span style=color:#000>=</span><span style=color:#c41a16>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/</span>
</span></span><span style=display:flex><span><span style=color:#000>USAGE</span><span style=color:#000>=</span><span style=color:#c41a16>&#34;Usage: `basename </span><span style=color:#000>$0</span><span style=color:#c41a16>` [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Parse command line options.</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>while</span> <span style=color:#a90d91>getopts</span> hv: OPT; <span style=color:#a90d91>do</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>case</span> <span style=color:#c41a16>&#34;</span><span style=color:#000>$OPT</span><span style=color:#c41a16>&#34;</span> in
</span></span><span style=display:flex><span>        h<span style=color:#000>)</span>
</span></span><span style=display:flex><span>            <span style=color:#a90d91>echo</span> <span style=color:#000>$USAGE</span>
</span></span><span style=display:flex><span>            <span style=color:#a90d91>exit</span> <span style=color:#1c01ce>0</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>        v<span style=color:#000>)</span>
</span></span><span style=display:flex><span>            <span style=color:#a90d91>echo</span> <span style=color:#c41a16>&#34;`basename </span><span style=color:#000>$0</span><span style=color:#c41a16>` version 0.0.1&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a90d91>exit</span> <span style=color:#1c01ce>0</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>        <span style=color:#c41a16>\?</span><span style=color:#000>)</span>
</span></span><span style=display:flex><span>            <span style=color:#177500># getopts issues an error message</span>
</span></span><span style=display:flex><span>            <span style=color:#a90d91>echo</span> <span style=color:#000>$USAGE</span> &gt;&amp;<span style=color:#1c01ce>2</span>
</span></span><span style=display:flex><span>            <span style=color:#a90d91>exit</span> <span style=color:#1c01ce>1</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>    <span style=color:#a90d91>esac</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Remove the switches we parsed above.</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>shift</span> <span style=color:#c41a16>`</span>expr <span style=color:#000>$OPTIND</span> - 1<span style=color:#c41a16>`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># We want at least one non-option argument. </span>
</span></span><span style=display:flex><span><span style=color:#177500># Remove this block if you don&#39;t need it.</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>if</span> <span style=color:#000>[</span> <span style=color:#000>$#</span> -eq <span style=color:#1c01ce>0</span> <span style=color:#000>]</span>; <span style=color:#a90d91>then</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>echo</span> <span style=color:#000>$USAGE</span> &gt;&amp;amp;<span style=color:#1c01ce>2</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>exit</span> <span style=color:#1c01ce>1</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Access additional arguments as usual through </span>
</span></span><span style=display:flex><span><span style=color:#177500># variables $@, $*, $1, $2, etc. or using this loop:</span>
</span></span><span style=display:flex><span><span style=color:#000>URL</span><span style=color:#000>=</span><span style=color:#000>$1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> <span style=color:#c41a16>&#34;url: </span><span style=color:#c41a16>${</span><span style=color:#000>URL</span><span style=color:#c41a16>}</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Use a local temporary directory</span>
</span></span><span style=display:flex><span><span style=color:#000>BUILD_DIR</span><span style=color:#000>=</span><span style=color:#a90d91>$(</span>mktemp -d<span style=color:#a90d91>)</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>pushd</span> <span style=color:#c41a16>&#34;</span><span style=color:#000>$BUILD_DIR</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> <span style=color:#c41a16>&#34;build dir: </span><span style=color:#c41a16>${</span><span style=color:#000>BUILD_DIR</span><span style=color:#c41a16>}</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Download KEYS file</span>
</span></span><span style=display:flex><span><span style=color:#000>KEYS_URL</span><span style=color:#000>=</span>https://www.apache.org/dist/commons/KEYS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> <span style=color:#c41a16>&#34;importing KEYS from: </span><span style=color:#c41a16>${</span><span style=color:#000>KEYS_URL</span><span style=color:#c41a16>}</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>wget <span style=color:#c41a16>&#34;</span><span style=color:#000>$KEYS_URL</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>gpg --import KEYS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Download JARs and signature files</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> <span style=color:#c41a16>&#34;downloading all jars and signature files...&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>wget -r -nd -np -e <span style=color:#000>robots</span><span style=color:#000>=</span>off --wait <span style=color:#1c01ce>1</span> -R <span style=color:#c41a16>&#34;index.html*&#34;</span> <span style=color:#c41a16>&#34;</span><span style=color:#c41a16>${</span><span style=color:#000>URL</span><span style=color:#c41a16>}</span><span style=color:#c41a16>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># Check the files</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>for</span> x in *.jar; <span style=color:#a90d91>do</span> gpg --verify <span style=color:#c41a16>&#34;</span><span style=color:#c41a16>${</span><span style=color:#000>x</span><span style=color:#c41a16>}</span><span style=color:#c41a16>&#34;</span>.asc; <span style=color:#a90d91>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># EOF</span>
</span></span></code></pre></div><p>The script can be found at GitHub too: <a href=https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs>https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs</a></p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/programming.html>Programming</a>,
<a href=/tags/shell-script.html>Shell Script</a>,
<a href=/tags/security.html>Security</a>,
<a href=/tags/opensource.html>Opensource</a>,
<a href=/tags/apache-software-foundation.html>Apache Software Foundation</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2017/09/13/removing-javadoc-svn-id-tags-with-shell-script.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2017/11/06/using-formatter-exclusions-with-eclipse.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>