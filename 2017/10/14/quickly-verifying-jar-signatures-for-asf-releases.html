<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" /><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Quickly Verifying jar Signatures For ASF Releases | kinow</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Quickly Verifying jar Signatures For ASF Releases" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures. During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release. Tired of always having to manually check several artefacts, or having to come up with the correct shell commands to iterate through a list of files, the other day I wrote a simple script to download the KEYS file, import it, download all the artefacts, then iterate through them and verify the signature. Here’s the script. Licensed under the GPL licence. #!/usr/bin/env bash url=&quot;&quot; # From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/ USAGE=&quot;Usage: `basename $0` [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/&quot; # Parse command line options. while getopts hv: OPT; do case &quot;$OPT&quot; in h) echo $USAGE exit 0 ;; v) echo &quot;`basename $0` version 0.0.1&quot; exit 0 ;; \?) # getopts issues an error message echo $USAGE &gt;&amp;2 exit 1 ;; esac done # Remove the switches we parsed above. shift `expr $OPTIND - 1` # We want at least one non-option argument. # Remove this block if you don&#39;t need it. if [ $# -eq 0 ]; then echo $USAGE &gt;&amp;amp;2 exit 1 fi # Access additional arguments as usual through # variables $@, $*, $1, $2, etc. or using this loop: URL=$1 echo &quot;url: ${URL}&quot; # Use a local temporary directory BUILD_DIR=$(mktemp -d) pushd &quot;$BUILD_DIR&quot; echo &quot;build dir: ${BUILD_DIR}&quot; # Download KEYS file KEYS_URL=https://www.apache.org/dist/commons/KEYS echo &quot;importing KEYS from: ${KEYS_URL}&quot; wget &quot;$KEYS_URL&quot; gpg --import KEYS # Download JARs and signature files echo &quot;downloading all jars and signature files...&quot; wget -r -nd -np -e robots=off --wait 1 -R &quot;index.html*&quot; &quot;${URL}&quot; # Check the files for x in *.jar; do gpg --verify &quot;${x}&quot;.asc; done # EOF The script can be found at GitHub too: https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs" />
<meta property="og:description" content="The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures. During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release. Tired of always having to manually check several artefacts, or having to come up with the correct shell commands to iterate through a list of files, the other day I wrote a simple script to download the KEYS file, import it, download all the artefacts, then iterate through them and verify the signature. Here’s the script. Licensed under the GPL licence. #!/usr/bin/env bash url=&quot;&quot; # From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/ USAGE=&quot;Usage: `basename $0` [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/&quot; # Parse command line options. while getopts hv: OPT; do case &quot;$OPT&quot; in h) echo $USAGE exit 0 ;; v) echo &quot;`basename $0` version 0.0.1&quot; exit 0 ;; \?) # getopts issues an error message echo $USAGE &gt;&amp;2 exit 1 ;; esac done # Remove the switches we parsed above. shift `expr $OPTIND - 1` # We want at least one non-option argument. # Remove this block if you don&#39;t need it. if [ $# -eq 0 ]; then echo $USAGE &gt;&amp;amp;2 exit 1 fi # Access additional arguments as usual through # variables $@, $*, $1, $2, etc. or using this loop: URL=$1 echo &quot;url: ${URL}&quot; # Use a local temporary directory BUILD_DIR=$(mktemp -d) pushd &quot;$BUILD_DIR&quot; echo &quot;build dir: ${BUILD_DIR}&quot; # Download KEYS file KEYS_URL=https://www.apache.org/dist/commons/KEYS echo &quot;importing KEYS from: ${KEYS_URL}&quot; wget &quot;$KEYS_URL&quot; gpg --import KEYS # Download JARs and signature files echo &quot;downloading all jars and signature files...&quot; wget -r -nd -np -e robots=off --wait 1 -R &quot;index.html*&quot; &quot;${URL}&quot; # Check the files for x in *.jar; do gpg --verify &quot;${x}&quot;.asc; done # EOF The script can be found at GitHub too: https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs" />
<link rel="canonical" href="https://kinoshita.eti.br/2017/10/14/quickly-verifying-jar-signatures-for-asf-releases.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2017/10/14/quickly-verifying-jar-signatures-for-asf-releases.html" />
<meta property="og:site_name" content="kinow" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-10-14T00:00:00+13:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Quickly Verifying jar Signatures For ASF Releases" />
<script type="application/ld+json">
{"description":"The release process within the Apache Software Foundation includes a series of steps. Amongst these steps is the voting process. In Apache Commons, the release instructions includes a note on artefact signatures. During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release. Tired of always having to manually check several artefacts, or having to come up with the correct shell commands to iterate through a list of files, the other day I wrote a simple script to download the KEYS file, import it, download all the artefacts, then iterate through them and verify the signature. Here’s the script. Licensed under the GPL licence. #!/usr/bin/env bash url=&quot;&quot; # From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/ USAGE=&quot;Usage: `basename $0` [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/&quot; # Parse command line options. while getopts hv: OPT; do case &quot;$OPT&quot; in h) echo $USAGE exit 0 ;; v) echo &quot;`basename $0` version 0.0.1&quot; exit 0 ;; \\?) # getopts issues an error message echo $USAGE &gt;&amp;2 exit 1 ;; esac done # Remove the switches we parsed above. shift `expr $OPTIND - 1` # We want at least one non-option argument. # Remove this block if you don&#39;t need it. if [ $# -eq 0 ]; then echo $USAGE &gt;&amp;amp;2 exit 1 fi # Access additional arguments as usual through # variables $@, $*, $1, $2, etc. or using this loop: URL=$1 echo &quot;url: ${URL}&quot; # Use a local temporary directory BUILD_DIR=$(mktemp -d) pushd &quot;$BUILD_DIR&quot; echo &quot;build dir: ${BUILD_DIR}&quot; # Download KEYS file KEYS_URL=https://www.apache.org/dist/commons/KEYS echo &quot;importing KEYS from: ${KEYS_URL}&quot; wget &quot;$KEYS_URL&quot; gpg --import KEYS # Download JARs and signature files echo &quot;downloading all jars and signature files...&quot; wget -r -nd -np -e robots=off --wait 1 -R &quot;index.html*&quot; &quot;${URL}&quot; # Check the files for x in *.jar; do gpg --verify &quot;${x}&quot;.asc; done # EOF The script can be found at GitHub too: https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs","@type":"BlogPosting","url":"https://kinoshita.eti.br/2017/10/14/quickly-verifying-jar-signatures-for-asf-releases.html","headline":"Quickly Verifying jar Signatures For ASF Releases","datePublished":"2017-10-14T00:00:00+13:00","dateModified":"2017-10-14T00:00:00+13:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2017/10/14/quickly-verifying-jar-signatures-for-asf-releases.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css" /><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="kinow" /><link href="https://unpkg.com/pattern.css" rel="stylesheet" />

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Quickly Verifying jar Signatures For ASF Releases</h1>
    <span class="post-meta">
      <time class="dt-published" datetime="2017-10-14T00:00:00+13:00" itemprop="datePublished">Oct 14, 2017
      </time>
      <span>&mdash; star date: -305131.51.</span>
      <span>
        Number of words: 496.
      </span></span>
  </header>

  


  <div class="post-content e-content" itemprop="articleBody">
    <p>The release process within the Apache Software Foundation includes a series of steps. Amongst these
steps is the <a href="https://www.apache.org/foundation/voting.html">voting process</a>. In Apache Commons, the
<a href="https://commons.apache.org/releases/prepare.html">release instructions</a> includes a note on artefact
signatures.</p>

<blockquote>
  <p>During the course of the VOTE, make sure that one or more of the reviewers have verified the signatures and hash files included with the release artifacts. If no one specifically mentions having done that during the VOTE, ask on the dev list and make sure someone does this before you proceed with the release.</p>
</blockquote>

<p>Tired of always having to manually check several artefacts, or having to come up with the correct
shell commands to iterate through a list of files, the other day I wrote a simple script to download
the KEYS file, import it, download all the artefacts, then iterate through them and verify the
signature.</p>

<p>Here’s the script. Licensed under the GPL licence.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

<span class="nv">url</span><span class="o">=</span><span class="s2">""</span>

<span class="c"># From: https://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/</span>
<span class="nv">USAGE</span><span class="o">=</span><span class="s2">"Usage: </span><span class="sb">`</span><span class="nb">basename</span> <span class="nv">$0</span><span class="sb">`</span><span class="s2"> [-hv] https://repository.apache.org/.../commons/commons-configuration/2.2/"</span>

<span class="c"># Parse command line options.</span>
<span class="k">while </span><span class="nb">getopts </span>hv: OPT<span class="p">;</span> <span class="k">do
    case</span> <span class="s2">"</span><span class="nv">$OPT</span><span class="s2">"</span> <span class="k">in
        </span>h<span class="p">)</span>
            <span class="nb">echo</span> <span class="nv">$USAGE</span>
            <span class="nb">exit </span>0
            <span class="p">;;</span>
        v<span class="p">)</span>
            <span class="nb">echo</span> <span class="s2">"</span><span class="sb">`</span><span class="nb">basename</span> <span class="nv">$0</span><span class="sb">`</span><span class="s2"> version 0.0.1"</span>
            <span class="nb">exit </span>0
            <span class="p">;;</span>
        <span class="se">\?</span><span class="p">)</span>
            <span class="c"># getopts issues an error message</span>
            <span class="nb">echo</span> <span class="nv">$USAGE</span> <span class="o">&gt;</span>&amp;2
            <span class="nb">exit </span>1
            <span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done</span>

<span class="c"># Remove the switches we parsed above.</span>
<span class="nb">shift</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$OPTIND</span> - 1<span class="sb">`</span>

<span class="c"># We want at least one non-option argument. </span>
<span class="c"># Remove this block if you don't need it.</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span><span class="nt">-eq</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="nv">$USAGE</span> <span class="o">&gt;</span>&amp;amp<span class="p">;</span>2
    <span class="nb">exit </span>1
<span class="k">fi</span>

<span class="c"># Access additional arguments as usual through </span>
<span class="c"># variables $@, $*, $1, $2, etc. or using this loop:</span>
<span class="nv">URL</span><span class="o">=</span><span class="nv">$1</span>

<span class="nb">echo</span> <span class="s2">"url: </span><span class="k">${</span><span class="nv">URL</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># Use a local temporary directory</span>
<span class="nv">BUILD_DIR</span><span class="o">=</span><span class="si">$(</span><span class="nb">mktemp</span> <span class="nt">-d</span><span class="si">)</span>
<span class="nb">pushd</span> <span class="s2">"</span><span class="nv">$BUILD_DIR</span><span class="s2">"</span>

<span class="nb">echo</span> <span class="s2">"build dir: </span><span class="k">${</span><span class="nv">BUILD_DIR</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># Download KEYS file</span>
<span class="nv">KEYS_URL</span><span class="o">=</span>https://www.apache.org/dist/commons/KEYS

<span class="nb">echo</span> <span class="s2">"importing KEYS from: </span><span class="k">${</span><span class="nv">KEYS_URL</span><span class="k">}</span><span class="s2">"</span>

wget <span class="s2">"</span><span class="nv">$KEYS_URL</span><span class="s2">"</span>
gpg <span class="nt">--import</span> KEYS

<span class="c"># Download JARs and signature files</span>
<span class="nb">echo</span> <span class="s2">"downloading all jars and signature files..."</span>

wget <span class="nt">-r</span> <span class="nt">-nd</span> <span class="nt">-np</span> <span class="nt">-e</span> <span class="nv">robots</span><span class="o">=</span>off <span class="nt">--wait</span> 1 <span class="nt">-R</span> <span class="s2">"index.html*"</span> <span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># Check the files</span>
<span class="k">for </span>x <span class="k">in</span> <span class="k">*</span>.jar<span class="p">;</span> <span class="k">do </span>gpg <span class="nt">--verify</span> <span class="s2">"</span><span class="k">${</span><span class="nv">x</span><span class="k">}</span><span class="s2">"</span>.asc<span class="p">;</span> <span class="k">done</span>

<span class="c"># EOF</span>
</code></pre></div></div>

<p>The script can be found at GitHub too: <a href="https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs">https://github.com/kinow/dork-scripts/tree/3c519a74f28c08310ce2e65f8e860d61fd0c5c07/gpg/asf-sigs</a></p>

  </div>

  <div class="tags"><p>Tags:&nbsp;<a class="label" href="/tag/programming">programming</a>,&nbsp;<a class="label" href="/tag/shell script">shell script</a>,&nbsp;<a class="label" href="/tag/security">security</a>,&nbsp;<a class="label" href="/tag/opensource">opensource</a>,&nbsp;<a class="label" href="/tag/apache software foundation">apache software foundation</a>.<br/></p></div>

  <a class="u-url" href="/2017/10/14/quickly-verifying-jar-signatures-for-asf-releases.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
