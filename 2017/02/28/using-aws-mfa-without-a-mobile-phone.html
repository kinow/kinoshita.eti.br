<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Using AWS MFA without a mobile phone | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Using AWS MFA without a mobile phone" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="If you use AWS, the chances are that you use MFA - Multi-factor Authentication - to authenticate. I don’t like to install apps in my mobile phone, unless I need to, so having bought a new phone recently, I decided to find a replacement for Google Authenticator. There are several command line utilities, browser extensions, libraries, and tools (free and paid) that implement the TOTP - time-based one-time password -, the standard required by Amazon for MFA authentication. I decided to use a Go tool for the first time: gauth. Note that you won’t be able to use it from home, in case you don’t bring your laptop home. You can have one MFA device linked to your AWS account, so you may have to remove an existing one. Follow these instructions with care :^) Install Go sudo apt update &amp;&amp; sudo apt upgrade -y cd tmp/ &amp;&amp; wget https://storage.googleapis.com/golang/go1.8.linux-amd64.tar.gz tar -zxvf go1.*.tar.gz sudo mv go /usr/local vim ~/.bashrc Add the following at the bottom of the file. GOROOT=/usr/local/go GOPATH=&quot;$HOME/go&quot; PATH=&quot;$GOPATH/bin:$GOROOT/bin:$PATH&quot; And you can test it with . ~/.bashrc &amp;&amp; go version. Install gauth Given your environment is correctly set up, you should be able to use the following command to install gauth, and have it available in your $PATH. go get github.com/pcarrier/gauth Edit ~/.config/gauth.csv adding a value for the AWS MFA key. Getting the AWS MFA key To get the value that you must place in your gauth.csv file, you must add a new MFA device. When asked to scan a QR code, look for an option to enter the manual value. That will give you a long string. That’s the value you are looking for. Extra: Auto copy-paste from command line If you would like to quickly copy and paste, try creating an alias as described on this gist. I used these instructions, and can now run one command line, that will put the next MFA code in my clipboard. Then just paste into my browser, and that’s that! Happy hacking! References gauth: replace Google Authenticator Enabling a Virtual Multi-factor Authentication (MFA) Device How to Install Go 1.7 on Ubuntu 16.04 &amp; 14.04 Use pbcopy on Ubuntu" />
<meta property="og:description" content="If you use AWS, the chances are that you use MFA - Multi-factor Authentication - to authenticate. I don’t like to install apps in my mobile phone, unless I need to, so having bought a new phone recently, I decided to find a replacement for Google Authenticator. There are several command line utilities, browser extensions, libraries, and tools (free and paid) that implement the TOTP - time-based one-time password -, the standard required by Amazon for MFA authentication. I decided to use a Go tool for the first time: gauth. Note that you won’t be able to use it from home, in case you don’t bring your laptop home. You can have one MFA device linked to your AWS account, so you may have to remove an existing one. Follow these instructions with care :^) Install Go sudo apt update &amp;&amp; sudo apt upgrade -y cd tmp/ &amp;&amp; wget https://storage.googleapis.com/golang/go1.8.linux-amd64.tar.gz tar -zxvf go1.*.tar.gz sudo mv go /usr/local vim ~/.bashrc Add the following at the bottom of the file. GOROOT=/usr/local/go GOPATH=&quot;$HOME/go&quot; PATH=&quot;$GOPATH/bin:$GOROOT/bin:$PATH&quot; And you can test it with . ~/.bashrc &amp;&amp; go version. Install gauth Given your environment is correctly set up, you should be able to use the following command to install gauth, and have it available in your $PATH. go get github.com/pcarrier/gauth Edit ~/.config/gauth.csv adding a value for the AWS MFA key. Getting the AWS MFA key To get the value that you must place in your gauth.csv file, you must add a new MFA device. When asked to scan a QR code, look for an option to enter the manual value. That will give you a long string. That’s the value you are looking for. Extra: Auto copy-paste from command line If you would like to quickly copy and paste, try creating an alias as described on this gist. I used these instructions, and can now run one command line, that will put the next MFA code in my clipboard. Then just paste into my browser, and that’s that! Happy hacking! References gauth: replace Google Authenticator Enabling a Virtual Multi-factor Authentication (MFA) Device How to Install Go 1.7 on Ubuntu 16.04 &amp; 14.04 Use pbcopy on Ubuntu" />
<link rel="canonical" href="https://kinoshita.eti.br/2017/02/28/using-aws-mfa-without-a-mobile-phone.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2017/02/28/using-aws-mfa-without-a-mobile-phone.html" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-02-28T00:00:00+13:00" />
<script type="application/ld+json">
{"dateModified":"2017-02-28T00:00:00+13:00","datePublished":"2017-02-28T00:00:00+13:00","description":"If you use AWS, the chances are that you use MFA - Multi-factor Authentication - to authenticate. I don’t like to install apps in my mobile phone, unless I need to, so having bought a new phone recently, I decided to find a replacement for Google Authenticator. There are several command line utilities, browser extensions, libraries, and tools (free and paid) that implement the TOTP - time-based one-time password -, the standard required by Amazon for MFA authentication. I decided to use a Go tool for the first time: gauth. Note that you won’t be able to use it from home, in case you don’t bring your laptop home. You can have one MFA device linked to your AWS account, so you may have to remove an existing one. Follow these instructions with care :^) Install Go sudo apt update &amp;&amp; sudo apt upgrade -y cd tmp/ &amp;&amp; wget https://storage.googleapis.com/golang/go1.8.linux-amd64.tar.gz tar -zxvf go1.*.tar.gz sudo mv go /usr/local vim ~/.bashrc Add the following at the bottom of the file. GOROOT=/usr/local/go GOPATH=&quot;$HOME/go&quot; PATH=&quot;$GOPATH/bin:$GOROOT/bin:$PATH&quot; And you can test it with . ~/.bashrc &amp;&amp; go version. Install gauth Given your environment is correctly set up, you should be able to use the following command to install gauth, and have it available in your $PATH. go get github.com/pcarrier/gauth Edit ~/.config/gauth.csv adding a value for the AWS MFA key. Getting the AWS MFA key To get the value that you must place in your gauth.csv file, you must add a new MFA device. When asked to scan a QR code, look for an option to enter the manual value. That will give you a long string. That’s the value you are looking for. Extra: Auto copy-paste from command line If you would like to quickly copy and paste, try creating an alias as described on this gist. I used these instructions, and can now run one command line, that will put the next MFA code in my clipboard. Then just paste into my browser, and that’s that! Happy hacking! References gauth: replace Google Authenticator Enabling a Virtual Multi-factor Authentication (MFA) Device How to Install Go 1.7 on Ubuntu 16.04 &amp; 14.04 Use pbcopy on Ubuntu","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2017/02/28/using-aws-mfa-without-a-mobile-phone.html"},"url":"https://kinoshita.eti.br/2017/02/28/using-aws-mfa-without-a-mobile-phone.html","headline":"Using AWS MFA without a mobile phone","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /></head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <a href="/" aria-label="Home page link">
        <svg id="svg8" version="1.1" viewBox="0 0 58.208 9.2604" xmlns="http://www.w3.org/2000/svg" role="img"
             aria-labelledby="svg-logo-title svg-logo-desc">
          <title id="svg-logo-title">KINOSHITA image</title>
          <desc id="svg-logo-desc">A logo with the word KINOSHITA</desc>
          <g id="layer1" transform="translate(0 -287.74)">
            <g id="text817" transform="translate(-2.4568 -.23624)">
              <g id="logo" transform="matrix(2.6585 0 0 2.5911 -63.587 100.56)" fill="#000000" stroke-width=".26458px">
                <path role="presentation" id="path819"
                      d="m25.178 72.637h0.54187v2.9633h-0.54187zm0.5842 1.397 1.0964-1.397h0.635l-1.1049 1.397 1.1049 1.5663h-0.635z"/>
                <path role="presentation" id="path821" d="m27.832 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path823"
                      d="m29.023 72.637h0.5334l1.2658 1.9135v-1.9135h0.54187v2.9633h-0.4445l-1.3547-2.032v2.032h-0.54187z"/>
                <path role="presentation" id="path825"
                      d="m33.298 75.66q-0.4191 0-0.75353-0.1905-0.3302-0.19473-0.5207-0.54187-0.18627-0.35137-0.18627-0.80857t0.18627-0.80433q0.1905-0.35137 0.5207-0.54187 0.33443-0.19473 0.75353-0.19473t0.7493 0.19473q0.33443 0.1905 0.5207 0.54187 0.1905 0.34713 0.1905 0.80433t-0.1905 0.80857q-0.18627 0.34713-0.5207 0.54187-0.3302 0.1905-0.7493 0.1905zm0-0.52493q0.4318 0 0.6604-0.2794 0.23283-0.2794 0.23283-0.7366t-0.23283-0.7366q-0.2286-0.2794-0.6604-0.2794t-0.66463 0.2794q-0.2286 0.2794-0.2286 0.7366t0.2286 0.7366q0.23283 0.2794 0.66463 0.2794z"/>
                <path role="presentation" id="path827"
                      d="m36.091 75.66q-0.24977 0-0.53763-0.06773-0.28363-0.06773-0.4445-0.14817l0.0635-0.57573q0.5588 0.27093 0.98213 0.27093 0.22437 0 0.35137-0.08467 0.127-0.0889 0.127-0.25823 0-0.127-0.07197-0.20743-0.06773-0.08467-0.19897-0.1397-0.13123-0.05927-0.4191-0.16087-0.27093-0.09313-0.44873-0.19473-0.1778-0.10583-0.28363-0.2667-0.1016-0.1651-0.1016-0.40217 0-0.381 0.2794-0.61383t0.8001-0.23283q0.24553 0 0.48683 0.05503 0.24553 0.05503 0.44873 0.13547l-0.05503 0.55457q-0.26247-0.1143-0.4826-0.16933-0.2159-0.05927-0.4318-0.05927-0.2413 0-0.3683 0.08043t-0.127 0.23283q0 0.11853 0.06773 0.19473t0.18203 0.127q0.11853 0.0508 0.34713 0.12277 0.51223 0.16087 0.74507 0.37253 0.23707 0.20743 0.23707 0.5715 0 0.34713-0.2413 0.60537t-0.90593 0.25823z"/>
                <path role="presentation" id="path829"
                      d="m37.688 72.637h0.54187v1.1726h1.3547v-1.1726h0.54187v2.9633h-0.54187v-1.2827h-1.3547v1.2827h-0.54187z"/>
                <path role="presentation" id="path831" d="m40.78 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path833"
                      d="m42.546 73.162h-0.8382v-0.52493h2.2183v0.52493h-0.8382v2.4384h-0.54187z"/>
                <path role="presentation" id="path835"
                      d="m45.632 74.898h-1.0795l-0.24553 0.70273h-0.52493l1.0541-2.9633h0.51223l1.0541 2.9633h-0.52493zm-0.16933-0.47413-0.3683-1.0583-0.37253 1.0583z"/>
              </g>
            </g>
          </g>
        </svg>
      </a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
      <ul>
        <li class="item">
          <a href="/blog/drawing/">Drawing</a>
        </li>
        <li class="item">
          <a href="/blog/languages/">Languages</a>
        </li>
        <li class="item">
          <a href="/blog/music/">Music</a>
        </li>
        <li class="item">
          <a href="/blog/writing/">Writing</a>
        </li>
      </ul>
    </li>
    <li class="item">
      <a href="/art/" class="">Illustrations</a>
    </li>
    <li class="item">
      <a href="/maps/" class="">Maps</a>
    </li>
  </ul>
  <div id="menu-bottom">
    <p id="feed-subscribe">
      <a href="/feed.xml">
        <svg id="feed-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px"
             viewBox="0 0 256 256">
          <circle cx="68" cy="189" r="24" fill="rgba(255, 255, 255, .2)"/>
          <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="rgba(255, 255, 255, .2)"/>
          <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="rgba(255, 255, 255, .2)"/>
        </svg>
      </a>
    </p>
  </div>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <a href="/" aria-label="Home page link">
        <svg id="svg8" version="1.1" viewBox="0 0 58.208 9.2604" xmlns="http://www.w3.org/2000/svg" role="img"
             aria-labelledby="svg-logo-title svg-logo-desc">
          <title id="svg-logo-title">KINOSHITA image</title>
          <desc id="svg-logo-desc">A logo with the word KINOSHITA</desc>
          <g id="layer1" transform="translate(0 -287.74)">
            <g id="text817" transform="translate(-2.4568 -.23624)">
              <g id="logo" transform="matrix(2.6585 0 0 2.5911 -63.587 100.56)" fill="#000000" stroke-width=".26458px">
                <path role="presentation" id="path819"
                      d="m25.178 72.637h0.54187v2.9633h-0.54187zm0.5842 1.397 1.0964-1.397h0.635l-1.1049 1.397 1.1049 1.5663h-0.635z"/>
                <path role="presentation" id="path821" d="m27.832 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path823"
                      d="m29.023 72.637h0.5334l1.2658 1.9135v-1.9135h0.54187v2.9633h-0.4445l-1.3547-2.032v2.032h-0.54187z"/>
                <path role="presentation" id="path825"
                      d="m33.298 75.66q-0.4191 0-0.75353-0.1905-0.3302-0.19473-0.5207-0.54187-0.18627-0.35137-0.18627-0.80857t0.18627-0.80433q0.1905-0.35137 0.5207-0.54187 0.33443-0.19473 0.75353-0.19473t0.7493 0.19473q0.33443 0.1905 0.5207 0.54187 0.1905 0.34713 0.1905 0.80433t-0.1905 0.80857q-0.18627 0.34713-0.5207 0.54187-0.3302 0.1905-0.7493 0.1905zm0-0.52493q0.4318 0 0.6604-0.2794 0.23283-0.2794 0.23283-0.7366t-0.23283-0.7366q-0.2286-0.2794-0.6604-0.2794t-0.66463 0.2794q-0.2286 0.2794-0.2286 0.7366t0.2286 0.7366q0.23283 0.2794 0.66463 0.2794z"/>
                <path role="presentation" id="path827"
                      d="m36.091 75.66q-0.24977 0-0.53763-0.06773-0.28363-0.06773-0.4445-0.14817l0.0635-0.57573q0.5588 0.27093 0.98213 0.27093 0.22437 0 0.35137-0.08467 0.127-0.0889 0.127-0.25823 0-0.127-0.07197-0.20743-0.06773-0.08467-0.19897-0.1397-0.13123-0.05927-0.4191-0.16087-0.27093-0.09313-0.44873-0.19473-0.1778-0.10583-0.28363-0.2667-0.1016-0.1651-0.1016-0.40217 0-0.381 0.2794-0.61383t0.8001-0.23283q0.24553 0 0.48683 0.05503 0.24553 0.05503 0.44873 0.13547l-0.05503 0.55457q-0.26247-0.1143-0.4826-0.16933-0.2159-0.05927-0.4318-0.05927-0.2413 0-0.3683 0.08043t-0.127 0.23283q0 0.11853 0.06773 0.19473t0.18203 0.127q0.11853 0.0508 0.34713 0.12277 0.51223 0.16087 0.74507 0.37253 0.23707 0.20743 0.23707 0.5715 0 0.34713-0.2413 0.60537t-0.90593 0.25823z"/>
                <path role="presentation" id="path829"
                      d="m37.688 72.637h0.54187v1.1726h1.3547v-1.1726h0.54187v2.9633h-0.54187v-1.2827h-1.3547v1.2827h-0.54187z"/>
                <path role="presentation" id="path831" d="m40.78 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path833"
                      d="m42.546 73.162h-0.8382v-0.52493h2.2183v0.52493h-0.8382v2.4384h-0.54187z"/>
                <path role="presentation" id="path835"
                      d="m45.632 74.898h-1.0795l-0.24553 0.70273h-0.52493l1.0541-2.9633h0.51223l1.0541 2.9633h-0.52493zm-0.16933-0.47413-0.3683-1.0583-0.37253 1.0583z"/>
              </g>
            </g>
          </g>
        </svg>
      </a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
      <ul>
        <li class="item">
          <a href="/blog/drawing/">Drawing</a>
        </li>
        <li class="item">
          <a href="/blog/languages/">Languages</a>
        </li>
        <li class="item">
          <a href="/blog/music/">Music</a>
        </li>
        <li class="item">
          <a href="/blog/writing/">Writing</a>
        </li>
      </ul>
    </li>
    <li class="item">
      <a href="/art/" class="">Illustrations</a>
    </li>
    <li class="item">
      <a href="/maps/" class="">Maps</a>
    </li>
  </ul>
  <div id="menu-bottom">
    <p id="feed-subscribe">
      <a href="/feed.xml">
        <svg id="feed-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px"
             viewBox="0 0 256 256">
          <circle cx="68" cy="189" r="24" fill="rgba(255, 255, 255, .2)"/>
          <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="rgba(255, 255, 255, .2)"/>
          <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="rgba(255, 255, 255, .2)"/>
        </svg>
      </a>
    </p>
  </div>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Using AWS MFA without a mobile phone</h1>
    <spab class="post-meta">
      <time class="dt-published" datetime="2017-02-28T00:00:00+13:00" itemprop="datePublished">Feb 28, 2017
      </time>
      <span>&mdash; star date: -305764.38</span></spab>
  </header>

  <ul>
  <li><a href="#install-go">Install Go</a></li>
  <li><a href="#install-gauth">Install gauth</a></li>
  <li><a href="#getting-the-aws-mfa-key">Getting the AWS MFA key</a></li>
  <li><a href="#extra-auto-copy-paste-from-command-line">Extra: Auto copy-paste from command line</a></li>
  <li><a href="#references">References</a></li>
</ul>


  <div class="post-content e-content" itemprop="articleBody">
    <p>If you use AWS, the chances are that you use MFA - Multi-factor Authentication - to authenticate.
I don’t like to install apps in my mobile phone, unless I need to, so having bought a new phone
recently, I decided to find a replacement for Google Authenticator.</p>

<p>There are several command line utilities, browser extensions, libraries, and tools (free and paid)
that implement the TOTP - time-based one-time password -, the standard
<a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable_virtual.html">required by Amazon</a>
for MFA authentication.</p>

<p>I decided to use a Go tool for the first time: <a href="https://github.com/pcarrier/gauth">gauth</a>. Note that you
won’t be able to use it from home, in case you don’t bring your laptop home. You can have one MFA device
linked to your AWS account, so you may have to remove an existing one. Follow these instructions with care :^)</p>

<h3 id="install-go">Install Go</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade <span class="nt">-y</span>
<span class="nb">cd </span>tmp/ <span class="o">&amp;&amp;</span> wget https://storage.googleapis.com/golang/go1.8.linux-amd64.tar.gz
<span class="nb">tar</span> <span class="nt">-zxvf</span> go1.<span class="k">*</span>.tar.gz
<span class="nb">sudo mv </span>go /usr/local
vim ~/.bashrc
</code></pre></div></div>

<p>Add the following at the bottom of the file.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">GOROOT</span><span class="o">=</span>/usr/local/go
<span class="nv">GOPATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/go"</span>
<span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GOPATH</span><span class="s2">/bin:</span><span class="nv">$GOROOT</span><span class="s2">/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div></div>

<p>And you can test it with <code class="language-plaintext highlighter-rouge">. ~/.bashrc &amp;&amp; go version</code>.</p>

<h3 id="install-gauth">Install gauth</h3>

<p>Given your environment is correctly set up, you should be able to use the following command to install
gauth, and have it available in your <em>$PATH</em>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go get github.com/pcarrier/gauth
</code></pre></div></div>

<p>Edit <em>~/.config/gauth.csv</em> adding a value for the AWS MFA key.</p>

<h3 id="getting-the-aws-mfa-key">Getting the AWS MFA key</h3>

<p>To get the value that you must place in your <em>gauth.csv</em> file, you must add a new MFA device. When asked to scan a QR code, look for an option to enter the manual value. That will give you a long string. That’s the value you are looking for.</p>

<h3 id="extra-auto-copy-paste-from-command-line">Extra: Auto copy-paste from command line</h3>

<p>If you would like to quickly copy and paste, try creating an alias as described
<a href="https://gist.github.com/ehime/9fd8810442daf64686a34f885e18be01">on this gist</a>.</p>

<p>I used these instructions, and can now run one command line, that will put the next MFA code in my
clipboard. Then just paste into my browser, and that’s that!</p>

<p>Happy hacking!</p>

<h3 id="references">References</h3>

<ul>
  <li><a href="https://github.com/pcarrier/gauth">gauth: replace Google Authenticator</a></li>
  <li><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable_virtual.html">Enabling a Virtual Multi-factor Authentication (MFA) Device</a></li>
  <li><a href="http://tecadmin.net/install-go-on-ubuntu/">How to Install Go 1.7 on Ubuntu 16.04 &amp; 14.04</a></li>
  <li><a href="http://garywoodfine.com/use-pbcopy-on-ubuntu/">Use pbcopy on Ubuntu</a></li>
</ul>

  </div>

  <div class="tags"><a class="label" href="/tags#go">go</a><a class="label" href="/tags#aws">aws</a><a class="label" href="/tags#security">security</a></div>

  <a class="u-url" href="/2017/02/28/using-aws-mfa-without-a-mobile-phone.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
