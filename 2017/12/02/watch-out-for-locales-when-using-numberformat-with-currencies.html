<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2017/12/02/watch-out-for-locales-when-using-numberformat-with-currencies.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Watch out for Locales when using NumberFormat with currencies"><meta property="og:description" content="In Java you have the NumberFormatException to help you formatting and parsing numbers for any locale. Said that, here&amp;rsquo;s some code.
BigDecimal negative = new BigDecimal(&amp;#34;-1234.56&amp;#34;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.UK); String formattedNegative = nf.format(negative); System.out.println(formattedNegative); The output for this code is -£1,234.56. That&amp;rsquo;s expected, as the locale is set to UK, so the currency symbol used is for British Pounds. And as the number is negative, you get that minus sign as a prefix."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-12-02T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-31T19:08:05+02:00"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Java"><meta property="article:tag" content="Apache Software Foundation"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Watch out for Locales when using NumberFormat with currencies"><meta name=twitter:description content='In Java you have the NumberFormatException to help you formatting and parsing numbers for any locale. Said that, here&rsquo;s some code.
BigDecimal negative = new BigDecimal("-1234.56"); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.UK); String formattedNegative = nf.format(negative); System.out.println(formattedNegative); The output for this code is -£1,234.56. That&rsquo;s expected, as the locale is set to UK, so the currency symbol used is for British Pounds. And as the number is negative, you get that minus sign as a prefix.'><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2017/12/02/watch-out-for-locales-when-using-numberformat-with-currencies/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.ecb27dc5d5ced6616f17336fdf32a78aff8278ec4b599f9e5cdc5bb8a09a9f28.css integrity="sha256-7LJ9xdXO1mFvFzNv3zKniv+CeOxLWZ+eXNxbuKCanyg="><title>kinow | Watch out for Locales when using NumberFormat with currencies</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Watch out for Locales when using NumberFormat with currencies","headline":"Watch out for Locales when using NumberFormat with currencies","alternativeHeadline":"","description":"In Java you have the NumberFormatException to help you formatting and parsing numbers for any locale. Said that, here\u0026rsquo;s some code.\nBigDecimal negative = new BigDecimal(\u0026#34;-1234.56\u0026#34;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.UK); String formattedNegative = nf.format(negative); System.out.println(formattedNegative); The output for this code is -£1,234.56. That\u0026rsquo;s expected, as the locale is set to UK, so the currency symbol used is for British Pounds. And as the number is negative, you get that minus sign as a prefix.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2017\/12\/02\/watch-out-for-locales-when-using-numberformat-with-currencies.html"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"kinow","copyrightYear":"2017","dateCreated":"2017-12-02T00:00:00.00Z","datePublished":"2017-12-02T00:00:00.00Z","dateModified":"2024-08-31T19:08:05.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2017\/12\/02\/watch-out-for-locales-when-using-numberformat-with-currencies.html","wordCount":"188","genre":["programming","java","apache software foundation"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul style=position:relative><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li><li style=position:absolute;right:0;bottom:-.75rem;text-align:right><span style=text-transform:uppercase;font-weight:700;font-size:3rem;color:#fffefa;line-height:normal;letter-spacing:-.1rem>Kinow</span></li></ul></nav></header><main><article class=content><h1>Watch out for Locales when using NumberFormat with currencies</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2017-12-02>Dec 2, 2017</time></div><aside><nav id=TableOfContents></nav></aside><p>In Java you have the <a href=https://docs.oracle.com/javase/9/docs/api/java/text/NumberFormat.html>NumberFormatException</a>
to help you formatting and parsing numbers for any locale. Said that, here&rsquo;s some code.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>BigDecimal <span style=color:#000>negative</span> <span style=color:#000>=</span> new BigDecimal<span style=color:#000>(</span><span style=color:#c41a16>&#34;-1234.56&#34;</span><span style=color:#000>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DecimalFormat <span style=color:#000>nf</span> <span style=color:#000>=</span> <span style=color:#000>(</span>DecimalFormat<span style=color:#000>)</span> NumberFormat.getCurrencyInstance<span style=color:#000>(</span>Locale.UK<span style=color:#000>)</span>;
</span></span><span style=display:flex><span>String <span style=color:#000>formattedNegative</span> <span style=color:#000>=</span> nf.format<span style=color:#000>(</span>negative<span style=color:#000>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>System.out.println<span style=color:#000>(</span>formattedNegative<span style=color:#000>)</span>;
</span></span></code></pre></div><p>The output for this code is <strong>-£1,234.56</strong>. That&rsquo;s expected, as the locale is set to
UK, so the currency symbol used is for British Pounds. And as the number is negative, you
get that minus sign as a prefix. For Japanese locale you&rsquo;d get <strong>-￥1,235</strong>, and for Brazilian
locale you&rsquo;d get <strong>-R$ 1.234,56</strong>.</p><p>So far so good.</p><p>What about the following code, with nothing different except for the locale set to <strong>US</strong>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>BigDecimal <span style=color:#000>negative</span> <span style=color:#000>=</span> new BigDecimal<span style=color:#000>(</span><span style=color:#c41a16>&#34;-1234.56&#34;</span><span style=color:#000>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DecimalFormat <span style=color:#000>nf</span> <span style=color:#000>=</span> <span style=color:#000>(</span>DecimalFormat<span style=color:#000>)</span> NumberFormat.getCurrencyInstance<span style=color:#000>(</span>Locale.US<span style=color:#000>)</span>; // &lt;--- US now
</span></span><span style=display:flex><span>String <span style=color:#000>formattedNegative</span> <span style=color:#000>=</span> nf.format<span style=color:#000>(</span>negative<span style=color:#000>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>System.out.println<span style=color:#000>(</span>formattedNegative<span style=color:#000>)</span>;
</span></span></code></pre></div><p>Some could intuitively expect <strong>-$1,234.56</strong>. However, <strong>the output is actually ($1,234.56)</strong>.</p><p>There are different prefixes and suffixes. But in some locales the prefix can be empty, or, as
in the case of the US locale, it can be quite different than what you could expect.</p><p>Learned about this peculiarity from NumberFormat while working on <a href=https://issues.apache.org/jira/browse/VALIDATOR-433>VALIDATOR-433</a> for Apache Commons Validator.</p><p>Happy hacking!</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/programming.html>Programming</a>,
<a href=/tags/java.html>Java</a>,
<a href=/tags/apache-software-foundation.html>Apache Software Foundation</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2017/12/01/what-are-identification-keys.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2017/12/03/remember-to-synchronize-when-iterating-streams-from-a-synchronized-collection.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>