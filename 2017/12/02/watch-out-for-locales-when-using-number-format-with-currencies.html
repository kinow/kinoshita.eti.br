<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Watch out for Locales when using NumberFormat with currencies | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Watch out for Locales when using NumberFormat with currencies" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In Java you have the NumberFormatException to help you formatting and parsing numbers for any locale. Said that, here’s some code. BigDecimal negative = new BigDecimal(&quot;-1234.56&quot;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.UK); String formattedNegative = nf.format(negative); System.out.println(formattedNegative); The output for this code is -£1,234.56. That’s expected, as the locale is set to UK, so the currency symbol used is for British Pounds. And as the number is negative, you get that minus sign as a prefix. For Japanese locale you’d get -￥1,235, and for Brazilian locale you’d get -R$ 1.234,56. So far so good. What about the following code, with nothing different except for the locale set to US. BigDecimal negative = new BigDecimal(&quot;-1234.56&quot;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.US); // &lt;--- US now String formattedNegative = nf.format(negative); System.out.println(formattedNegative); Some could intuitively expect -$1,234.56. However, the output is actually ($1,234.56). There are different prefixes and suffixes. But in some locales the prefix can be empty, or, as in the case of the US locale, it can be quite different than what you could expect. Learned about this peculiarity from NumberFormat while working on VALIDATOR-433 for Apache Commons Validator. Happy hacking!" />
<meta property="og:description" content="In Java you have the NumberFormatException to help you formatting and parsing numbers for any locale. Said that, here’s some code. BigDecimal negative = new BigDecimal(&quot;-1234.56&quot;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.UK); String formattedNegative = nf.format(negative); System.out.println(formattedNegative); The output for this code is -£1,234.56. That’s expected, as the locale is set to UK, so the currency symbol used is for British Pounds. And as the number is negative, you get that minus sign as a prefix. For Japanese locale you’d get -￥1,235, and for Brazilian locale you’d get -R$ 1.234,56. So far so good. What about the following code, with nothing different except for the locale set to US. BigDecimal negative = new BigDecimal(&quot;-1234.56&quot;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.US); // &lt;--- US now String formattedNegative = nf.format(negative); System.out.println(formattedNegative); Some could intuitively expect -$1,234.56. However, the output is actually ($1,234.56). There are different prefixes and suffixes. But in some locales the prefix can be empty, or, as in the case of the US locale, it can be quite different than what you could expect. Learned about this peculiarity from NumberFormat while working on VALIDATOR-433 for Apache Commons Validator. Happy hacking!" />
<link rel="canonical" href="https://kinoshita.eti.br/2017/12/02/watch-out-for-locales-when-using-number-format-with-currencies.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2017/12/02/watch-out-for-locales-when-using-number-format-with-currencies.html" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-12-02T00:00:00+13:00" />
<script type="application/ld+json">
{"description":"In Java you have the NumberFormatException to help you formatting and parsing numbers for any locale. Said that, here’s some code. BigDecimal negative = new BigDecimal(&quot;-1234.56&quot;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.UK); String formattedNegative = nf.format(negative); System.out.println(formattedNegative); The output for this code is -£1,234.56. That’s expected, as the locale is set to UK, so the currency symbol used is for British Pounds. And as the number is negative, you get that minus sign as a prefix. For Japanese locale you’d get -￥1,235, and for Brazilian locale you’d get -R$ 1.234,56. So far so good. What about the following code, with nothing different except for the locale set to US. BigDecimal negative = new BigDecimal(&quot;-1234.56&quot;); DecimalFormat nf = (DecimalFormat) NumberFormat.getCurrencyInstance(Locale.US); // &lt;--- US now String formattedNegative = nf.format(negative); System.out.println(formattedNegative); Some could intuitively expect -$1,234.56. However, the output is actually ($1,234.56). There are different prefixes and suffixes. But in some locales the prefix can be empty, or, as in the case of the US locale, it can be quite different than what you could expect. Learned about this peculiarity from NumberFormat while working on VALIDATOR-433 for Apache Commons Validator. Happy hacking!","@type":"BlogPosting","url":"https://kinoshita.eti.br/2017/12/02/watch-out-for-locales-when-using-number-format-with-currencies.html","headline":"Watch out for Locales when using NumberFormat with currencies","dateModified":"2017-12-02T00:00:00+13:00","datePublished":"2017-12-02T00:00:00+13:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2017/12/02/watch-out-for-locales-when-using-number-format-with-currencies.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /><link href="https://unpkg.com/pattern.css" rel="stylesheet">

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Watch out for Locales when using NumberFormat with currencies</h1>
    <span class="post-meta">
      <time class="dt-published" datetime="2017-12-02T00:00:00+13:00" itemprop="datePublished">Dec 2, 2017
      </time>
      <span>&mdash; star date: -305997.26.</span>
      <span>
        Number of words: 237.
      </span></span>
  </header>

  


  <div class="post-content e-content" itemprop="articleBody">
    <p>In Java you have the <a href="https://docs.oracle.com/javase/9/docs/api/java/text/NumberFormat.html">NumberFormatException</a>
to help you formatting and parsing numbers for any locale. Said that, here’s some code.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BigDecimal negative <span class="o">=</span> new BigDecimal<span class="o">(</span><span class="s2">"-1234.56"</span><span class="o">)</span><span class="p">;</span>

DecimalFormat nf <span class="o">=</span> <span class="o">(</span>DecimalFormat<span class="o">)</span> NumberFormat.getCurrencyInstance<span class="o">(</span>Locale.UK<span class="o">)</span><span class="p">;</span>
String formattedNegative <span class="o">=</span> nf.format<span class="o">(</span>negative<span class="o">)</span><span class="p">;</span>

System.out.println<span class="o">(</span>formattedNegative<span class="o">)</span><span class="p">;</span>
</code></pre></div></div>

<p>The output for this code is <strong>-£1,234.56</strong>. That’s expected, as the locale is set to
UK, so the currency symbol used is for British Pounds. And as the number is negative, you
get that minus sign as a prefix. For Japanese locale you’d get <strong>-￥1,235</strong>, and for Brazilian
locale you’d get <strong>-R$ 1.234,56</strong>.</p>

<p>So far so good.</p>

<p>What about the following code, with nothing different except for the locale set to <strong>US</strong>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BigDecimal negative <span class="o">=</span> new BigDecimal<span class="o">(</span><span class="s2">"-1234.56"</span><span class="o">)</span><span class="p">;</span>

DecimalFormat nf <span class="o">=</span> <span class="o">(</span>DecimalFormat<span class="o">)</span> NumberFormat.getCurrencyInstance<span class="o">(</span>Locale.US<span class="o">)</span><span class="p">;</span> // &lt;<span class="nt">---</span> US now
String formattedNegative <span class="o">=</span> nf.format<span class="o">(</span>negative<span class="o">)</span><span class="p">;</span>

System.out.println<span class="o">(</span>formattedNegative<span class="o">)</span><span class="p">;</span>
</code></pre></div></div>

<p>Some could intuitively expect <strong>-$1,234.56</strong>. However, <strong>the output is actually ($1,234.56)</strong>.</p>

<p>There are different prefixes and suffixes. But in some locales the prefix can be empty, or, as
in the case of the US locale, it can be quite different than what you could expect.</p>

<p>Learned about this peculiarity from NumberFormat while working on <a href="https://issues.apache.org/jira/browse/VALIDATOR-433">VALIDATOR-433</a> for Apache Commons Validator.</p>

<p>Happy hacking!</p>

  </div>

  <div class="tags">
    <p>
      Published Dec 2, 2017 in &ldquo;blog&rdquo; and tagged&nbsp;<a class="label" href="/tags#programming">programming</a>,&nbsp;<a class="label" href="/tags#java">java</a>,&nbsp;<a class="label" href="/tags#apache software foundation">apache software foundation</a>. Number of words: 237.
    </p>
  </div>

  <a class="u-url" href="/2017/12/02/watch-out-for-locales-when-using-number-format-with-currencies.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
