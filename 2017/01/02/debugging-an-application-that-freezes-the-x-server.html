<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Debugging an application that freezes the X server | kinow</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Debugging an application that freezes the X server" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Some time ago, I decided to start writing C++ again, and picked Krita for that. Krita is written in C++ and Qt. The bug I was working on involved a memory issue when changing the UI. The problem was that this UI change would result in, not only Krita, but the whole X server freezing. My set up was basically Ubuntu 16.04.1 LTS, with Eclipse, Qt5, and the latest version of Krita checked out via git. Initially I spent some time looking at the logs, tracing the binary, even downloaded some Qt utility tools to look at the events and what was happening with the application when it froze. However, eventually I realized I was going to spend more time on this part of the issue, rather than on the memory bug. So decided to look for a work-around. Thankfully someone else blogged about a similar issue and saved me a lot of time :-) Here’s how I did it, following the instructions in this blog post. $ sudo apt-get install xnest -y $ cd krita_install/ $ Xnest :10 $ twm -display :10 $ export DISPLAY=:10 $ ./krita That’s it. You should have Krita running in a separate window, with Xnest, and within this window the twm window manager running. So when it freezes, at least you can still debug your application in Eclipse or whatever IDE you prefer. Happy hacking!" />
<meta property="og:description" content="Some time ago, I decided to start writing C++ again, and picked Krita for that. Krita is written in C++ and Qt. The bug I was working on involved a memory issue when changing the UI. The problem was that this UI change would result in, not only Krita, but the whole X server freezing. My set up was basically Ubuntu 16.04.1 LTS, with Eclipse, Qt5, and the latest version of Krita checked out via git. Initially I spent some time looking at the logs, tracing the binary, even downloaded some Qt utility tools to look at the events and what was happening with the application when it froze. However, eventually I realized I was going to spend more time on this part of the issue, rather than on the memory bug. So decided to look for a work-around. Thankfully someone else blogged about a similar issue and saved me a lot of time :-) Here’s how I did it, following the instructions in this blog post. $ sudo apt-get install xnest -y $ cd krita_install/ $ Xnest :10 $ twm -display :10 $ export DISPLAY=:10 $ ./krita That’s it. You should have Krita running in a separate window, with Xnest, and within this window the twm window manager running. So when it freezes, at least you can still debug your application in Eclipse or whatever IDE you prefer. Happy hacking!" />
<link rel="canonical" href="https://kinoshita.eti.br/2017/01/02/debugging-an-application-that-freezes-the-x-server.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2017/01/02/debugging-an-application-that-freezes-the-x-server.html" />
<meta property="og:site_name" content="kinow" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-01-02T00:00:00+13:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Debugging an application that freezes the X server" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2017/01/02/debugging-an-application-that-freezes-the-x-server.html"},"description":"Some time ago, I decided to start writing C++ again, and picked Krita for that. Krita is written in C++ and Qt. The bug I was working on involved a memory issue when changing the UI. The problem was that this UI change would result in, not only Krita, but the whole X server freezing. My set up was basically Ubuntu 16.04.1 LTS, with Eclipse, Qt5, and the latest version of Krita checked out via git. Initially I spent some time looking at the logs, tracing the binary, even downloaded some Qt utility tools to look at the events and what was happening with the application when it froze. However, eventually I realized I was going to spend more time on this part of the issue, rather than on the memory bug. So decided to look for a work-around. Thankfully someone else blogged about a similar issue and saved me a lot of time :-) Here’s how I did it, following the instructions in this blog post. $ sudo apt-get install xnest -y $ cd krita_install/ $ Xnest :10 $ twm -display :10 $ export DISPLAY=:10 $ ./krita That’s it. You should have Krita running in a separate window, with Xnest, and within this window the twm window manager running. So when it freezes, at least you can still debug your application in Eclipse or whatever IDE you prefer. Happy hacking!","@type":"BlogPosting","url":"https://kinoshita.eti.br/2017/01/02/debugging-an-application-that-freezes-the-x-server.html","headline":"Debugging an application that freezes the X server","dateModified":"2017-01-02T00:00:00+13:00","datePublished":"2017-01-02T00:00:00+13:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="kinow" /><link href="https://unpkg.com/pattern.css" rel="stylesheet">

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Debugging an application that freezes the X server</h1>
    <span class="post-meta">
      <time class="dt-published" datetime="2017-01-02T00:00:00+13:00" itemprop="datePublished">Jan 2, 2017
      </time>
      <span>&mdash; star date: -305912.33.</span>
      <span>
        Number of words: 252.
      </span></span>
  </header>

  


  <div class="post-content e-content" itemprop="articleBody">
    <p>Some time ago, I decided to start writing C++ again, and picked Krita for that.
Krita is written in C++ and Qt. The <a href="https://bugs.kde.org/show_bug.cgi?id=366741">bug I was working on</a>
involved a memory issue when changing the UI.</p>

<p>The problem was that this UI change would result in, not only Krita, but the whole
X server freezing. My set up was basically Ubuntu 16.04.1 LTS, with Eclipse, Qt5,
and the latest version of Krita checked out via git.</p>

<p>Initially I spent some time looking at the logs, tracing the binary, even downloaded
some Qt utility tools to look at the events and what was happening with the application
when it froze.</p>

<p>However, eventually I realized I was going to spend more time on this part of the
issue, rather than on the memory bug. So decided to look for a work-around.</p>

<p>Thankfully someone else blogged about a similar issue and saved me a lot of time :-)
Here’s how I did it, following the instructions in
<a href="http://www.geany.org/manual/gtk/gtk-faq/x462.html">this blog post</a>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>xnest <span class="nt">-y</span>
<span class="nv">$ </span><span class="nb">cd </span>krita_install/
<span class="nv">$ </span>Xnest :10
<span class="nv">$ </span>twm <span class="nt">-display</span> :10
<span class="nv">$ </span><span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:10
<span class="nv">$ </span>./krita
</code></pre></div></div>

<p>That’s it. You should have Krita running in a separate window, with Xnest, and within
this window the twm window manager running. So when it freezes, at least you can still
debug your application in Eclipse or whatever IDE you prefer.</p>

<p>Happy hacking!</p>

  </div>

  <div class="tags"><p>Tags:&nbsp;<a class="label" href="/tags#c++">c++</a>,&nbsp;<a class="label" href="/tags#krita">krita</a>,&nbsp;<a class="label" href="/tags#opensource">opensource</a>,&nbsp;<a class="label" href="/tags#programming">programming</a>.<br/></p></div>

  <a class="u-url" href="/2017/01/02/debugging-an-application-that-freezes-the-x-server.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
