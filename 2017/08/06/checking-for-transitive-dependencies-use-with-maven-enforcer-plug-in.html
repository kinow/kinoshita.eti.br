<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:title" content="Checking for transitive dependencies use with Maven Enforcer Plug-in">
<meta property="og:description" content="Maven Enforcer Plug-in “provides goals to control certain environmental constraints such as Maven version, JDK version and OS family along with many more built-in rules and user created rules”. There are several libraries that provide custom rules, or you can write your own.
One of these libraries is ImmobilienScout24/illegal-transitive-dependency-check, “an additional rule for the maven-enforcer-plugin that checks for classes referenced via transitive Maven dependencies”.
With the following example:
<project> ... <build> <plugins> <plugin> <groupId>org.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kinoshita.eti.br/2017/08/06/checking-for-transitive-dependencies-use-with-maven-enforcer-plug-in.html"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-08-06T00:00:00+00:00">
<meta property="article:modified_time" content="2017-08-06T00:00:00+00:00">
<link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.2429da8e5a84798d4406e4f3e3de2d7bfac6ef5d368b361aa61640e1c654f7c1.css integrity="sha256-JCnajlqEeY1EBuTz494te/rG7102izYaphZA4cZU98E=">
<title>kinow | Checking for transitive dependencies use with Maven Enforcer Plug-in</title>
</head>
<body>
<header role=banner class=content>
<nav id=nav aria-label=Main role=navigation class=content>
<ul><li>
<a href=/><i data-feather=about></i> About</a>
</li><li>
<a href=/blog/><i data-feather=blog></i> Blog</a>
</li><li>
<a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a>
</li>
</ul>
</nav>
</header>
<main>
<article class=content>
<h1>Checking for transitive dependencies use with Maven Enforcer Plug-in</h1><div class=metadata>
<i data-feather=calendar></i>
<time datetime=2017-08-06>Aug 6, 2017</time>
</div>
<p><a href=http://maven.apache.org/enforcer/maven-enforcer-plugin/>Maven Enforcer Plug-in</a> “provides goals to control certain environmental constraints such as Maven version, JDK version and OS family along with many more built-in rules and user created rules”. There are several libraries that provide custom rules, or you can write your own.</p>
<p>One of these libraries is <a href=https://github.com/ImmobilienScout24/illegal-transitive-dependency-check>ImmobilienScout24/illegal-transitive-dependency-check</a>, “an additional rule for the maven-enforcer-plugin that checks for classes referenced via transitive Maven dependencies”.</p>
<p>With the following example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:navy;font-weight:700>&lt;project&gt;</span>
  ...
  <span style=color:navy;font-weight:700>&lt;build&gt;</span>
    <span style=color:navy;font-weight:700>&lt;plugins&gt;</span>
      <span style=color:navy;font-weight:700>&lt;plugin&gt;</span>
        <span style=color:navy;font-weight:700>&lt;groupId&gt;</span>org.apache.maven.plugins<span style=color:navy;font-weight:700>&lt;/groupId&gt;</span>
        <span style=color:navy;font-weight:700>&lt;artifactId&gt;</span>maven-enforcer-plugin<span style=color:navy;font-weight:700>&lt;/artifactId&gt;</span>
        <span style=color:navy;font-weight:700>&lt;version&gt;</span>1.3.1<span style=color:navy;font-weight:700>&lt;/version&gt;</span>
        <span style=color:navy;font-weight:700>&lt;dependencies&gt;</span>
          <span style=color:navy;font-weight:700>&lt;dependency&gt;</span>
            <span style=color:navy;font-weight:700>&lt;groupId&gt;</span>de.is24.maven.enforcer.rules<span style=color:navy;font-weight:700>&lt;/groupId&gt;</span>
            <span style=color:navy;font-weight:700>&lt;artifactId&gt;</span>illegal-transitive-dependency-check<span style=color:navy;font-weight:700>&lt;/artifactId&gt;</span>
            <span style=color:navy;font-weight:700>&lt;version&gt;</span>1.7.4<span style=color:navy;font-weight:700>&lt;/version&gt;</span>
          <span style=color:navy;font-weight:700>&lt;/dependency&gt;</span>
        <span style=color:navy;font-weight:700>&lt;/dependencies&gt;</span>
        <span style=color:navy;font-weight:700>&lt;executions&gt;</span>
          <span style=color:navy;font-weight:700>&lt;execution&gt;</span>
            <span style=color:navy;font-weight:700>&lt;id&gt;</span>enforce<span style=color:navy;font-weight:700>&lt;/id&gt;</span>
            <span style=color:navy;font-weight:700>&lt;phase&gt;</span>verify<span style=color:navy;font-weight:700>&lt;/phase&gt;</span>
            <span style=color:navy;font-weight:700>&lt;goals&gt;</span>
              <span style=color:navy;font-weight:700>&lt;goal&gt;</span>enforce<span style=color:navy;font-weight:700>&lt;/goal&gt;</span>
            <span style=color:navy;font-weight:700>&lt;/goals&gt;</span>
            <span style=color:navy;font-weight:700>&lt;configuration&gt;</span>
              <span style=color:navy;font-weight:700>&lt;rules&gt;</span>
                <span style=color:navy;font-weight:700>&lt;illegalTransitiveDependencyCheck</span> <span style=color:red>implementation=</span><span style=color:#00f>&#34;de.is24.maven.enforcer.rules.IllegalTransitiveDependencyCheck&#34;</span><span style=color:navy;font-weight:700>&gt;</span>
                  <span style=color:navy;font-weight:700>&lt;reportOnly&gt;</span>false<span style=color:navy;font-weight:700>&lt;/reportOnly&gt;</span>
                  <span style=color:navy;font-weight:700>&lt;useClassesFromLastBuild&gt;</span>true<span style=color:navy;font-weight:700>&lt;/useClassesFromLastBuild&gt;</span>
                  <span style=color:navy;font-weight:700>&lt;suppressTypesFromJavaRuntime&gt;</span>true<span style=color:navy;font-weight:700>&lt;/suppressTypesFromJavaRuntime&gt;</span>
                  <span style=color:navy;font-weight:700>&lt;listMissingArtifacts&gt;</span>false<span style=color:navy;font-weight:700>&lt;/listMissingArtifacts&gt;</span>
                <span style=color:navy;font-weight:700>&lt;/illegalTransitiveDependencyCheck&gt;</span>
              <span style=color:navy;font-weight:700>&lt;/rules&gt;</span>
            <span style=color:navy;font-weight:700>&lt;/configuration&gt;</span>
          <span style=color:navy;font-weight:700>&lt;/execution&gt;</span>
        <span style=color:navy;font-weight:700>&lt;/executions&gt;</span>
      <span style=color:navy;font-weight:700>&lt;/plugin&gt;</span>
    <span style=color:navy;font-weight:700>&lt;/plugins&gt;</span>
  <span style=color:navy;font-weight:700>&lt;/build&gt;</span>
  ...
<span style=color:navy;font-weight:700>&lt;/project&gt;</span>
</code></pre></div><p>Running <code>mvn clean verify</code> will execute the Maven Enforcer Plug-in <code>enforce</code> goal, which will call the illegal transitive dependency check.</p>
<p>And the build will fail if your code is using (i.e. importing) any class that is not available in your first-level dependencies. For example, if in your pom.xml you added <code>commons-lang3</code> and <code>commons-configuration</code>, the latter which includes <code>commons-lang</code> <strong>2.x</strong>, and you used <code>org.apache.commons.lang.StringUtils</code> instead of <code>org.apache.commons.lang3.StringUtils</code>, the build would fail.</p>
<p>In order to fix the build, you have to either add the transitive dependency to your pom.xml file, or correct your import statements. This is specially useful to prevent future issues due to other dependencies being added or updated, and changing the version of the transitive dependency.</p>
<p>Bonus points if you combine that with continuous integration and some service like Travis-CI.</p>
<p>♥ Open Source</p>
<aside class=links>
<a class=previous href=https://kinoshita.eti.br/2017/08/03/my-favourite-star-trek-captain-jean-luc-picard.html>&#171; Previous</a>
<a class=next href=https://kinoshita.eti.br/2017/08/12/two-other-maven-plug-ins-impsort-and-deptools.html>Next &#187;</a>
</aside>
</article>
</main>
<footer role=contentinfo>
<ul id=social-media-icons>
<li>
<a href=https://www.instagram.com/brunokinoshita/>
<img src=/assets/icons/instagram.png alt="Instagram link">
</a>
</li>
<li>
<a href=https://twitter.com/kinow/>
<img src=/assets/icons/twitter.png alt="Twitter link">
</a>
</li>
<li>
<a href=https://github.com/kinow/>
<img src=/assets/icons/github.png alt="GitHub link">
</a>
</li>
<li>
<a href=/feed.xml>
<img src=/assets/icons/news.png alt="RSS feed link">
</a>
</li>
</ul>
</footer>
</body>
</html>