<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2017/08/12/two-other-maven-plug-ins-impsort-and-deptools.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Two other Maven Plug-ins: impsort and deptools"><meta property="og:description" content="Last [week I wrote]({% post_url 2017-08-06-checking-for-transitive-dependencies-use-with-maven-enforcer-plugin %}) about the ImmobilienScout24/illegal-transitive-dependency-check rule for Maven Enforcer Plug-in. There are two other Maven Plug-ins that can be useful.
mbknor/deptools The mbknor/deptools is another rule for the Maven Enforcer Plug-in. It will scan your project dependency tree, looking for transitive dependencies. Whenever it finds a transitive dependency, it will keep track of the versions. And if, because of the way your dependencies and transitive dependencies are organised, you end up with a version that is not the newest, the build will fail."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-08-12T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-21T12:10:19+02:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Opensource"><meta property="article:tag" content="Maven"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Two other Maven Plug-ins: impsort and deptools"><meta name=twitter:description content="Last [week I wrote]({% post_url 2017-08-06-checking-for-transitive-dependencies-use-with-maven-enforcer-plugin %}) about the ImmobilienScout24/illegal-transitive-dependency-check rule for Maven Enforcer Plug-in. There are two other Maven Plug-ins that can be useful.
mbknor/deptools The mbknor/deptools is another rule for the Maven Enforcer Plug-in. It will scan your project dependency tree, looking for transitive dependencies. Whenever it finds a transitive dependency, it will keep track of the versions. And if, because of the way your dependencies and transitive dependencies are organised, you end up with a version that is not the newest, the build will fail."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2017/08/12/two-other-maven-plug-ins-impsort-and-deptools/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.84655682aa42a26b14ea59649da35e622383c94bca7a62d17b2cc6c559ed1efb.css integrity="sha256-hGVWgqpComsU6llknaNeYiODyUvKemLReyzGxVntHvs="><title>kinow | Two other Maven Plug-ins: impsort and deptools</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Two other Maven Plug-ins: impsort and deptools","headline":"Two other Maven Plug-ins: impsort and deptools","alternativeHeadline":"","description":"Last [week I wrote]({% post_url 2017-08-06-checking-for-transitive-dependencies-use-with-maven-enforcer-plugin %}) about the ImmobilienScout24\/illegal-transitive-dependency-check rule for Maven Enforcer Plug-in. There are two other Maven Plug-ins that can be useful.\nmbknor\/deptools The mbknor\/deptools is another rule for the Maven Enforcer Plug-in. It will scan your project dependency tree, looking for transitive dependencies. Whenever it finds a transitive dependency, it will keep track of the versions. And if, because of the way your dependencies and transitive dependencies are organised, you end up with a version that is not the newest, the build will fail.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2017\/08\/12\/two-other-maven-plug-ins-impsort-and-deptools.html"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"kinow","copyrightYear":"2017","dateCreated":"2017-08-12T00:00:00.00Z","datePublished":"2017-08-12T00:00:00.00Z","dateModified":"2024-07-21T12:10:19.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2017\/08\/12\/two-other-maven-plug-ins-impsort-and-deptools.html","wordCount":"498","genre":["java","programming","opensource","maven"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li></ul></nav></header><main><article class=content><h1>Two other Maven Plug-ins: impsort and deptools</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2017-08-12>Aug 12, 2017</time></div><aside><nav id=TableOfContents><ul><li><ul><li><a href=#mbknordeptools>mbknor/deptools</a></li><li><a href=#revelcimpsort-maven-plugin>revelc/impsort-maven-plugin</a></li><li><a href=#conclusion>Conclusion</a></li></ul></li></ul></nav></aside><p>Last [week I wrote]({% post_url 2017-08-06-checking-for-transitive-dependencies-use-with-maven-enforcer-plugin %})
about the <a href=https://github.com/ImmobilienScout24/illegal-transitive-dependency-check>ImmobilienScout24/illegal-transitive-dependency-check</a>
rule for Maven Enforcer Plug-in. There are two other Maven Plug-ins that can be useful.</p><h3 id=mbknordeptools>mbknor/deptools</h3><p>The <a href=https://github.com/mbknor/deptools>mbknor/deptools</a> is another rule for the Maven Enforcer Plug-in. It will scan your project dependency tree, looking for transitive dependencies. Whenever it finds a transitive dependency, it will keep track of the versions. And if, because of the way your dependencies and transitive dependencies are organised, you end up with a version that is not the newest, the build will fail.</p><p>So, for example, if you have <code>commons-lang3</code> as transitive dependency of two other dependencies, but one is using 3.4 and the other 3.5. If for any reason you are using 3.4 instead of 3.5, you will have a build error.</p><p>Here&rsquo;s an example of the plug-in configuration.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#000>&lt;project&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;build&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;groupId&gt;</span>deptools.plugin<span style=color:#000>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;artifactId&gt;</span>maven-deptools-plugin<span style=color:#000>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;version&gt;</span>1.3<span style=color:#000>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;executions&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#000>&lt;execution&gt;</span>
</span></span><span style=display:flex><span>                  <span style=color:#000>&lt;phase&gt;</span>compile<span style=color:#000>&lt;/phase&gt;</span>
</span></span><span style=display:flex><span>                  <span style=color:#000>&lt;goals&gt;</span>
</span></span><span style=display:flex><span>                      <span style=color:#000>&lt;goal&gt;</span>version-checker<span style=color:#000>&lt;/goal&gt;</span>
</span></span><span style=display:flex><span>                  <span style=color:#000>&lt;/goals&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#000>&lt;/execution&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;/executions&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;/build&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;pluginRepositories&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;pluginRepository&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000>&lt;id&gt;</span>mbk_mvn_repo<span style=color:#000>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000>&lt;name&gt;</span>mbk_mvn_repo<span style=color:#000>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000>&lt;url&gt;</span>https://raw.githubusercontent.com/mbknor/mbknor.github.com/master/m2repo/releases<span style=color:#000>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;/pluginRepository&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;/pluginRepositories&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#000>&lt;/project&gt;</span>
</span></span></code></pre></div><p>Running <code>mvn clean verify</code> will execute the Maven Enforcer Plug-in <code>enforce</code> goal, which will call the deptools check. As you may have noticed, you also need to download the plug-in from GitHub, as it is not released to Maven Central.</p><p>I do not use it for this reason, and also because I normally spend some time looking at the dependency tree anyway, but every now and then when I work on a new project I like quickly running it just to see what are the dependencies that are being shadowed by older versions.</p><h3 id=revelcimpsort-maven-plugin>revelc/impsort-maven-plugin</h3><p>I only found about this plug-in in the last <a href=https://blogs.apache.org/foundation/entry/the-apache-news-round-up31>Apache News Round-up</a>. Where it was mentioned that <a href=https://github.com/apache/accumulo/blob/401411619239e301ad14216b3b9c88ee947ab072/pom.xml#L999>Apache Accumulo uses</a> this plug-in to standarize the order of imports in code.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#000>&lt;project&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;build&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;groupId&gt;</span>net.revelc.code<span style=color:#000>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;artifactId&gt;</span>impsort-maven-plugin<span style=color:#000>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;version&gt;</span>1.0.0<span style=color:#000>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;groups&gt;</span>java.,javax.,org.,com.<span style=color:#000>&lt;/groups&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;staticGroups&gt;</span>java,*<span style=color:#000>&lt;/staticGroups&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;excludes&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>&lt;exclude&gt;</span>**/thrift/*.java<span style=color:#000>&lt;/exclude&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;/excludes&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;executions&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;execution&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>&lt;id&gt;</span>sort-imports<span style=color:#000>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>&lt;goals&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#000>&lt;goal&gt;</span>sort<span style=color:#000>&lt;/goal&gt;</span><span style=color:#177500>&lt;!-- runs at process-sources phase by default --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>&lt;/goals&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>&lt;/execution&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>&lt;/executions&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;/build&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#000>&lt;/project&gt;</span>
</span></span></code></pre></div><p>I am neutral on imports order, though in cases where you have several contributors submitting pull requests, it can probably be useful to reduce the number of interactions. In other words, if a user submits a pull request and you have an automated check, then the user would be automatically notified about changes that s/he needs to do in order for his pull request to be accepted.</p><h3 id=conclusion>Conclusion</h3><p>I am not using any of these two plug-ins, but wanted to save it somewhere in case I needed to use them in the future, and also to share with others. Besides most common plug-ins (PMD, CheckStyle, FindBugs), I normally use at least some Maven Enforcer Plug-in rules, and the <a href=https://www.owasp.org/index.php/OWASP_Dependency_Check>OWASP plug-in</a>.</p><p>While most of the time we spend writing code, preparing the infrastructure, and deploying and testing, I got bitten by some maven build bugs a few times, and had to spend days/weeks debugging some of these. So hope some of these posts save some hours of someone out there in a similar situation.</p><p>♥ Open Source</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/java.html>Java</a>,
<a href=/tags/programming.html>Programming</a>,
<a href=/tags/opensource.html>Opensource</a>,
<a href=/tags/maven.html>Maven</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2017/08/06/checking-for-transitive-dependencies-use-with-maven-enforcer-plug-in.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2017/09/01/finding-base64-implementations-in-apache-software-foundation-projects.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>