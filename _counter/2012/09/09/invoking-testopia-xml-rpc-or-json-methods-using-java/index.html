  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <title>Bruno P. Kinoshita &mdash; Invoking Testopia XML-RPC or JSON methods using Java</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="Bruno de Paula Kinoshita personal web site" />
    <meta name="keywords"
        content="kinoshita, bruno de paula kinoshita, geek, geek stuff, java, python, c, c++, msn now playing, neural network, mackenzie, sao paulo, brasil, brazil, nerd, nerd stuff, cool, jenkins, illustration, quadrinhos, machine learning, linguistic, apache, open source, codigo livre, codigo aberto" />
    <meta name="author" content="" />
    <meta name="generator" content="PieCrust 2.0.0b5" />
    <meta name="template-engine" content="Twig" />
    <meta name="robots" content="all=index,follow" />
    <meta name="revisit-after" content="15 days" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="distribution" content="Global" />
    <meta name="url" content="/" />
    <meta name="copyright" content="Bruno de Paula Kinoshita" />
    <meta name="Googlebot" content="all" />
    <meta name="rating" content="general" />
    <meta http-equiv="expires" content="0" />
    <meta name="city" content="Sao Paulo" />
    <meta name="state" content="Brasil, Sao Paulo" />
    <meta http-equiv="content-language" content="en" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta id="page_favicon" href="/favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="alternate" type="application/rss+xml" title="Bruno P. Kinoshita &raquo; Feed" href="//feed.xml" />
    <link rel="stylesheet" href="/css/semantic/dist/semantic.min.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    <link rel="stylesheet" href="/css/prettyPhoto.css" type="text/css" media="all" />
</head>
<body id="body">
    <div class="ui vertical sidebar menu" id="toc">
        <div class="menu">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/software.html">Software</a>
    </div>
    <div class="item">
        <a href="/articles.html">Articles</a>
    </div>
    <div class="item">
        <a href="/books.html">Books</a>
    </div>
    <div class="item">
        <a href="/about.html">About &#038; CV</a>
    </div>
    <div class="item">
        <a href="/contact.html">Contact</a>
    </div>
</div>
<img id="me" src="/img/bruno.jpg" title="Hmmmm" alt="Hmmmm" width="134px" height="215px" />
    </div>
    <div class="ui black big launch right attached fixed button">
        <i class="content icon"></i>
        <span class="text">Menu</span>
    </div>
    <div class="ui fixed inverted main menu">
        <div class="ui container">
            <a class="launch icon item">
                <i class="content icon"></i>
            </a>
            <div class="item">
                Invoking Testopia XML-RPC or JSON methods using Java
            </div>
        </div>
    </div>
    <div class="pusher">
        <div class="full height">
            <div class="toc">
                <div class="ui vertical sticky fixed top menu">
                    <div class="menu">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/software.html">Software</a>
    </div>
    <div class="item">
        <a href="/articles.html">Articles</a>
    </div>
    <div class="item">
        <a href="/books.html">Books</a>
    </div>
    <div class="item">
        <a href="/about.html">About &#038; CV</a>
    </div>
    <div class="item">
        <a href="/contact.html">Contact</a>
    </div>
</div>
<img id="me" src="/img/bruno.jpg" title="Hmmmm" alt="Hmmmm" width="134px" height="215px" />
                </div>
            </div>
            <div class="article">
                <div class="main container">

                
<div class="ui raised padded text container segment">
    <h1 class='post-topic'>Invoking Testopia XML-RPC or JSON methods using Java</h1>
    <small></small> @
	<small>Sep 09, 2012&nbsp;16:08:09</small>
    <div class="entry">
       





<a href="https://twitter.com/share" class="twitter-share-button" data-url="/2012/09/09/invoking-testopia-xml-rpc-or-json-methods-using-java" data-text="Invoking Testopia XML-RPC or JSON methods using Java" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

	   <p>Most <a href="http://www.teamst.org" title="TestLink">TestLink</a> [1] users are aware that there is an external API, maybe for the external API token being displayed in the user profile section. Today after a meeting with <a href="http://twitter.com/peterflorijn" title="Peter Florijn">Peter Florijn</a> [2], I realized that the same may not be true for <a href="http://www.mozilla.org/projects/testopia/" title="Testopia">Testopia</a>  [3] users.</p>

<p>I am quite new to Testopia, and there are many features that I haven&#8217;t used yet. But if I understand it correctly, the database is interfaced by several Perl scripts that are, by its turns, exposed as Web Service (most of them). The web services are available via a JSON and a XML-RPC API (what is very useful, TestLink supports supports only XML-RPC).</p>

<p>The communication between different programming languages and the external API&#8217;s is accomplished by a client API. In TestLink you have <a href="http://testlinkjavaapi.sourceforge.net/" title="TestLink Java API">testlink-java-api</a> [4] and <a href="http://code.google.com/p/testlink-api-java-client/" title="TestLink API Java Client">testlink-api-java-client</a> [5].</p>

<p>Testopia has a Java client too, available in <a href="http://bzr.mozilla.org/bugzilla/extensions/testopia/2.2-bugzilla-3.2/files/head:/testopia/contrib/drivers/java/" title="Testopia source repository">Testopia source repository</a> [6] and can be used to integrate your existing Java code with Testopia.</p>

<!--more-->

<p style="text-align: center;"><a href="/2012/09/09/invoking-testopia-xml-rpc-or-json-methods-using-java/testopia_java_300_120.png"><img src="/2012/09/09/invoking-testopia-xml-rpc-or-json-methods-using-java/testopia_java_300_120.png" alt="" title="testopia_java" width="300" height="120" class="aligncenter size-medium wp-image-986" /></a></p>

<p>Peter and I have been working on <a href="https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin" title="Jenkins Testopia Plug-in">Jenkins Testopia Plug-in</a> [7], released few weeks ago and with its new version being released at this very moment. It&#8217;s been fun to write this new plug-in, and we are using a type of Scrum to manage the project, what makes it even more interesting.</p>

<p>During the project feature definition and initial structure, we created a new implementation, motivated by the following reasons (in no special order):</p>

<ul>
<li>Provide an API for Maven developers</li>
<li>Publish this new API to Maven central repository (so Gradle, Ivy and Maven users could use it too)</li>
<li>Use a non DDD (Domain Driven Design) approach, as it helps debugging serialization issues in Jenkins (only one element talks to Testopia. So we put this element in Jenkins master, and don&#8217;t have to worry about calls to objects methods serialized to slaves)</li>
<li>Test doubles, so we could increase test coverage without the need of a Testopia instance running</li>
</ul>

<p>We haven&#8217;t released this API to Maven central yet, as we still have to polish the code, add tests and more methods. But you can already start playing with this API, the code is at GitHub, <a href="http://www.github.com/kinow/testopia-java-driver" title="Testopia Java Driver">http://www.github.com/kinow/testopia-java-driver</a> [8], and here&#8217;s a Snippet of code to get you started with the API.</p>

<div class="highlight"><pre><span class="n">TestopiaAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">&quot;http://localhost/bugzilla-4.2.1/xmlrpc.cgi&quot;</span><span class="o">);</span>
<span class="n">api</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="s">&quot;root&quot;</span><span class="o">,</span> <span class="s">&quot;pass&quot;</span><span class="o">);</span>
<span class="n">TestRun</span> <span class="n">testCaseRun</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">getTestRun</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="n">TestCase</span><span class="o">[]</span> <span class="n">testCases</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">getTestCases</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getTestRunId</span><span class="o">());</span>
<span class="k">for</span><span class="o">(</span><span class="n">TestCase</span> <span class="n">testCase</span> <span class="o">:</span> <span class="n">testCases</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Status</span> <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="na">BLOCKED</span><span class="o">;</span>
  <span class="n">testCase</span><span class="o">.</span><span class="na">setStatusId</span><span class="o">(</span><span class="n">status</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
  <span class="n">api</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">testCase</span><span class="o">,</span> <span class="n">testCase</span><span class="o">.</span><span class="na">getRunId</span><span class="o">(),</span> <span class="n">testCase</span><span class="o">.</span><span class="na">getBuildId</span><span class="o">(),</span> <span class="n">testCase</span><span class="o">.</span><span class="na">getEnvId</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>

<p>Have fun!</p>

<ul>
<li>[1] http://www.teamst.org</li>
<li>[2] http://twitter.com/peterflorijn</li>
<li>[3] http://www.mozilla.org/projects/testopia/</li>
<li>[4] http://testlinkjavaapi.sourceforge.net/</li>
<li>[5] http://code.google.com/p/testlink-api-java-client/</li>
<li>[6] http://bzr.mozilla.org/bugzilla/extensions/testopia/2.2-bugzilla-3.2/files/head:/testopia/contrib/drivers/java/</li>
<li>[7] https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin</li>
<li>[8] http://www.github.com/kinow/testopia-java-driver</li>
</ul>
    </div>
    <p class="postmetadata">
        
        <small>tags 
         [&nbsp;<a
            href="/tag/java"
            rel="tag">java</a>&nbsp;]&nbsp;
        
        </small>
        
        
        <br/>
        <small>posted in 
        [&nbsp;<a
            href="/blog"
            title="View all posts in blog"
            rel="category tag">blog</a>&nbsp;]&nbsp;
        category </small>
        
    </p>
    <div id="navigation">
        
            &larr;&nbsp;<a href="//2012/09/14/integrating-nutch-2-x-mysql-and-solr" id="navigation-next">Previous post</a>
        
        
            &mdash; <a href="//2012/08/08/how-i-started-in-open-source" id="navigation-next">Next Entries</a>&nbsp;&rarr;
        
    </div>
</div>

                </div>
            </div>
        </div>
        <div class="ui vertical footer segment">
            <div class="ui center aligned container">
                           <div id="copy" class="">
                <p>&copy; <a href="/about"><span
                            class="b">Bru</span><span
                            class="r">no de</span> <span
                            class="a">Paula</span> <span
                            class="s"></span><span
                            class="i">Kinos</span><span
                            class="l">hita</span></a>
                </p>
            </div>
            </div>
         </div>
    </div>
</body>
</html>
<script src="/js/jquery-2.2.3.min.js"  type="text/javascript"></script>
    <script src="/css/semantic/dist/semantic.min.js"  type="text/javascript"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto({
        social_tools: false,
        autoplay_slideshow: false, 
        hideflash: true, 
        autoplay: false, 
        overlay_gallery: false
    });

    $("#toc")
        .sidebar({
          dimPage          : true,
          transition       : 'overlay',
          mobileTransition : 'uncover'
        })
    ;

    $("#toc")
        .sidebar('attach events', '.launch.button, .view-ui, .launch.item')
    ;
  });
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32767310-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
