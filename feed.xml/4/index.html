<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
    xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel>
        <title>Bruno P. Kinoshita</title>
        <link>/</link>
        <atom:link href="/feed.xml/4" rel="self" type="application/rss+xml" />
        
        <description>Latest news from Bruno P. Kinoshita</description>
        
        <lastBuildDate>2018-06-14T23:25:20+12:00</lastBuildDate>
        <pubDate>2018-06-14T23:25:20+12:00</pubDate>
        <generator>PieCrust 2.1.1</generator>
        
        
        

        
        
        
        <item>
            <title>Fixing Qt warning "QLayout: Attempting to add QLayout "" to QWidget "", which already has a layout"</title>
            <link>/2017/04/02/fixing-qt-warning-qlayout-attempting-to-add-qlayout-to-qwidget-which-already-has-a-layout</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>c++</category>
            
            <category>krita</category>
            
            <category>programming</category>
            
            <category>opensource</category>
            
            <pubDate>2017-04-02T12:01:03+12:00</pubDate>
            <guid>/2017/04/02/fixing-qt-warning-qlayout-attempting-to-add-qlayout-to-qwidget-which-already-has-a-layout</guid>
            <description>
            
            &lt;p&gt;If you ever started Krita 3.x in your command line, and had a look at the console output,
you may noticed the following warning.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;QLayout: Attempting to add QLayout &amp;#8220;&amp;#8221; to QWidget &amp;#8220;&amp;#8221;, which already has a layout&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Krita recently &lt;a href=&#34;https://krita.org/en/item/krita-3-1-3-alpha-released/&#34;&gt;announced the release of 3.1.3-alpha-2&lt;/a&gt;,
and while testing I saw this warning and
decided to investigate why this warning happens.&lt;/p&gt;
&lt;p&gt;There was already
&lt;a href=&#34;http://stackoverflow.com/a/25451334&#34;&gt;a similar question posted on StackOverflow&lt;/a&gt;. And the
best answer&amp;#8217;s initial paragraph gave me a hint of what to look for.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When you assign a widget as the parent of a QLayout by passing it into the constructor, the layout is automatically set as the layout for that widget. In your code you are not only doing this, but explicitly calling setlayout(). This is no problem when when the widget passed is the same. If they are different you will get an error because Qt tries to assign the second layout to your widget which has already had a layout set.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, somewhere in Krita code, there was a a QWidget being created, and layouts
were being added to it more than once. To find where the issue was happening was quite easy. A breakpoint at
&lt;a href=&#34;https://github.com/KDE/krita/blob/9e2b8c5b07deccd4a616ad7930a91e8cc784a85b/krita/main.cc#L141&#34;&gt;main.cc&lt;/a&gt;
where the application is initialized, then step through a few times, until the message appeared in the
console.&lt;/p&gt;
&lt;p&gt;Further investigation led me to the History docker (the one that shows undo steps)
&lt;a href=&#34;https://github.com/KDE/krita/blob/9e2b8c5b07deccd4a616ad7930a91e8cc784a85b/plugins/dockers/historydocker/HistoryDock.cpp#L33&#34;&gt;constructor&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;    &lt;span class=&#34;n&#34;&gt;QVBoxLayout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QVBoxLayout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// layout being set to page&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;m_undoView&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;KisUndoView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;vl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addWidget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m_undoView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;QHBoxLayout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QHBoxLayout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// layout being set to page again&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addSpacerItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QSpacerItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;QSizePolicy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Expanding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QSizePolicy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Fixed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QToolButton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setIcon&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;KisIconUtils&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loadIcon&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;configure&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SIGNAL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clicked&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SLOT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addWidget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;vl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;setWidget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;setWindowTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i18n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Undo History&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here the QWidget created receives both QHBoxLayout and QVBoxLayout. Again, searching the Internet
a little bit, then came across this post with a good example of a QWidget with
QHBoxLayout and QVBoxLayout. Here&amp;#8217;s what the constructor looks after the
&lt;a href=&#34;https://bugs.kde.org/show_bug.cgi?id=378313&#34;&gt;patch&lt;/a&gt;
has been &lt;a href=&#34;https://github.com/KDE/krita/commit/1d2343c0cacfb0b105fbe86c2bcef975a09b1041&#34;&gt;applied&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;    &lt;span class=&#34;n&#34;&gt;QVBoxLayout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QVBoxLayout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// layout being set to page&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;m_undoView&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;KisUndoView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;vl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addWidget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m_undoView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;QHBoxLayout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QHBoxLayout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addSpacerItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QSpacerItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;QSizePolicy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Expanding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QSizePolicy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Fixed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;QToolButton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setIcon&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;KisIconUtils&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loadIcon&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;configure&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SIGNAL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clicked&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SLOT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addWidget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m_bnConfigure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;vl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;vl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addLayout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// horizontal layout added to the vertical layout&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;setWidget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;setWindowTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i18n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Undo History&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;That&amp;#8217;s it. Learned something new in Qt. Not as important and useful as learning about
&lt;a href=&#34;http://doc.qt.io/qt-4.8/signalsandslots.html&#34;&gt;signals and slots&lt;/a&gt;, but now I can focus
on other warnings in the console output of Krita.&lt;/p&gt;
&lt;p&gt;And you? Have you tested &lt;a href=&#34;https://krita.org/en/item/krita-3-1-3-alpha-released/&#34;&gt;Krita 3.1.3 alpha&lt;/a&gt; already?
What are you waiting for? :-)&lt;/p&gt;
&lt;p&gt;&amp;hearts; Open Source&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Simulating less memory with ulimit</title>
            <link>/2017/03/26/simulating-less-memory-with-ulimit</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>c++</category>
            
            <category>krita</category>
            
            <category>programming</category>
            
            <category>opensource</category>
            
            <pubDate>2017-03-26T11:14:03+13:00</pubDate>
            <guid>/2017/03/26/simulating-less-memory-with-ulimit</guid>
            <description>
            
            &lt;p&gt;These days I was trying to reproduce &lt;a href=&#34;https://bugs.kde.org/show_bug.cgi?id=376382&#34;&gt;a bug in Krita&lt;/a&gt;
where it would crash when a user copied group layers between windows. It appeared that the user was
getting a segmentation fault due to the user&amp;#8217;s computer running out of memory.&lt;/p&gt;
&lt;p&gt;I could not reproduce the issue, but my computer has 16 GB. The first thing that came to my mind was
to create a virtual machine with less memory to reproduce the issue. But I decided to spend some time
looking for a &lt;a href=&#34;http://wiki.c2.com/?LazinessImpatienceHubris&#34;&gt;simpler way&lt;/a&gt; of doing it.&lt;/p&gt;
&lt;p&gt;Searching the web I found some suggestions that &lt;code&gt;ulimit&lt;/code&gt; could work. After playing for a while with
&lt;code&gt;ulimit&lt;/code&gt; and &lt;code&gt;htop&lt;/code&gt;, and verifying the amount of memory necessary to open two files in two windows
in Krita, I came up with the following settings.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# 2550 mb in kb&lt;/span&gt;
&lt;span class=&#34;nb&#34;&gt;ulimit&lt;/span&gt; -v 2550000

&lt;span class=&#34;c&#34;&gt;# 2 gb in kb&lt;/span&gt;
&lt;span class=&#34;nb&#34;&gt;ulimit&lt;/span&gt; -m 2000000

&lt;span class=&#34;c&#34;&gt;# Confirm limits&lt;/span&gt;
&lt;span class=&#34;nb&#34;&gt;ulimit&lt;/span&gt; -a

gdb &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/Development/cpp/workspace/krita_install/bin/krita
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then after copying a few layers from one window to another, I successfully reproduced the issue,
and could include a backtrace in the Krita issue tracking system.&lt;/p&gt;
&lt;p&gt;&amp;hearts; Open Source&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Using Google Natural Language API in an AWS Elastic Beanstalk application</title>
            <link>/2017/03/15/using-google-natural-language-api-in-aws-elastic-beanstalk-application</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>aws</category>
            
            <category>natural language processing</category>
            
            <category>google-cloud</category>
            
            <pubDate>2017-03-15T13:18:03+13:00</pubDate>
            <guid>/2017/03/15/using-google-natural-language-api-in-aws-elastic-beanstalk-application</guid>
            <description>
            
            &lt;p&gt;Besides providing an API for users and developers, Google also provides a series of
(very well-written) client implementation, in several programming languages. That&amp;#8217;s the
case for Google Storage, Google Vision, and for Google Natural Language API&amp;#8217;s.&lt;/p&gt;
&lt;p&gt;I recently had to use the latter in a POC at work, and ran into an interesting issue with
our AWS Elastic Beanstalk environment.&lt;/p&gt;
&lt;p&gt;Google Language API requires that clients authenticate before sending requests. If you use their &lt;a href=&#34;https://github.com/GoogleCloudPlatform/google-cloud-java&#34;&gt;google-cloud-java&lt;/a&gt;, you can define the GOOGLE_APPLICATION_CREDENTIALS. This environment variable must point to a JSON file with the Google Language API credentials.&lt;/p&gt;
&lt;p&gt;The issue is that while Google Language API (or more precisely
&lt;a href=&#34;https://github.com/google/google-auth-library-java/blob/ae9735c576fd8593636e155ccb26e454576bc2cd/oauth2_http/java/com/google/auth/oauth2/DefaultCredentialsProvider.java#L124&#34;&gt;google-auth-library-java&lt;/a&gt;)
looks for an environment variable, in Elastic Beanstalk you are able to
specify only system properties (unless you want to try something with ebextensions,
maybe some JNI&amp;#8230;).&lt;/p&gt;
&lt;p&gt;A workaround for this issue in Google Natural Language API, is to create and pass a
&lt;a href=&#34;http://googlecloudplatform.github.io/google-cloud-java/0.8.0/apidocs/com/google/cloud/language/spi/v1/LanguageServiceSettings.html&#34;&gt;LanguageServiceSettings&lt;/a&gt;
to your &lt;a href=&#34;http://googlecloudplatform.github.io/google-cloud-java/0.8.0/apidocs/com/google/cloud/language/spi/v1/LanguageServiceClient.html&#34;&gt;LanguageServiceClient&lt;/a&gt;.
This settings object, when created, must be given a
&lt;a href=&#34;http://googleapis.github.io/gax-java/0.2.0/apidocs/com/google/api/gax/grpc/ChannelProvider.html&#34;&gt;channel provider&lt;/a&gt;
with a &lt;a href=&#34;http://googleapis.github.io/gax-java/0.2.0/apidocs/com/google/api/gax/core/FixedCredentialsProvider.html&#34;&gt;FixedCredentialsProvider&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Of course reading code is way easier than reading this workaround description.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c1&#34;&gt;// File: GoogleNaturalLanguageService.java&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// ...&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// envvar or property used to specify the Google Application Credentials&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GOOGLE_APPLICATION_CREDENTIALS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;GOOGLE_APPLICATION_CREDENTIALS&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;cm&#34;&gt;/**&lt;/span&gt;
&lt;span class=&#34;cm&#34;&gt;     * Google Natural Language API.&lt;/span&gt;
&lt;span class=&#34;cm&#34;&gt;     */&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LanguageServiceClient&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;languageServiceClient&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;nd&#34;&gt;@PostConstruct&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Elastic Beanstalk supports Properties, not Environment Variables.&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Google credentials library will load&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// the JSON location for the service to authenticate from an envVar. So&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// we need to fix that here.&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;googleApplicationCredentials&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getenv&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GOOGLE_APPLICATION_CREDENTIALS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;LOGGER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;GOOGLE_APPLICATION_CREDENTIALS in environment variable: %s&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;googleApplicationCredentials&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StringUtils&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;isBlank&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;googleApplicationCredentials&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;googleApplicationCredentials&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getProperty&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GOOGLE_APPLICATION_CREDENTIALS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;LOGGER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;GOOGLE_APPLICATION_CREDENTIALS in JVM property: %s&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;googleApplicationCredentials&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;googleApplicationCredentials&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RuntimeException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Could not locate GOOGLE_APPLICATION_CREDENTIALS variable!&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LanguageServiceSettings&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;languageServiceSettings&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InputStream&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FileInputStream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;File&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;googleApplicationCredentials&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GoogleCredentials&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;myCredentials&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GoogleCredentials&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;fromStream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;createScoped&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;
                            &lt;span class=&#34;n&#34;&gt;Collections&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;singleton&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;https://www.googleapis.com/auth/cloud-platform&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CredentialsProvider&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;credentialsProvider&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FixedCredentialsProvider&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;create&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;myCredentials&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;

            &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InstantiatingChannelProvider&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;channelProvider&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LanguageServiceSettings&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;defaultChannelProviderBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;setCredentialsProvider&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;credentialsProvider&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;languageServiceSettings&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LanguageServiceSettings&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;defaultBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;setChannelProvider&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;channelProvider&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IOException&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ioe&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;LOGGER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;IO error creating Google NLP settings: %s&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ioe&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getMessage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ioe&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ioe&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Create Google API client&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;languageServiceClient&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LanguageServiceClient&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;create&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;languageServiceSettings&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nd&#34;&gt;@PreDestroy&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;destroy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOGGER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;isDebugEnabled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;LOGGER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Destroying Google NLP API client&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Close Google API executors and channels&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;languageServiceClient&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;That way you should be able to use the API with AWS Elastic Beanstalk
without having to hack your environment to provide the GOOGLE_APPLICATION_CREDENTIALS
environment variable.&lt;/p&gt;
&lt;p&gt;An alternative would be google-auth-library-java to look for an environment variable
&lt;em&gt;and&lt;/em&gt; a system property. Or maybe Amazon AWS add a way to provide environment variables.&lt;/p&gt;
&lt;p&gt;Note also that I included the @PostConstruct and @PreDestroy annotated methods. The
API will start an executor thread pool, so if you do not want to risk to have problems
re-deploying your application, then remember to close your streams.&lt;/p&gt;
&lt;p&gt;&amp;hearts; Open Source&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Order of containers in Docker Compose</title>
            <link>/2017/03/14/order-of-containers-in-docker-compose</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>docker</category>
            
            <pubDate>2017-03-14T21:22:03+13:00</pubDate>
            <guid>/2017/03/14/order-of-containers-in-docker-compose</guid>
            <description>
            
            &lt;p&gt;In Docker Compose you are able to control the startup order of the containers via
the &lt;em&gt;depends_on&lt;/em&gt; statement. This is documented in &lt;a href=&#34;https://docs.docker.com/compose/startup-order/&#34;&gt;Controlling startup order in Compose&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you have a simple setup, with Tomcat and Postgres, sometimes Postgres will start first, but Compose
will initialize Tomcat before Postgres has fully booted. When that happens, you may receive 401, 404, or other
application errors.&lt;/p&gt;
&lt;p&gt;You can fix it by combining &lt;em&gt;depends_on&lt;/em&gt; with a &lt;em&gt;healthcheck&lt;/em&gt;. For example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# File: docker-compose.yml&lt;/span&gt;
version: &lt;span class=&#34;s1&#34;&gt;&amp;#39;2.1&amp;#39;&lt;/span&gt;
services:
  db:
    container_name: twpg
    build:
      context: .
      dockerfile: Dockerfile.postgres
    restart: always
    ports:
      - &lt;span class=&#34;s2&#34;&gt;&amp;quot;5432:5432&amp;quot;&lt;/span&gt;
    healthcheck:
      &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;pg_isready -h localhost -p 5432 -q -U postgres&amp;quot;&lt;/span&gt;
      interval: 10s
      timeout: 5s
      retries: 5

  web:
    container_name: twtc
    build:
      context: .
      dockerfile: Dockerfile.tomcat
    restart: always
    depends_on:
      db:
        condition: service_healthy
    links:
      - db
    ports:
      - &lt;span class=&#34;s2&#34;&gt;&amp;quot;80:8080&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In the example docker-compose.yml, there are two containers, &lt;em&gt;db&lt;/em&gt; and &lt;em&gt;web&lt;/em&gt;. web is running
a Tomcat, and db is running Postgres. Web depends on db (see depends_on), and uses a condition
&lt;em&gt;service_healthy&lt;/em&gt;. Which indicates it depends that that container is healthy.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;healthcheck&lt;/em&gt; entry under the db container settings define how to check whether Postgres
is running or not. In this case, we are using &lt;em&gt;pg_isready&lt;/em&gt;, which is available in the
vanilla Postgres 9 container.&lt;/p&gt;
&lt;p&gt;It will try 5 times, with a 10 seconds interval, and will time out after 5 seconds. You may
have to tune these parameters for your application.&lt;/p&gt;
&lt;p&gt;This code snippet is from a
&lt;a href=&#34;https://github.com/Foxoncz/docker-thingworx/pull/3/files&#34;&gt;pull request submitted to Foxoncz/docker-thingworx&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&amp;hearts; Open Source&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Using AWS MFA without a mobile phone</title>
            <link>/2017/02/28/using-aws-mfa-without-a-mobile-phone</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>go</category>
            
            <category>aws</category>
            
            <category>security</category>
            
            <pubDate>2017-02-28T00:47:03+13:00</pubDate>
            <guid>/2017/02/28/using-aws-mfa-without-a-mobile-phone</guid>
            <description>
            
            &lt;p&gt;If you use AWS, the chances are that you use MFA - Multi-factor Authentication - to authenticate.
I don&amp;#8217;t like to install apps in my mobile phone, unless I need to, so having bought a new phone
recently, I decided to find a replacement for Google Authenticator.&lt;/p&gt;
&lt;p&gt;There are several command line utilities, browser extensions, libraries, and tools (free and paid)
that implement the TOTP - time-based one-time password -, the standard
&lt;a href=&#34;http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable_virtual.html&#34;&gt;required by Amazon&lt;/a&gt;
for MFA authentication.&lt;/p&gt;
&lt;p&gt;I decided to use a Go tool for the first time: &lt;a href=&#34;https://github.com/pcarrier/gauth&#34;&gt;gauth&lt;/a&gt;. Note that you
won&amp;#8217;t be able to use it from home, in case you don&amp;#8217;t bring your laptop home. You can have one MFA device
linked to your AWS account, so you may have to remove an existing one. Follow these instructions with care :^)&lt;/p&gt;
&lt;h2&gt;Install Go&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;sudo apt update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo apt upgrade -y
&lt;span class=&#34;nb&#34;&gt;cd &lt;/span&gt;tmp/ &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; wget https://storage.googleapis.com/golang/go1.8.linux-amd64.tar.gz
tar -zxvf go1.*.tar.gz
sudo mv go /usr/local
vim ~/.bashrc
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Add the following at the bottom of the file.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;GOROOT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/local/go
&lt;span class=&#34;nv&#34;&gt;GOPATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/go&amp;quot;&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;PATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$GOPATH&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/bin:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$GOROOT&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/bin:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And you can test it with &lt;code&gt;. ~/.bashrc &amp;amp;&amp;amp; go version&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Install gauth&lt;/h2&gt;
&lt;p&gt;Given your environment is correctly set up, you should be able to use the following command to install
gauth, and have it available in your &lt;em&gt;$PATH&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;go get github.com/pcarrier/gauth
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Edit &lt;em&gt;~/.config/gauth.csv&lt;/em&gt; adding a value for the AWS MFA key.&lt;/p&gt;
&lt;h2&gt;Getting the AWS MFA key&lt;/h2&gt;
&lt;p&gt;To get the value that you must place in your &lt;em&gt;gauth.csv&lt;/em&gt; file, you must add a new MFA device. When asked to scan a QR code, look for an option to enter the manual value. That will give you a long string. That&amp;#8217;s the value you are looking for.&lt;/p&gt;
&lt;h2&gt;Extra: Auto copy-paste from command line&lt;/h2&gt;
&lt;p&gt;If you would like to quickly copy and paste, try creating an alias as described
&lt;a href=&#34;https://gist.github.com/ehime/9fd8810442daf64686a34f885e18be01&#34;&gt;on this gist&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I used these instructions, and can now run one command line, that will put the next MFA code in my
clipboard. Then just paste into my browser, and that&amp;#8217;s that!&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/pcarrier/gauth&#34;&gt;gauth: replace Google Authenticator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable_virtual.html&#34;&gt;Enabling a Virtual Multi-factor Authentication (MFA) Device&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tecadmin.net/install-go-on-ubuntu/&#34;&gt;How to Install Go 1.7 on Ubuntu 16.04 &amp;amp; 14.04&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://garywoodfine.com/use-pbcopy-on-ubuntu/&#34;&gt;Use pbcopy on Ubuntu&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Proposed logos for OpenNLP</title>
            <link>/2017/01/15/proposed-logos-for-opennlp</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>illustrations</category>
            
            <category>natural language processing</category>
            
            <pubDate>2017-01-15T20:42:03+13:00</pubDate>
            <guid>/2017/01/15/proposed-logos-for-opennlp</guid>
            <description>
            
            &lt;p&gt;A couple of logos submitted to &lt;a href=&#34;https://issues.apache.org/jira/browse/OPENNLP-6&#34;&gt;OPENNLP-6&lt;/a&gt;. Made with Inkscape, fonts from Google Fonts.&lt;/p&gt;
&lt;div class=&#39;row&#39;&gt;
&lt;div class=&#34;ui fluid container&#34;&gt;
&lt;figure&gt;
&lt;a  href=&#34;/2017/01/15/proposed-logos-for-opennlp/OpenNLP-logos.svg.png&#34; rel=&#34;prettyPhoto&#34; class=&#34;thumbnail&#34; title=&#34;Proposed logos for OpenNLP&#34;&gt;
&lt;img style=&#34;height: 400px;&#34; class=&#34;ui image&#34; src=&#34;/2017/01/15/proposed-logos-for-opennlp/OpenNLP-logos.svg.png&#34; alt=&#34;Proposed logos for OpenNLP&#34; /&gt;
&lt;/a&gt;
&lt;figcaption&gt;Proposed logos for OpenNLP&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;For more, check out &lt;a href=&#34;http://kinow.deviantart.com/art/Proposed-logos-for-Apache-OpenNLP-657512914&#34;&gt;my DeviantArt page&lt;/a&gt;.&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Drawing Cave</title>
            <link>/2017/01/13/drawing-cave</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>illustrations</category>
            
            <pubDate>2017-01-13T02:11:03+13:00</pubDate>
            <guid>/2017/01/13/drawing-cave</guid>
            <description>
            
            &lt;div class=&#39;row&#39;&gt;
&lt;div class=&#34;ui fluid container&#34;&gt;
&lt;figure&gt;
&lt;a  href=&#34;/2017/01/13/drawing-cave/cave_by_kinow-daugn02.png&#34; rel=&#34;prettyPhoto&#34; class=&#34;thumbnail&#34; title=&#34;Cave&#34;&gt;
&lt;img style=&#34;height: 400px;&#34; class=&#34;ui image&#34; src=&#34;/2017/01/13/drawing-cave/cave_by_kinow-daugn02.png&#34; alt=&#34;Cave&#34; /&gt;
&lt;/a&gt;
&lt;figcaption&gt;Cave&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/div&gt;
&lt;/div&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Apache Commons Lang: Memoizer</title>
            <link>/2017/01/08/apache-commons-lang-memoizer</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>java</category>
            
            <category>programming</category>
            
            <category>apache software foundation</category>
            
            <pubDate>2017-01-08T18:34:03+13:00</pubDate>
            <guid>/2017/01/08/apache-commons-lang-memoizer</guid>
            <description>
            
            &lt;p&gt;The current release of &lt;a href=&#34;https://commons.apache.org/proper/commons-lang/&#34;&gt;Apache Commons Lang&lt;/a&gt;
is &lt;strong&gt;3.5&lt;/strong&gt;. The upcoming release, probably 3.6,
will include a new feature, added in a
&lt;a href=&#34;https://github.com/apache/commons-lang/pull/203&#34;&gt;pull request&lt;/a&gt;:
&lt;strong&gt;a Memoizer implementation&lt;/strong&gt;. Check out the ticket &lt;a href=&#34;https://issues.apache.org/jira/browse/LANG-740&#34;&gt;LANG-740&lt;/a&gt;
for more about the implementation being added to [lang].&lt;/p&gt;
&lt;p&gt;The book &lt;a href=&#34;http://jcip.net/&#34;&gt;Java Concurrency in Practice&lt;/a&gt; introduces readers to the Memoizer,
and has also a &lt;a href=&#34;http://jcip.net/listings/Memoizer.java&#34;&gt;public domain implementation available for download&lt;/a&gt;
(besides that, the book has also lots of other interesting topics!).&lt;/p&gt;
&lt;p&gt;In summary, Memoizer is a simple cache, that will store the result of
a computation. It receives a Computable object, responsible for doing something
that will be stored by the Memoizer. Here&amp;#8217;s a simple code to illustrate how that
will work in your Java code.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c1&#34;&gt;// Computation to be stored in the cache&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Computable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;getFormattedCurrentDate&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Computable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nd&#34;&gt;@Override&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;compute&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InterruptedException&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SimpleDateFormat&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Date&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;};&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Our memoizer&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Memoizer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dateCache&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Memoizer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getFormattedCurrentDate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// To illustrate its use&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// S -&amp;gt; Millisecond&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dateCache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;compute&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;HH:mm:ss:S Z dd/MM/YYYY&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Regardless of this sleep call, we get the same result every iteration&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1500&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InterruptedException&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;printStackTrace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The computable created (&lt;em&gt;getFormattedCurrentDate&lt;/em&gt;) will be called only once, and stored in
a map. The parameter passed in the &lt;em&gt;#compute()&lt;/em&gt; method will be used as key in the map.
So choose your parameter wisely :-) The output of the example will be similar to the following one.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In the example above I used a &lt;em&gt;for-loop&lt;/em&gt; to illustrate what will happen. Even though we call
the memoizer &lt;em&gt;#compute()&lt;/em&gt; method several times, followed by
&lt;em&gt;Thread#sleep()&lt;/em&gt;; only one result, the first to be computed, will be returned.&lt;/p&gt;
&lt;p&gt;So that&amp;#8217;s all for today. Hope you learned something about this new class, that must
be available in the next release of Apache Commons Lang.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;p&gt;ps: [lang] uses Java 7, so that is why we do not have a functional instead of the Comparable&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Apache Commons Text</title>
            <link>/2017/01/07/apache-commons-text</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>java</category>
            
            <category>programming</category>
            
            <category>apache software foundation</category>
            
            <pubDate>2017-01-07T20:39:03+13:00</pubDate>
            <guid>/2017/01/07/apache-commons-text</guid>
            <description>
            
            &lt;p&gt;There is a new component in Apache Commons: Apache Commons Text. The 1.0 release might be announced
in the next weeks. The current site is still in the &lt;a href=&#34;http://commons.apache.org/sandbox/commons-text/&#34;&gt;Commons Sandbox&lt;/a&gt;,
but it will change with the 1.0 release. The promotion from the sandbox
&lt;a href=&#34;http://markmail.org/message/dm7xwv5wc6z7wme3&#34;&gt;happened a few days ago&lt;/a&gt; in
the project mailing list.&lt;/p&gt;
&lt;p&gt;Here&amp;#8217;s the project description: &lt;strong&gt;Apache Commons Text is a library focused on algorithms working on strings&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;There was &lt;a href=&#34;http://markmail.org/message/3k7m2zrzboji333r&#34;&gt;a thread on the mailing list&lt;/a&gt;
some time ago (Oct/2014) when we first discussed the component idea. Since then
many people contributed porting code from
&lt;a href=&#34;http://commons.apache.org/proper/commons-lang/&#34;&gt;Apache Commons Lang&lt;/a&gt;,
&lt;a href=&#34;http://lucene.apache.org/&#34;&gt;Apache Lucene&lt;/a&gt;, donating code from existing projects, and with new ideas.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;It is important to be aware that certain parts of Apache Commons Lang are
being marked as deprecated, and will be removed in the future, after Apache Commons Text
1.0 is out&lt;/strong&gt;. For example: &lt;a href=&#34;https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html&#34;&gt;StringUtils&lt;/a&gt;,
and &lt;a href=&#34;https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/RandomStringUtils.html&#34;&gt;RandomStringUtils&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;That will happen probably in a 4.x release of Apache Commons Lang, if everything
goes well with Apache Commons Text :-)&lt;/p&gt;
&lt;p&gt;And there are already future features in
&lt;a href=&#34;https://github.com/apache/commons-text/branches/all&#34;&gt;branches too&lt;/a&gt;.
It was decided that these features
needed further work, so they will probably be included in next releases.&lt;/p&gt;
&lt;p&gt;So that&amp;#8217;s a little bit of background on the new component that will be released soon.
If you have code using Apache Commons Lang, you might be interested in staying
tuned to release announcements in the mailing list!&lt;/p&gt;
&lt;p&gt;And should you have suggestions and would like to contribute, feel free to join and start
a thread in the &lt;a href=&#34;https://commons.apache.org/mail-lists.html&#34;&gt;mailing list&lt;/a&gt;,
open a &lt;a href=&#34;https://issues.apache.org/jira/browse/TEXT&#34;&gt;JIRA issue&lt;/a&gt;, or submit a
&lt;a href=&#34;https://github.com/apache/commons-text/pulls&#34;&gt;pull request&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Plotting Auckland with OSMnx</title>
            <link>/2017/01/05/plotting-auckland-with-osmnx</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            <category>blog</category>
            
            <category>gis</category>
            
            <pubDate>2017-01-05T10:39:03+13:00</pubDate>
            <guid>/2017/01/05/plotting-auckland-with-osmnx</guid>
            <description>
            
            &lt;div class=&#39;row&#39;&gt;
&lt;div class=&#34;ui fluid container&#34;&gt;
&lt;figure&gt;
&lt;a  href=&#34;/2017/01/05/plotting-auckland-with-osmnx/figure_1.png&#34; rel=&#34;prettyPhoto&#34; class=&#34;thumbnail&#34; title=&#34;Auckland&#34;&gt;
&lt;img style=&#34;height: 400px;&#34; class=&#34;ui image&#34; src=&#34;/2017/01/05/plotting-auckland-with-osmnx/figure_1.png&#34; alt=&#34;Auckland&#34; /&gt;
&lt;/a&gt;
&lt;figcaption&gt;Auckland&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;A couple of days ago I saw &lt;a href=&#34;https://www.reddit.com/r/gis/comments/5lnjxs/creating_squaremile_figureground_diagrams_of/&#34;&gt;a thread in reddit&lt;/a&gt;
about OSMnx. It is a utilty for interacting with the OpenStreeMap (OSM)
API, manipulate it in pure Python and using libraries like NetworkX (a Python graph package).&lt;/p&gt;
&lt;p&gt;With it you can do things like &lt;q&gt;visualize cul-de-sacs or one-way streets, plot shortest-path routes, or calculate stats like intersection density, average node connectivity, or betweenness centrality&lt;/q&gt;. Or simply
plot the OSM data as in the graph above.&lt;/p&gt;
&lt;p&gt;The source code is hosted at GitHub: &lt;a href=&#34;https://github.com/gboeing/osmnx&#34;&gt;https://github.com/gboeing/osmnx&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote cite=&#34;https://github.com/gboeing/osmnx&#34;&gt;OSMnx is a Python 2+3 package that lets you download spatial geometries and construct, project, visualize, and analyze street networks from OpenStreetMap&amp;#8217;s APIs. Users can download and construct walkable, drivable, or bikable urban networks with a single line of Python code, and then easily analyze and visualize them.&lt;/blockquote&gt;

&lt;p&gt;The only issue I found while creating the map for Auckland using the example from the project
README, was that the script would exit with the following error: &lt;strong&gt;&amp;#8220;ValueError: Geometry must be a shapely Polygon or MultiPolygon&amp;#8221;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;After looking at the list of dependencies and finding that everything seemed to be OK,
I started looking at the project issues. And thankfully someone else had found the
&lt;a href=&#34;https://github.com/gboeing/osmnx/issues/16&#34;&gt;same issue&lt;/a&gt;
and the maintainer of the project answered how to fix it.&lt;/p&gt;
&lt;p&gt;The issue was that the OSM API returns two &lt;a href=&#34;https://nominatim.openstreetmap.org/search?format=json&amp;amp;limit=10&amp;amp;dedupe=0&amp;amp;polygon_geojson=1&amp;amp;q=Auckland,%20New%20Zealand&#34;&gt;entries for Auckland&lt;/a&gt;
, where the first one is a Point, and the
second is the one that we want (a Polygon). The application defaults to using the first element,
so in order to change it you have to give a &lt;em&gt;which_result&lt;/em&gt; argument.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;#!/usr/bin/env python3&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;osmnx&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;ox&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;graph_from_place&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;Auckland, NZ&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;network_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;drive&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;which_result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;ox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plot_graph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;project_graph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And after that, and after waiting a few minutes, you should get your map :-)&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
            
            </description>
        </item>
        

    </channel>
</rss>