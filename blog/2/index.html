  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <title>Bruno P. Kinoshita</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="Bruno de Paula Kinoshita personal web site" />
    <meta name="keywords"
        content="kinoshita, bruno de paula kinoshita, geek, geek stuff, java, python, c, c++, msn now playing, neural network, mackenzie, sao paulo, brasil, brazil, nerd, nerd stuff, cool, jenkins, illustration, quadrinhos, machine learning, linguistic, apache, open source, codigo livre, codigo aberto" />
    <meta name="author" content="" />
    <meta name="generator" content="PieCrust 2.0.0rc2" />
    <meta name="template-engine" content="Twig" />
    <meta name="robots" content="all=index,follow" />
    <meta name="revisit-after" content="15 days" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="distribution" content="Global" />
    <meta name="url" content="/" />
    <meta name="copyright" content="Bruno de Paula Kinoshita" />
    <meta name="Googlebot" content="all" />
    <meta name="rating" content="general" />
    <meta http-equiv="expires" content="0" />
    <meta name="city" content="Sao Paulo" />
    <meta name="state" content="Brasil, Sao Paulo" />
    <meta http-equiv="content-language" content="en" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta id="page_favicon" href="/favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="alternate" type="application/rss+xml" title="Bruno P. Kinoshita &raquo; Feed" href="/feed.xml" />
    <link rel="stylesheet" href="/css/semantic/dist/semantic.min.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    <link rel="stylesheet" href="/css/prettyPhoto.css" type="text/css" media="all" />
</head>
<body id="body">
    <div class="ui vertical sidebar menu" id="toc">
        <div class="menu">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
</div>
<img id="me" src="/img/bruno.jpg" title="Hmmmm" alt="Hmmmm" width="134px" height="215px" />
    </div>
    <div class="ui black big launch right attached fixed button">
        <i class="content icon"></i>
        <span class="text">Menu</span>
    </div>
    <div class="ui fixed inverted main menu">
        <div class="ui container">
            <a class="launch icon item">
                <i class="content icon"></i>
            </a>
            <div class="item">
                None
            </div>
        </div>
    </div>
    <div class="pusher">
        <div class="full height">
            <div class="toc">
                <div class="ui vertical sticky fixed top menu">
                    <div class="menu">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
</div>
<img id="me" src="/img/bruno.jpg" title="Hmmmm" alt="Hmmmm" width="134px" height="215px" />
                </div>
            </div>
            <div class="article">
                <div class="main container">

                
                    
                    <div class='ui padded container'>
                        <h1 class='topic'>Blog</h1>
                    </div>
                    
                    <p>Posts in category &#8216;blog&#8217;</p>
<div class="ui raised padded container segment">
    <h2>Plotting Auckland with OSMnx</h2>
    <p><small>kinow</small> @ <small>Jan 05, 2017&nbsp;10:39:03</small></p>







<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://kinoshita.eti.br/2017/01/05/plotting-auckland-with-osmnx" data-text="Plotting Auckland with OSMnx" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    <div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/01/05/plotting-auckland-with-osmnx/figure_1.png" rel="prettyPhoto" class="thumbnail" title="Auckland">
<img style="height: 400px;" class="ui image" src="/2017/01/05/plotting-auckland-with-osmnx/figure_1.png" alt="Auckland" />
</a>
<figcaption>Auckland</figcaption>
</figure>
</div>
</div>

<p>A couple of days ago I saw <a href="https://www.reddit.com/r/gis/comments/5lnjxs/creating_squaremile_figureground_diagrams_of/">a thread in reddit</a>
about OSMnx. It is a utilty for interacting with the OpenStreeMap (OSM)
API, manipulate it in pure Python and using libraries like NetworkX (a Python graph package).</p>
<p>With it you can do things like <q>visualize cul-de-sacs or one-way streets, plot shortest-path routes, or calculate stats like intersection density, average node connectivity, or betweenness centrality</q>. Or simply
plot the OSM data as in the graph above.</p>
<p>The source code is hosted at GitHub: <a href="https://github.com/gboeing/osmnx">https://github.com/gboeing/osmnx</a>.</p>
<blockquote cite="https://github.com/gboeing/osmnx">OSMnx is a Python 2+3 package that lets you download spatial geometries and construct, project, visualize, and analyze street networks from OpenStreetMap&#8217;s APIs. Users can download and construct walkable, drivable, or bikable urban networks with a single line of Python code, and then easily analyze and visualize them.</blockquote>

<p>The only issue I found while creating the map for Auckland using the example from the project
README, was that the script would exit with the following error: <strong>&#8220;ValueError: Geometry must be a shapely Polygon or MultiPolygon&#8221;</strong>.</p>
<p>After looking at the list of dependencies and finding that everything seemed to be OK,
I started looking at the project issues. And thankfully someone else had found the
<a href="https://github.com/gboeing/osmnx/issues/16">same issue</a>
and the maintainer of the project answered how to fix it.</p>
<p>The issue was that the OSM API returns two <a href="https://nominatim.openstreetmap.org/search?format=json&amp;limit=10&amp;dedupe=0&amp;polygon_geojson=1&amp;q=Auckland,%20New%20Zealand">entries for Auckland</a>
, where the first one is a Point, and the
second is the one that we want (a Polygon). The application defaults to using the first element,
so in order to change it you have to give a <em>which_result</em> argument.</p>
<div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">osmnx</span> <span class="kn">as</span> <span class="nn">ox</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_place</span><span class="p">(</span><span class="s">&#39;Auckland, NZ&#39;</span><span class="p">,</span> <span class="n">network_type</span><span class="o">=</span><span class="s">&#39;drive&#39;</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span><span class="n">ox</span><span class="o">.</span><span class="n">project_graph</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
</pre></div>

<p>And after that, and after waiting a few minutes, you should get your map :-)</p>

<p>Happy hacking!</p>

<!-- html -->

<pre><code>&lt;p class="postmetadata"&gt;

    &lt;small&gt;tags 
     [&amp;nbsp;&lt;a
        href="/tag/gis"
        rel="tag"&gt;gis&lt;/a&gt;&amp;nbsp;]&amp;nbsp;

    &lt;/small&gt;


    &lt;br/&gt;
    &lt;small&gt;posted in 
    [&amp;nbsp;&lt;a
        href="/blog"
        title="View all posts in blog"
        rel="category tag"&gt;blog&lt;/a&gt;&amp;nbsp;]&amp;nbsp;
    category &lt;/small&gt;

&lt;/p&gt;
</code></pre>
</div>

<div class="ui raised padded container segment">
    <h2>Drawing Terra Celta vocal Elcio</h2>
    <p><small>kinow</small> @ <small>Jan 04, 2017&nbsp;19:40:03</small></p>







<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://kinoshita.eti.br/2017/01/04/drawing-terra-celta-vocal-elcio" data-text="Drawing Terra Celta vocal Elcio" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    <p><a href="http://www.terracelta.com.br/">Terra Celta band</a>&#8216;s vocal, Elcio.</p>
<p>Brazil is not only Samba, there is (good) celtic music in there too :-)</p>
<blockquote cite="https://en.wikipedia.org/wiki/Terra_Celta">Terra Celta (&#8220;Celtic Land&#8221;) is a Brazilian Celtic comedy rock band formed in 2005, and based in Londrina, Paran&aacute;. They are noted for making Celtic rock in Portuguese language (initially English), with often humorous lyrics. The group performs live with traditional Celtic/Irish clothing. Besides performing Irish music, the members also research the subject, by attending Celtic music festivals in Europe.</blockquote>

<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/01/04/drawing-terra-celta-vocal-elcio/terra-celta-elcio.png" rel="prettyPhoto" class="thumbnail" title="Terra Celta vocal Elcio">
<img style="height: 400px;" class="ui image" src="/2017/01/04/drawing-terra-celta-vocal-elcio/terra-celta-elcio.png" alt="Terra Celta vocal Elcio" />
</a>
<figcaption>Terra Celta vocal Elcio</figcaption>
</figure>
</div>
</div>

<p><a href="http://kinow.deviantart.com/art/Terra-Celta-s-vocal-Elcio-655240481">http://kinow.deviantart.com/art/Terra-Celta-s-vocal-Elcio-655240481</a></p>
<iframe id="player" type="text/html" width="640" height="390"
  src="http://www.youtube.com/embed/EOMEAzUBftA?enablejsapi=1&origin=http://kinoshita.eti.br"
  frameborder="0"></iframe><!-- html -->

    <p class="postmetadata">

        <small>tags 
         [&nbsp;<a
            href="/tag/illustrations"
            rel="tag">illustrations</a>&nbsp;]&nbsp;

        </small>


        <br/>
        <small>posted in 
        [&nbsp;<a
            href="/blog"
            title="View all posts in blog"
            rel="category tag">blog</a>&nbsp;]&nbsp;
        category </small>

    </p>
</div>

<div class="ui raised padded container segment">
    <h2>Contributing to Krita</h2>
    <p><small>kinow</small> @ <small>Jan 03, 2017&nbsp;11:40:03</small></p>







<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://kinoshita.eti.br/2017/01/03/contributing-to-krita" data-text="Contributing to Krita" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    <p>As I mentioned in the <a href="/2017/01/02/debugging-an-application-that-freezes-the-x-server">last post</a>, I have been learning Qt and using C and C++ again.
Since I used C and C++ more during university (about 10 years ago, phew), decided
to read real code.</p>
<p>I used Photoshop, Illustrator, and Fireworks a lot when I was younger and had more
time to spend drawing. But some time ago I switched to Inkscape for vector graphics,
which I use at work for presentations. So it was only natural to try Krita now.</p>
<p>Since I was going to try Krita, I thought why not check out and build from source, and then
in case I found any bugs, contribute back? Or maybe from time to time triage issues,
find low hanging ones, and send a patch?</p>
<p>Well, turns out the Krita project has a great community, and it is super easy to send
contributions. So far I submitted three patches, some were included in 3.x releases.</p>
<ul>
<li><a href="https://bugs.kde.org/show_bug.cgi?id=366741">https://bugs.kde.org/show_bug.cgi?id=366741</a></li>
<li><a href="https://bugs.kde.org/show_bug.cgi?id=364208">https://bugs.kde.org/show_bug.cgi?id=364208</a></li>
<li><a href="https://bugs.kde.org/show_bug.cgi?id=374451">https://bugs.kde.org/show_bug.cgi?id=374451</a></li>
</ul>
<p>While the patches are rather small, they are suggestions on how to fix memory
segmentation faults, or strange behaviours in the interface. For these issues,
I had to learn more about Qt components, signals and emitting events, and,
of course, work with pointers, arrays, Qt data structures, etc. In other words,
lots of (geek) fun!</p>
<p>In other words, by contributing to Krita, I am not only helping the project
and giving a little back to the community, but also refreshing my memory on
C and C++, and slowly learning Qt - which is not very hard if you worked with
Swing/AWT, Delphi, Visual Basic, Gtk, etc.</p>
<p>What are you waiting to contribute to Krita? The developers that maintain the
project answer tickets and questions posted to <a href="https://reddit.com/r/krita">reddit</a>
in a good time, and are extremely easy to work with.</p>
<p>Read more <a href="http://www.davidrevoy.com/article193/guide-building-krita-on-linux-for-cats">here</a> how to build from source, and
<a href="https://krita.org/en/get-involved/developers/">here</a> on how to submit patches.</p>
<p>Happy hacking!</p><!-- html -->

    <p class="postmetadata">

        <small>tags 
         [&nbsp;<a
            href="/tag/c%2B%2B"
            rel="tag">c++</a>&nbsp;]&nbsp;

        </small>


        <br/>
        <small>posted in 
        [&nbsp;<a
            href="/blog"
            title="View all posts in blog"
            rel="category tag">blog</a>&nbsp;]&nbsp;
        category </small>

    </p>
</div>

<div class="ui raised padded container segment">
    <h2>Debugging an application that freezes the X server</h2>
    <p><small>kinow</small> @ <small>Jan 02, 2017&nbsp;00:39:03</small></p>







<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://kinoshita.eti.br/2017/01/02/debugging-an-application-that-freezes-the-x-server" data-text="Debugging an application that freezes the X server" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    <p>Some time ago, I decided to start writing C++ again, and picked Krita for that.
Krita is written in C++ and Qt. The <a href="https://bugs.kde.org/show_bug.cgi?id=366741">bug I was working on</a>
involved a memory issue when changing the UI.</p>
<p>The problem was that this UI change would result in, not only Krita, but the whole
X server freezing. My set up was basically Ubuntu 16.04.1 LTS, with Eclipse, Qt5,
and the latest version of Krita checked out via git.</p>
<p>Initially I spent some time looking at the logs, tracing the binary, even downloaded
some Qt utility tools to look at the events and what was happening with the application
when it froze.</p>
<p>However, eventually I realized I was going to spend more time on this part of the
issue, rather than on the memory bug. So decided to look for a work-around.</p>
<p>Thankfully someone else blogged about a similar issue and saved me a lot of time :-)
Here&#8217;s how I did it, following the instructions in
<a href="http://www.geany.org/manual/gtk/gtk-faq/x462.html">this blog post</a>.</p>
<div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install xnest -y
<span class="nv">$ </span><span class="nb">cd </span>krita_install/
<span class="nv">$ </span>Xnest :10
<span class="nv">$ </span>twm -display :10
<span class="nv">$ </span><span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:10
<span class="nv">$ </span>./krita
</pre></div>

<p>That&#8217;s it. You should have Krita running in a separate window, with Xnest, and within
this window the twm window manager running. So when it freezes, at least you can still
debug your application in Eclipse or whatever IDE you prefer.</p>
<p>Happy hacking!</p><!-- html -->

    <p class="postmetadata">

        <small>tags 
         [&nbsp;<a
            href="/tag/c%2B%2B"
            rel="tag">c++</a>&nbsp;]&nbsp;

        </small>


        <br/>
        <small>posted in 
        [&nbsp;<a
            href="/blog"
            title="View all posts in blog"
            rel="category tag">blog</a>&nbsp;]&nbsp;
        category </small>

    </p>
</div>

<div class="ui raised padded container segment">
    <h2>Drawing sketch: Uh!</h2>
    <p><small>kinow</small> @ <small>Dec 19, 2016&nbsp;19:40:03</small></p>







<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://kinoshita.eti.br/2016/12/19/drawing-sketch-uh" data-text="Drawing sketch: Uh!" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    <p>Sketch.</p>
<div class='row'>
<div class="ui container" style='text-align: center;'>
<figure>
<a href="/2016/12/19/drawing-sketch-uh/progress.jpg" rel="prettyPhoto" class="thumbnail" title="Uh! progress">
<img class="ui fluid image" src="/2016/12/19/drawing-sketch-uh/progress.jpg" alt="Uh! progress" />
</a>
<figcaption>Uh! progress</figcaption>
</figure>
</div>
</div>

<p>And final work here.</p>
<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2016/12/19/drawing-sketch-uh/uh.jpg" rel="prettyPhoto" class="thumbnail" title="Uh!">
<img style="height: 400px;" class="ui image" src="/2016/12/19/drawing-sketch-uh/uh.jpg" alt="Uh!" />
</a>
<figcaption>Uh!</figcaption>
</figure>
</div>
</div>

<p>For <a href="http://kinow.deviantart.com/art/Uh-651490865">redditgetsdrawn</a></p><!-- html -->

    <p class="postmetadata">

        <small>tags 
         [&nbsp;<a
            href="/tag/illustrations"
            rel="tag">illustrations</a>&nbsp;]&nbsp;

        </small>


        <br/>
        <small>posted in 
        [&nbsp;<a
            href="/blog"
            title="View all posts in blog"
            rel="category tag">blog</a>&nbsp;]&nbsp;
        category </small>

    </p>
</div>

<div id="navigation">

        &larr;&nbsp;<a href="//blog/3" id="navigation-next">Older Entries</a>


        &mdash; <a href="//blog" id="navigation-next">Newer Entries</a>&nbsp;&rarr;

</div>
                    <p class="postmetadata">
                        
                        
                    </p>
                
                </div>
            </div>
        </div>
        <div class="ui vertical footer segment">
            <div class="ui center aligned container">
                           <div id="copy" class="">
                <p>&copy; <a href="/about"><span
                            class="b">Bru</span><span
                            class="r">no de</span> <span
                            class="a">Paula</span> <span
                            class="s"></span><span
                            class="i">Kinos</span><span
                            class="l">hita</span></a>
                </p>
            </div>
            </div>
         </div>
    </div>
</body>
</html>
<script src="/js/jquery-2.2.3.min.js"  type="text/javascript"></script>
    <script src="/css/semantic/dist/semantic.min.js"  type="text/javascript"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto({
        social_tools: false,
        autoplay_slideshow: false, 
        hideflash: true, 
        autoplay: false, 
        overlay_gallery: false
    });

    $("#toc")
        .sidebar({
          dimPage          : true,
          transition       : 'overlay',
          mobileTransition : 'uncover'
        })
    ;

    $("#toc")
        .sidebar('attach events', '.launch.button, .view-ui, .launch.item')
    ;
  });
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32767310-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
