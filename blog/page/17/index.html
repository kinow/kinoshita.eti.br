<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Page 17 of 28 for Blog - page 17 | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Blog - page 17" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Bruno P. Kinoshita personal home page" />
<meta property="og:description" content="Bruno P. Kinoshita personal home page" />
<link rel="canonical" href="https://kinoshita.eti.br/blog/page/17/" />
<meta property="og:url" content="https://kinoshita.eti.br/blog/page/17/" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<link rel="prev" href="https://kinoshita.eti.br/blog/page/16/" />
<link rel="next" href="https://kinoshita.eti.br/blog/page/18/" />
<script type="application/ld+json">
{"description":"Bruno P. Kinoshita personal home page","@type":"WebPage","url":"https://kinoshita.eti.br/blog/page/17/","headline":"Blog - page 17","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /><link href="https://unpkg.com/pattern.css" rel="stylesheet">

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <h1 class="page-heading">Blog - page 17</h1>

<div class="blog"><div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2015/04/12/groovy-hooks-in-jenkins-for-increasing-logging-level.html">
      Groovy Hooks in Jenkins for increasing logging level
    </a>
  </h3><span class="post-meta">Apr 12, 2015<span>&mdash; star date: -307641.1.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>Yesterday, while debugging a problem we had in the <a href="http://biouno.org">BioUno</a> update center, 
I realized that after <a href="https://wiki.jenkins-ci.org/display/JENKINS/Logging">increasing the logging level in the WEB interface</a>, 
the messages that I needed weren’t being displayed in the logs.</p>

<p>It happened because some of the logging happened during Jenkins initialization, and before I could adjust the log level.</p>

<p>The solution was to use a <a href="https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Hook+Script">Groovy Hook Script</a>. 
If you are familiar with Linux init scripts, the idea is quite similar.</p>

<p>A Groovy script in the <code class="language-plaintext highlighter-rouge">$JENKINS_ROOT_DIR/init.groovy.d/</code> directory is executed during
Jenkins initialization. This way you can increase the global logger level with a script
as the following below.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.logging.ConsoleHandler</span>
<span class="kn">import</span> <span class="nn">java.util.logging.LogManager</span>
<span class="kn">import</span> <span class="nn">java.util.logging.Logger</span>
<span class="kn">import</span> <span class="nn">java.util.logging.Level</span>

<span class="n">def</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">setLevel</span><span class="o">(</span><span class="nc">Level</span><span class="o">.</span><span class="na">FINEST</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">addHandler</span> <span class="o">(</span><span class="k">new</span> <span class="nc">ConsoleHandler</span><span class="o">())</span>
</code></pre></div></div>

<p>Happy logging!</p>
</div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2015/01/01/contributing-to-apache-jena.html">
      Contributing to Apache Jena
    </a>
  </h3><span class="post-meta">Jan 1, 2015<span>&mdash; star date: -307915.07.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>As I mentioned in my <a href="/2014/10/11/basic-workflow-of-a-sparql-query-in-fuseki.html">previous post</a>, 
I am using <a href="http://jena.apache.org">Apache Jena</a> for a project of a customer. I had never used 
any triple store, nor a SPARQL Endpoint server before. But for being involved with the Apache 
Software Foundation, and since the company itself is using several Apache components, it was only 
natural Jena to be our first choice.</p>

<p>It has served us very well so far. At the moment we have less than 100 queries per day, but the 
project is still under development and we expect 1000 queries per day by the first quarter of 
2015 and 1000000 near the end of 2015. We also have few entries in TDB, but expect to grow this 
number to a few million before 2016.</p>

<p class="more-link">
    <a class="post-link" href="/2015/01/01/contributing-to-apache-jena.html">Continue reading&hellip;</a>
  </p></div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2014/10/11/basic-workflow-of-a-sparql-query-in-fuseki.html">
      Basic workflow of a SPARQL query in Fuseki
    </a>
  </h3><span class="post-meta">Oct 11, 2014<span>&mdash; star date: -308139.73.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>Before using any library or tool in a customer project, specially when it is an Open Source one, 
there are many things that I like to look at before deploying it. Basically, I look at the 
features, documentation, community, open issues (in special blockers or criticals), the time 
to release fixes and new features and, obviously, the license.</p>

<p>At the moment I’m using <a href="http://jena.apache.org">Apache Jena</a> to work with ontologies, SPARQL 
and data matching and enrichment for a customer.</p>

<p>Jena is fantastic, and similar tools include <a href="http://www.w3.org/wiki/VirtuosoUniversalServer">Virtuoso</a>, 
<a href="http://stardog.com/">StarDog</a>, <a href="http://www.ontotext.com/products/ontotext-graphdb-owlim/">GraphDB</a>, 
<a href="http://4store.org/">4Store</a> and others. From looking at the code and its community and documentation, 
Jena seems like a great choice.</p>

<p>I’m still investigating if/how we gonna need to use inference and reasoners, looking 
at the issues, and learning my way through its code base. The following is my initial mapping 
of what happens when you submit a SPARQL query to Fuseki.</p>

<p><img src="/assets/posts/2014-10-11-basic-workflow-of-a-sparql-query-in-fuseki/drawing1.png" alt="Fuseki SPARQL query work flow" /></p>

<p>My understanding is that Fuseki is just a web layer, handling a bunch of validations, logging, 
error handling, and relying on the ARQ module, that is who actually handles the requests. 
I also think a new Fuseki server is baking in the project git repo, so stay tuned for an 
updated version of this graph soon.</p>

<p>Happy hacking!</p>
</div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2014/09/09/cypher-gremlin-and-sparql-graph-dialects.html">
      Cypher, Gremlin and SPARQL: Graph dialects
    </a>
  </h3><span class="post-meta">Sep 9, 2014<span>&mdash; star date: -308230.14.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>When I was younger and my older brother was living in Germany, I asked him if he 
had learned German. He said that he did, and explained that there are several 
dialects, and he was quite proud for some people told him that he was using the 
Bavarian dialect correctly.</p>

<p>Even though <a href="http://www.neo4j.org/learn/cypher">Cypher</a>, 
<a href="http://gremlindocs.com/">Gremlin</a> and <a href="http://en.wikipedia.org/wiki/SPARQL">SPARQL</a> 
are all query languages, I think we can consider them dialects of a common graph language. 
Cypher is the query language used in <a href="http://www.neo4j.org/">neo4j</a>, a graph database. 
Gremlin is part of the <a href="http://www.tinkerpop.com/">Tinkerpop</a>, an open source project 
that contains graph server, graph algorithms, graph language, among other sub-projects. 
And last but not least, SPARQL is used to query <a href="http://en.wikipedia.org/wiki/Resource_Description_Framework">RDF documents</a>.</p>

<p>Let’s use the example of the Matrix movie provided by neo4j to take a look at the 
three languages.</p>

<h2 id="cypher">Cypher</h2>

<p>First we create the graph.</p>

<pre><code class="language-SQL">create (matrix1:Movie {id : '603', title : 'The Matrix', year : '1999-03-31'}),
 (matrix2:Movie {id : '604', title : 'The Matrix Reloaded', year : '2003-05-07'}),
 (matrix3:Movie {id : '605', title : 'The Matrix Revolutions', year : '2003-10-27'}),

 (neo:Actor {name:'Keanu Reeves'}),
 (morpheus:Actor {name:'Laurence Fishburne'}),
 (trinity:Actor {name:'Carrie-Anne Moss'}),

 (matrix1)&lt;-[:ACTS_IN {role : 'Neo'}]-(neo),
 (matrix2)&lt;-[:ACTS_IN {role : 'Neo'}]-(neo),
 (matrix3)&lt;-[:ACTS_IN {role : 'Neo'}]-(neo),
 (matrix1)&lt;-[:ACTS_IN {role : 'Morpheus'}]-(morpheus),
 (matrix2)&lt;-[:ACTS_IN {role : 'Morpheus'}]-(morpheus),
 (matrix3)&lt;-[:ACTS_IN {role : 'Morpheus'}]-(morpheus),
 (matrix1)&lt;-[:ACTS_IN {role : 'Trinity'}]-(trinity),
 (matrix2)&lt;-[:ACTS_IN {role : 'Trinity'}]-(trinity),
 (matrix3)&lt;-[:ACTS_IN {role : 'Trinity'}]-(trinity)
</code></pre>

<p><code>Added 6 labels, created 6 nodes, set 21 properties, created 9 relationships, returned 0 rows in 2791 ms</code></p>

<p>And execute a simple query.</p>

<pre><code class="language-SQL">MATCH (a:Actor { name:"Keanu Reeves" })
RETURN a
</code></pre>

<p><code>(9:Actor {name:"Keanu Reeves"})</code></p>

<h2 id="gremlin">Gremlin</h2>

<p>Again, let’s start by creating our graph.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">g</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TinkerGraph</span><span class="p">();</span>
<span class="n">matrix1</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">addVertex</span><span class="p">([</span><span class="nv">"_id"</span><span class="p">:</span><span class="mi">603</span><span class="p">,</span><span class="nv">"title"</span><span class="p">:</span><span class="nv">"The Matrix"</span><span class="p">,</span> <span class="nv">"year"</span><span class="p">:</span> <span class="nv">"1999-03-31"</span><span class="p">]);</span>
<span class="n">matrix2</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">addVertex</span><span class="p">([</span><span class="nv">"_id"</span><span class="p">:</span><span class="mi">604</span><span class="p">,</span><span class="nv">"title"</span><span class="p">:</span><span class="nv">"The Matrix Reloaded"</span><span class="p">,</span> <span class="nv">"year"</span><span class="p">:</span> <span class="nv">"2003-05-07"</span><span class="p">]);</span>
<span class="n">matrix3</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">addVertex</span><span class="p">([</span><span class="nv">"_id"</span><span class="p">:</span><span class="mi">605</span><span class="p">,</span><span class="nv">"title"</span><span class="p">:</span><span class="nv">"The Matrix Revolutions"</span><span class="p">,</span> <span class="nv">"year"</span><span class="p">:</span> <span class="nv">"2003-10-27"</span><span class="p">]);</span>

<span class="n">neo</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">addVertex</span><span class="p">([</span><span class="nv">"name"</span><span class="p">:</span> <span class="nv">"Keanu Reeves"</span><span class="p">]);</span>
<span class="n">morpheus</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">addVertex</span><span class="p">([</span><span class="nv">"name"</span><span class="p">:</span> <span class="nv">"Laurence Fishburne"</span><span class="p">]);</span>
<span class="n">trinity</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">addVertex</span><span class="p">([</span><span class="nv">"name"</span><span class="p">:</span> <span class="nv">"Carrie-Anne Moss"</span><span class="p">]);</span>

<span class="n">neo</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix1</span><span class="p">);</span> 
<span class="n">neo</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix2</span><span class="p">);</span> 
<span class="n">neo</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix3</span><span class="p">);</span> 
<span class="n">morpheus</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix1</span><span class="p">);</span> 
<span class="n">morpheus</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix2</span><span class="p">);</span> 
<span class="n">morpheus</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix3</span><span class="p">);</span> 
<span class="n">trinity</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix1</span><span class="p">);</span> 
<span class="n">trinity</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix2</span><span class="p">);</span> 
<span class="n">trinity</span><span class="p">.</span><span class="n">addEdge</span><span class="p">(</span><span class="nv">"actsIn"</span><span class="p">,</span> <span class="n">matrix3</span><span class="p">);</span> 
</code></pre></div></div>

<p>And execute a simple query.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">g</span><span class="p">.</span><span class="n">V</span><span class="p">.</span><span class="n">has</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'Keanu Reeves'</span><span class="p">).</span><span class="k">map</span>
</code></pre></div></div>

<p><code>gremlin&gt; g.V.has('name', 'Keanu Reeves').map
==&gt;{name=Keanu Reeves}
gremlin&gt;</code></p>

<p>Quite similar to neo4j.</p>

<h2 id="sparql">SPARQL</h2>

<p>Let’s load our example (thanks to <a href="https://twitter.com/kendall">Kendall G. Clark</a>). I used 
<a href="http://jena.apache.org/documentation/serving_data/">Fuseki</a> to run these queries.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@prefix :          <span class="nt">&lt;http:</span><span class="err">//example.org/matrix</span><span class="nt">/&gt;</span> .

 :m1 a :Movie; :title "The Matrix"; :year "1999-03-31".
 :m2 a :Movie; :title "The Matrix Reloaded"; :year "2003-05-07".
 :m3 a :Movie; :title "The Matrix Revolutions"; :year "2003-10-27".
 
 :neo a :Actor; :name "Keanu Reeves".
 :morpheus a :Actor; :name "Laurence Fishburne".
 :trinity a :Actor; :name "Carrie-Anne Moss".
 
 :neo :hasRole [:as "Neo"; :in :m1].
 :neo :hasRole [:as "Neo"; :in :m2].
 :neo :hasRole [:as "Neo"; :in :m2].
 :morpheus :hasRole [:as "Morpheus"; :in :m1].
 :morpheus :hasRole [:as "Morpheus"; :in :m2].
 :morpheus :hasRole [:as "Morpheus"; :in :m2].
 :trinity :hasRole [:as "Trinity"; :in :m1].
 :trinity :hasRole [:as "Trinity"; :in :m2].
 :trinity :hasRole [:as "Trinity"; :in :m2].
</code></pre></div></div>

<p>And finally the SPARQL query.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">?</span><span class="n">a</span> <span class="k">WHERE</span> <span class="err">{</span>
   <span class="o">?</span><span class="n">a</span> <span class="n">a</span> <span class="o">&lt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">example</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">matrix</span><span class="o">/</span><span class="n">Actor</span><span class="o">&gt;</span> <span class="p">.</span>
   <span class="o">?</span><span class="n">a</span> <span class="o">&lt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">example</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">matrix</span><span class="o">/</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">?</span><span class="n">name</span> <span class="p">.</span>
   <span class="n">FILTER</span><span class="p">(</span><span class="o">?</span><span class="n">name</span>  <span class="o">=</span> <span class="nv">"Keanu Reeves"</span><span class="p">)</span>
<span class="err">}</span>
</code></pre></div></div>

<p>Returning the Keanu Reeves actor instance.</p>

<pre>-----------------------------------
| a                               |
===================================
| &lt;http://example.org/matrix/neo&gt; |
-----------------------------------</pre>

<p>SPARQL supports inference (or I must say that OWL, RDFS and the reasoners do), 
but it is easier to define the depth of a search in the graph using neo4j. As for 
Gremlin, it has native support to Groovy and Java. There is a common denominator 
for these three languages, but what makes them really powerful are their unique features.</p>

<p>I hope you enjoyed, and that this post gave you a quick overview of some of the existing 
graph languages. Make sure you ponder the pros and cons of each server/language, and 
make the best decision for your project. Take a look at <a href="http://en.wikipedia.org/wiki/Graph_database#APIs_and_Graph_Query.2FProgramming_Languages">other graph query languages</a> too.</p>

<p>Happy hacking!</p>

<hr />

<p>This post has been updated as suggested by <a href="https://twitter.com/kendall">@kendall</a> (Thank you!).
You can check the diff at <a href="https://github.com/kinow/kinoshita.eti.br/commits/master/site/_content/posts/2014-09-09_cypher-gremlin-and-sparql-graph-dialects.html">GitHub</a></p>
</div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2014/08/09/strings-transliteration-in-java-with-apache-commons-lang.html">
      Strings transliteration in Java with Apache Commons Lang
    </a>
  </h3><span class="post-meta">Aug 9, 2014<span>&mdash; star date: -308312.33.</span></span>
  <span class="post-meta">Number of words: 0.</span><p><a href="http://rosalind.info">Rosalind</a> is a website with a curated set of exercices for bioinformatics, organized hierarchily. 
In some of these examples you are required to replace characters (nucleotides) by other characters. It is a rather common 
task for developers, like when you need to replace special characters in user’s names.</p>

<p>There are different ways of describing it, such as translate, replace, or <strong><a href="http://en.wikipedia.org/wiki/Transliteration">transliterate</a></strong>. The latter being my favorite definition.</p>

<p>In Python I know that there are several different ways of transliterating strings 
[<a href="https://pypi.python.org/pypi/transliterate">1</a>][<a href="http://blog.lebowtech.com/blog/programming/python/transliterate-with-python.html">2</a>]. But in Java I always ended up using a Map or a Enum and writing my own method in some <em>Util</em> class for that.</p>

<p>Turns out that <a href="http://commons.apache.org">Apache Commons Lang</a>, which I use in most of my projects, 
provided this feature. What means that I will be able to reduce the length of my code, what also means 
less code to be tested (and one less place to look for bugs).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s</span> <span class="o">=</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">replaceChars</span><span class="o">(</span><span class="s">"ATGCATGC"</span><span class="o">,</span> <span class="s">"GTCA"</span><span class="o">,</span> <span class="s">"CAGT"</span><span class="o">);</span> <span class="c1">// "TACGTACG"</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</code></pre></div></div>

<p>What the code above does, is replace G by C, T by A, C by G and A by T. This process is part of finding the 
<a href="http://www.bioinformatics.org/sms/rev_comp.html">DNA reverse complement</a>. But you can also use this for replacing 
special characters, spaces by _, and so it goes.</p>

<p>Happy hacking!</p>
</div>
<!-- Pagination links -->
  <div class="pagination">
    <p>
      
      <a href="/blog/page/16/" class="icon item">
        <i class="left chevron icon"></i>Previous
      </a>
      
      <span class="page_number ">Page: 17 of 28</span>
      
      <a href="/blog/page/18/" class="next">
        Next<i class="right chevron icon"></i>
      </a>
      
    </p>
  </div></div>

  </div>
</div>
</body>
</html>
