<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Page 16 of 28 for Blog - page 16 | kinow</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Blog - page 16" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Bruno “kinow” Kinoshita personal home page" />
<meta property="og:description" content="Bruno “kinow” Kinoshita personal home page" />
<link rel="canonical" href="https://kinoshita.eti.br/blog/page/16/" />
<meta property="og:url" content="https://kinoshita.eti.br/blog/page/16/" />
<meta property="og:site_name" content="kinow" />
<link rel="prev" href="https://kinoshita.eti.br/blog/page/15/" />
<link rel="next" href="https://kinoshita.eti.br/blog/page/17/" />
<script type="application/ld+json">
{"description":"Bruno “kinow” Kinoshita personal home page","@type":"WebPage","url":"https://kinoshita.eti.br/blog/page/16/","headline":"Blog - page 16","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="kinow" /><link href="https://unpkg.com/pattern.css" rel="stylesheet">

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <h1 class="page-heading">Blog - page 16</h1>

<div class="blog"><div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/04/08/geek-vacation-2016.html">
      Geek Vacation 2016
    </a>
  </h3><span class="post-meta">Apr 8, 2016<span>&mdash; star date: -306650.27.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>I just had a two week vacation, and I tried to use my time to rest, play some music, and
complete a geek todo-list.</p>

<p>The list included things that I used some time ago but wanted to
refresh my memory, things that I already used but never spent time reading the manuals, and
other things that I saw somewhere but never actually used in any project.</p>

<p>Here the complete list, with the items that were completed highlighted. Some links with
pointers to what I used to study.</p>

<ul>
  <li>gdb, strace, ptrace, etc, sysdig, dtrace (looked for links at <a href="https://news.ycombinator.com/">HackerNews</a> and <a href="https://www.reddit.com/">reddit</a>) ✔</li>
  <li>geodesy (<a href="https://en.wikipedia.org/wiki/Geodesy">Wikipedia</a>, some PDF’s) ✔</li>
  <li>QGIS (<a href="http://www.bostongis.com/?content_name=qgis">Boston GIS docs</a> and <a href="http://youtube.com">YouTube</a> videos) ✔</li>
  <li>SRS &amp; CRS (<a href="https://en.wikipedia.org/wiki/Spatial_reference_system">Wikipedia</a>) ✔</li>
  <li>BioPython (<a href="http://biopython.org/">project page</a>) ✔</li>
  <li>BioConda (<a href="https://bioconda.github.io/">project page</a>) ✔</li>
  <li>Weaver &amp; asm (<a href="https://commons.apache.org/proper/commons-weaver/">project page</a> and <a href="https://en.wikipedia.org/wiki/ObjectWeb_ASM">Wikipedia</a>) ✔</li>
  <li>afl (project page, and some <a href="http://kinoshita.eti.br/2016/02/27/learning-afl-and-testing-mapserver.html">tests with MapServer</a>) ✔</li>
  <li>WFS (<a href="https://en.wikipedia.org/wiki/Web_Feature_Service">Wikipedia</a>, <a href="http://docs.geoserver.org/latest/en/user/services/wfs/reference.html">GeoServer</a> and <a href="http://mapserver.org/ogc/wfs_server.html">MapServer</a>) ✔</li>
  <li>SaltStack (<a href="http://saltstack.com/">project page</a>, <a href="https://wiki.jenkins-ci.org/display/JENKINS/saltstack-plugin">Jenkins Plug-ins for SaltStack</a>, and a few tests with VM’s and Docker) ✔</li>
  <li>InfluxDB (<a href="https://influxdata.com/">project page</a>) ✔</li>
  <li>rr (<a href="http://rr-project.org/">project page</a> and some local tests) ✔</li>
  <li>ZeroMQ (<a href="http://zeromq.org/">project page</a>, <a href="https://github.com/saltstack/salt/blob/90b0a42a21dc11ca118ffbb679e0871f234c17bc/salt/transport/zeromq.py">SaltStack source code</a>) ✔</li>
  <li>netty (<a href="http://netty.io/">project page</a>) ✔</li>
  <li>RethinkDB (<a href="https://rethinkdb.com/">project page</a>, and a <a href="https://github.com/kinow/jira-rethinkdb">test project</a>) ✔</li>
  <li>C++ (templates, abstractions in C++, etc) (<a href="http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part">just this article to remember syntax</a>) ✔</li>
  <li>Linear programming (<a href="http://benalexkeen.com/linear-programming-with-python-and-pulp/">PuLP docs</a>) ✔</li>
  <li>AKKA (<a href="http://akka.io/">project page</a>) ✔</li>
  <li>Frege (<a href="https://github.com/Frege/frege">project page</a> (reading their <a href="https://www.gitbook.com/book/dierk/fregegoodness/details">new book</a>))</li>
  <li>JVM internals (played a little with <a href="http://asm.ow2.org/">asm</a>, <a href="http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html">javap</a>)</li>
  <li>Java Concurrency (started re-reading <a href="http://jcip.net/">Java Concurrency in Practice</a>, but still in the initial chapters)</li>
  <li>PostGIS (<a href="postgis.net/">project page</a>)</li>
  <li>Krita (<a href="https://krita.org/">project page</a> and <a href="http://www.davidrevoy.com/article193/guide-building-krita-on-linux-for-cats">David Revoy’s tutorials</a>)</li>
  <li>Scala (<a href="http://www.scala-lang.org/">project page</a>)</li>
  <li>Minecraft Forge (<a href="http://www.minecraftforge.net/forum/">project forum</a>)</li>
  <li>Graphs in Jenkins, cylc, Spark, Jena and clue/graph (didn’t have time for this one)</li>
</ul>

<p>Going to have less spare time now for Open Source and learning the rest of the stuff on this list,
but there’s always some books to read, and things to learn anyway right ¯\<em>(ツ)</em>/¯</p>
</div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/03/20/deploying-war-files-to-tomcat-with-jenkins.html">
      Deploying WAR files to Tomcat with Jenkins
    </a>
  </h3><span class="post-meta">Mar 20, 2016<span>&mdash; star date: -306699.45.</span></span>
  <span class="post-meta">Number of words: 0.</span><p><strong>Table of Contents</strong></p>

<ul>
  <li><a href="#1-deploying-with-custom-scripts">Deploying with custom scripts</a></li>
  <li><a href="#2-deploying-with-a-build-tool">Deploying with a build tool</a></li>
  <li><a href="#3-deploying-with-a-build-server">Deploying with a build server</a></li>
  <li><a href="#final-thoughts">Final thoughts</a></li>
</ul>

<p>A co-worker asked me this week about how to deploy a WAR file to Tomcat with Jenkins. In my team we are
currently maintaining and deploying about 10 Java web systems, but we have no consistent way of deploying
the applications to Tomcat yet. In the past I used Ant, Maven, Cargo, Grunt, and Jenkins, so I
decided to write this short post to show a few different ways it can be achieved, à la
<a href="https://en.wikipedia.org/wiki/There's_more_than_one_way_to_do_it">Perl’s TMTOWTDI</a> motto.</p>

<h2><a name="1-deploying-with-custom-scripts" style="color: #222222;">#1 Deploying with custom scripts</a></h2>

<p>At first you may be tempted to write your own script to deploy to Tomcat with some Shell, Perl, Python
or Java. But I think I would choose this option only because either I needed some feature that is not
available in the other options, or in order to call other tasks or debug some problem.</p>

<p>Example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 8888:8080 jeanblanchard/tomcat:8
<span class="nv">$ </span>git clone https://github.com/spring-projects/spring-petclinic.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>spring-petclinic <span class="o">&amp;&amp;</span> mvn package
<span class="nv">$ </span>curl <span class="nt">--upload-file</span> target/petclinic.war <span class="s2">"http://admin:admin@localhost:8888/manager/text/deploy?path=/spring-petclinic&amp;update=true"</span>
OK - Deployed application at context path /spring-petclinic
</code></pre></div></div>

<p class="more-link">
    <a class="post-link" href="/2016/03/20/deploying-war-files-to-tomcat-with-jenkins.html">Continue reading&hellip;</a>
  </p></div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/02/27/learning-afl-and-testing-mapserver.html">
      Learning afl and testing MapServer
    </a>
  </h3><span class="post-meta">Feb 27, 2016<span>&mdash; star date: -306765.03.</span></span>
  <span class="post-meta">Number of words: 0.</span><p><a href="http://lcamtuf.coredump.cx/afl/">afl</a> is a fuzzer, an application that combines a series of algorithms
in order to try invoking programs with several different input values. It then analyses the application
execution flow given different test case scenarios. 
You can read more about fuzzing at <a href="https://www.owasp.org/index.php/Fuzzing">this OWASP page</a>, or in other
blogs that I also used while learning about afl <a href="&quot;#1&quot;">1</a> <a href="&quot;#2&quot;">2</a></p>

<p>At work we are using MapServer for serving WFS and WMS. And I am using it for the
<a href="http://maps.nzoss.org.nz">NZ OpenStreetMap maps</a> too. MapServer is written in C++ and is normally
exposed as a CGI script, so I thought it was worth learning about afl and trying it on MapServer,
as in case it finds any interesting bug I can submit it to the MapServer project.</p>

<p class="more-link">
    <a class="post-link" href="/2016/02/27/learning-afl-and-testing-mapserver.html">Continue reading&hellip;</a>
  </p></div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2015/09/07/how-does-the-jenkins-credentials-plugin-store-passwords.html">
      How does the Jenkins Credentials Plug-in store passwords?
    </a>
  </h3><span class="post-meta">Sep 7, 2015<span>&mdash; star date: -307235.62.</span></span>
  <span class="post-meta">Number of words: 0.</span><p><a href="https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Plugin">Jenkins Credentials Plug-in</a> manages credentials stored in Jenkins. These credentials can be used in many jobs and by plug-ins for executing SSH commands, authenticating to systems, or running other commands that need some sort of authentication or authorisation.</p>

<p>I recently used its API for the first time in the <a href="https://github.com/biouno/figshare-plugin">BioUno figshare Plug-in</a> to store OAuth 1.0 credentials (consumer key, consumer secret, token key, token secret). This <a href="http://biouno.org/2015/09/05/using_jenkins_credentials_plugin_to_create_the_biouno_figshare_plugin/">blog post</a> has more details about how we used the plug-in, but this post is specifically on how the passwords are stored by Jenkins.</p>

<h2 id="secret-and-ciphers">Secret and ciphers</h2>

<p>Jenkins stores its configuration on disk as XML using the XStream library. Plug-in developers using the Credentials Plug-in API must use the <strong>Secret</strong> class to encrypt sensitive information.</p>

<p>The <code class="language-plaintext highlighter-rouge">Secret.fromString</code> method is responsible for creating a cipher from a given String. As in the Secret Javadoc,  <em>“this is not meant as a protection against code running in the same VM, nor against an attacker who has local file system access on Jenkins master”</em>. But at least makes things more complicated :-)</p>

<ul>
  <li><a href="http://javadoc.jenkins-ci.org/hudson/util/Secret.html">Secret Javadoc</a></li>
  <li><a href="https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/hudson/util/Secret.java">Secret source code</a></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Secret</span> <span class="nf">fromString</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nc">Util</span><span class="o">.</span><span class="na">fixNull</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="nc">Secret</span> <span class="n">s</span> <span class="o">=</span> <span class="n">decrypt</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="n">s</span><span class="o">=</span><span class="k">new</span> <span class="nc">Secret</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The first line simply replaces a null string by an empty “”, or keeps the current value of not null.</p>

<p>After that, the decrypt method is called.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Secret</span> <span class="nf">decrypt</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">data</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">in</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">());</span>
        <span class="nc">Secret</span> <span class="n">s</span> <span class="o">=</span> <span class="n">tryDecrypt</span><span class="o">(</span><span class="no">KEY</span><span class="o">.</span><span class="na">decrypt</span><span class="o">(),</span> <span class="n">in</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">s</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>    <span class="k">return</span> <span class="n">s</span><span class="o">;</span>

        <span class="c1">// try our historical key for backward compatibility</span>
        <span class="nc">Cipher</span> <span class="n">cipher</span> <span class="o">=</span> <span class="n">getCipher</span><span class="o">(</span><span class="s">"AES"</span><span class="o">);</span>
        <span class="n">cipher</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="nc">Cipher</span><span class="o">.</span><span class="na">DECRYPT_MODE</span><span class="o">,</span> <span class="n">getLegacyKey</span><span class="o">());</span>
        <span class="k">return</span> <span class="nf">tryDecrypt</span><span class="o">(</span><span class="n">cipher</span><span class="o">,</span> <span class="n">in</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">GeneralSecurityException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">Error</span><span class="o">(</span><span class="n">e</span><span class="o">);</span> <span class="c1">// impossible</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">KEY.decrypt()</code> call will return a <a href="http://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html"><code class="language-plaintext highlighter-rouge">javax.crypto.Cipher</code></a>. The Cipher class is handled in <a href="https://github.com/jenkinsci/jenkins/blob/93dfe3377ec8d430818f5b9073f16c677343adb4/core/src/main/java/jenkins/security/CryptoConfidentialKey.java">CryptoConfidentialKey</a> in Jenkins API, where it defines the algorithm used to create the cipher: <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a>.</p>

<p>Jenkins has also a <a href="https://github.com/jenkinsci/jenkins/blob/93dfe3377ec8d430818f5b9073f16c677343adb4/core/src/main/java/jenkins/security/ConfidentialStore.java#L63">ConfidentialStore</a>, that is required to create the cipher. This class must be initialized before someone tries to create or read a cipher. This extra step also increases security, though access to the JVM is still a problem.</p>

<p>It is a bit late, so it is all for today. In summary: the credentials plug-in gives you a central place to manage credentials, but it is up to plug-in developers to use it. Sensitive values can be encrypted with AES on disk. So it is important that your file permissions, ACL and system auditing processes are in place and well maintained and monitored.</p>

<p>Happy hacking!</p>
</div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2015/06/23/modeling-observation-data-in-sos.html">
      Modeling observation data in SOS (Sensor Observation Service)
    </a>
  </h3><span class="post-meta">Jun 23, 2015<span>&mdash; star date: -307443.84.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>This week NZ Herald published an <a href="http://www.nzherald.co.nz/technology/news/article.cfm?c_id=5&amp;objectid=11469418">article</a>
about a device created by an Irish farmer enterpreneur that sends a message to a farmer when the cow is about to give birth.
The device monitors “heightened tail moviment”.</p>

<p>In this post I will try to apply what I am learning following the <a href="http://www.ogcnetwork.net/SOS_2_0/tutorial">SOS Tutorial</a>
(the Open Geospatial Consortium standard for Sensor Observation Service). Feel free to drop me a message via
<a href="https://twitter.com/kinow">@kinow</a> if you find any mistakes or have any suggestions.</p>

<h2 id="modeling-the-tail-moviment-observation-data-in-sos">Modeling the tail moviment observation data in SOS</h2>

<p>SOS is a standard designed to provide access to observation data. There are several server implementations, such as Kisters KiWIS, 
istSOS and 52North SOS.</p>

<p>The standard mentions and utilises several other standards, such as SensorML, WFS, XML, WMS, etc. The SOS Tutorial on
how to model your observation data for SOS starts by defining <em>procedure</em>, <em>observed property</em>, <em>feature of interest</em>,
<em>phenomenon and result times</em>, and the <em>result value</em>.</p>

<p>Let’s try to model the data from the tail moviment sensors in the following table.</p>

<table class="table table-bordered">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Our example</th>
</tr>
</thead>
<tbody>
<tr>
<th>Procedure</th>
<td>The process that has generated the observation, such as a sensor, from the O&amp;M specification. In our example that could be a sensor identification</td>
<td>moocall_001</td>
</tr>
<tr>
<th>Observed Property</th>
<td>A property which is observed (look at NASA SWEET ontology for existing values)</td>
<td>Heightned tail moviment</td>
</tr>
<tr>
<th>Feature of Interest</th>
<td>A feature that carries the property which is observed</td>
<td>Pregnant cow</td>
</tr>
<tr>
<th>Phenomenon and Result Times</th>
<td>The phenomenon time is when the data has been taken, and the result time when it has been created. If both are the same, the resultTime can point to the phenomenonTime</td>
<td>20150623142000</td>
</tr>
<tr>
<th>Result value</th>
<td>This is the result of the observation. Can be a OM_Measurement if numeric, OM_TruthObservation, etc (O&amp;M)</td>
<td>3 (supposing we have a scale from 1 to 5)</td>
</tr>
</tbody>
</table>

<p>In the next post I will try to show how to load this model and some dummy data into a fresh installation of
52North SOS server.</p>
</div>
<!-- Pagination links -->
  <div class="pagination">
    <p>
      
      <a href="/blog/page/15/" class="icon item">
        <i class="left chevron icon"></i>Previous
      </a>
      
      <span class="page_number ">Page: 16 of 28</span>
      
      <a href="/blog/page/17/" class="next">
        Next<i class="right chevron icon"></i>
      </a>
      
    </p>
  </div></div>

  </div>
</div>
</body>
</html>
