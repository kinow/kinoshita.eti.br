<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Page 15 of 28 for Blog - page 15 | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Blog - page 15" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Bruno P. Kinoshita personal home page" />
<meta property="og:description" content="Bruno P. Kinoshita personal home page" />
<link rel="canonical" href="https://kinoshita.eti.br/blog/page/15/" />
<meta property="og:url" content="https://kinoshita.eti.br/blog/page/15/" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<link rel="prev" href="https://kinoshita.eti.br/blog/page/14/" />
<link rel="next" href="https://kinoshita.eti.br/blog/page/16/" />
<script type="application/ld+json">
{"description":"Bruno P. Kinoshita personal home page","@type":"WebPage","url":"https://kinoshita.eti.br/blog/page/15/","headline":"Blog - page 15","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /><link href="https://unpkg.com/pattern.css" rel="stylesheet">

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <h1 class="page-heading">Blog - page 15</h1>

<div class="blog"><div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/07/17/reasons-for-having-pt-and-ptbr-in-a-software.html">
      Reasons for having pt and pt-BR in a software
    </a>
  </h3><span class="post-meta">Jul 17, 2016<span>&mdash; star date: -306374.32.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>Some time ago I found some spare time to work on a different Open Source project:
<a href="http://skosmos.org/">SKOSMOS</a>. SKOSMOS is a web based SKOS browser and publishing
tool, used to create vocabularies using the SKOS ontology.</p>

<p>I decided to help with translation, but there was no Brazilian Portuguese option,
only Portuguese. I used a few arguments to suggest that having Brazilian Portuguese
would be a good thing.</p>

<p>Another Open Source project that I use in a side project is
<a href="https://www.languagetool.org/">LanguageTool</a>. LanguageTool is used for
proof-reading, and uses rules to find spelling and grammar errors.</p>

<p>Today I saw a message in the LanguageTool mailing list discussing whether having a Brazilian
Portuguese page would make sense, or if it would be better to have just Portuguese, and then
add rules for special cases.</p>

<p class="more-link">
    <a class="post-link" href="/2016/07/17/reasons-for-having-pt-and-ptbr-in-a-software.html">Continue reading&hellip;</a>
  </p></div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/07/12/processing-vaisala-radiosonde-data-with-python-and-creating-gruan-like-netcdf-files.html">
      Processing Vaisala Radiosonde data with Python, and creating GRUAN-like NetCDF files
    </a>
  </h3><span class="post-meta">Jul 12, 2016<span>&mdash; star date: -306387.98.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>One of my last projects involved parsing a few GBâ€™s of data that was in a certain binary format,
and convert it into NetCDF files. In this post I will describe what was done, what I learned about radiosonde,
<a href="http://www.dwd.de/EN/research/international_programme/gruan/home.html">GRUAN</a> and other geek stuff. Ready?</p>

<h3 id="vaisala-radiosonde-data">Vaisala Radiosonde data</h3>

<p>When I was told the data was in some binary format, I thought it would be similar to
parsing a flat file. That this would contain a fixed length entry, with the same
kind of item repeated multiple times.</p>

<p>Well, not exactly.</p>

<p>The files had been generated by an instrument made by <a href="http://www.vaisala.com">Vaisala</a>, a Finnish company. This
instrument is called a <strong>radiosonde</strong>. It is an instrument about the size of an old
mobile phone, that is launched with a balloon into the atmosphere.</p>

<p>I was lucky to be given the chance to release one of these balloons carrying a newer
version of this equipment.</p>

<p><img class="ui centered large bordered image" src="/assets/posts/2016-07-12-processing-vaisala-radiosonde-data-with-python-and-creating-gruan-like-netcdf-files/balloon-launch.jpg" alt="Radiosonde balloon launch" /></p>

<p>The balloon can carry equipments for measuring different things, like air pressure,
altitude, temperature, latitude, longitude, relative humidity, among others. Equipments
like the radiosonde send the data back to a ground-level station via radio,
normally in a short and constant interval.</p>

<p class="more-link">
    <a class="post-link" href="/2016/07/12/processing-vaisala-radiosonde-data-with-python-and-creating-gruan-like-netcdf-files.html">Continue reading&hellip;</a>
  </p></div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/05/06/some-linux-commands-i-used-this-week.html">
      Some Linux commands I used this week
    </a>
  </h3><span class="post-meta">May 6, 2016<span>&mdash; star date: -306571.04.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>These are some commands I used on Linux servers this week. Adding them here in case someone else
find them interesting, and also due to my bad memory :-)</p>

<h2 id="listing-latest-installed-packages-in-sles">Listing latest installed packages in SLES</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">-qa</span> <span class="nt">--last</span>
</code></pre></div></div>

<p>This will display the last packages installed. Useful when there are packages being updated, and you
need to confirm what changed, and when.</p>

<h2 id="listing-packages-in-sles-and-origin-repository">Listing packages in SLES and origin repository</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">-qa</span> <span class="nt">--qf</span> <span class="s1">'%-30{DISTRIBUTION} %{NAME}\n'</span>| <span class="nb">sort</span>
</code></pre></div></div>

<p>The output will have two columns. The first containing the repository name, and the second column with
the package name. For example.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>devel:languages:R:base / SLE_11_SP2 R-base
devel:languages:R:base / SLE_11_SP2 R-base-devel
home:flacco:sles / SLE_11_SP3 php53-phar
home:happenpappen / SLE_11_SP2 nodejs
</code></pre></div></div>

<h2 id="grep-for-content-in-xml-tags">Grep for content in XML tags</h2>

<p>Be it for web services, or for finding things in Jenkins XML files. Being able to grep the tag attribute
or tag name might be useful. Look at the following example that uses the 
<a href="https://msdn.microsoft.com/en-us/library/ms762271%28v=vs.85%29.aspx">books XML provided by Microsoft for testing</a>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-oP</span> <span class="s2">"(?&lt;=&lt;genre&gt;).*?(?=&lt;/genre&gt;)"</span> books.xml | <span class="nb">sort</span> | <span class="nb">uniq</span>
</code></pre></div></div>

<p>Which will outputs the following.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Computer
Fantasy
Horror
Romance
Science Fiction
</code></pre></div></div>

<h2 id="find-python-site-packages-directory">Find Python site packages directory</h2>

<p>Sometimes you have Anaconda, but also the system installation, and maybe even other Python distributions.
Knowing where Python is looking for site packages can be helpful to confirm the package exists, and also
to inspect its sources.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-c</span> <span class="s2">"from distutils.sysconfig import get_python_lib; print(get_python_lib())"</span>
</code></pre></div></div>

<p>An example of the output of the script.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/lib/python2.7/dist-packages
</code></pre></div></div>

<h2 id="force-no-cache-via-curl-for-a-list-of-files">Force no-cache via curl for a list of files</h2>

<p>Useful when you have a proxy like squid caching some requests from an application and you
want to flush the cache and get the latest content (which will be cached again, but then
you can fix it once confirmed).</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">--silent</span> <span class="nt">-H</span> <span class="s1">'Cache-Control: no-cache'</span> http://systemcachingvalues.local/somedoc.html
</code></pre></div></div>

<h2 id="find-to-which-servers-a-linux-process-is-talking-to">Find to which servers a Linux process is talking to</h2>

<p>You have to find the pid of the process that you would like to investigate (e.g. 6364) and have
<a href="http://linux.die.net/man/1/strace">strace</a> installed.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>strace <span class="nt">-p</span> 6364 <span class="nt">-f</span> <span class="nt">-e</span> <span class="nv">trace</span><span class="o">=</span>network <span class="nt">-o</span> output.txt
</code></pre></div></div>

<p>The command above creates output.txt with the trace information. Then you can grep for
the IP addresses with the following regex.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-E</span> <span class="nt">-o</span> <span class="s2">"(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)</span><span class="se">\.</span><span class="s2">(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)</span><span class="se">\.</span><span class="s2">(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)</span><span class="se">\.</span><span class="s2">(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)"</span> output.txt
</code></pre></div></div>

<p>Which will output something similar to the following example.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.1.1
127.0.1.1
127.0.1.1
192.168.20.4
10.10.0.12
...
</code></pre></div></div>

<p>And finally, you can call dig to get the server name, and also remove duplicates.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-E</span> <span class="nt">-o</span> <span class="s2">"(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)</span><span class="se">\.</span><span class="s2">(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)</span><span class="se">\.</span><span class="s2">(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)</span><span class="se">\.</span><span class="s2">(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)"</span> output.txt | xargs <span class="nt">-l</span> dig +noall +answer +nocmd <span class="nt">-x</span> | <span class="nb">awk</span> <span class="s1">'{ print $5}'</span> | <span class="nb">sort</span> | <span class="nb">uniq</span>
</code></pre></div></div>

<p>Which gives you the following.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ec2-52-13-43-205.compute-1.amazonaws.com.
ec2-52-32-244-147.compute-1.amazonaws.com.
ec2-52-44-11-85.compute-1.amazonaws.com.
ec2-52-55-36-20.us-west-2.compute.amazonaws.com.
ec2-52-11-19-24.us-west-2.compute.amazonaws.com.
ec2-52-2-21-13.compute-1.amazonaws.com.
ec2-54-33-249-49.us-west-2.compute.amazonaws.com.
ec2-54-180-165-17.us-west-2.compute.amazonaws.com.
ec2-54-2-177-91.compute-1.amazonaws.com.
ec2-54-8-163-15.compute-1.amazonaws.com.
syd11s01-in-f124.1e110.net.
syd11s02-in-f5.1e110.net.
syd12s02-in-f3.1e110.net.
...
</code></pre></div></div>

<p>Thatâ€™s all for today.</p>

<p>Happy hacking!</p>
</div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/04/24/using-active-choices-with-role-strategy-plugin.html">
      Using Active Choices with Role Strategy Plug-in
    </a>
  </h3><span class="post-meta">Apr 24, 2016<span>&mdash; star date: -306606.56.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>Having worked in Open Source for a few years, one of my favorite things is when you can
share experience with other people that you meet. <a href="https://github.com/agray">Andrew Gray</a>
has worked with .NET and Jenkins for years, and we met through Open Source. He has helped me
in the past with Jenkins and .NET, and also maintains the blog
<a href="http://jenkinsheaven.blogspot.co.nz/">Jenkins.NET</a>.</p>

<p>A couple of days ago he sent me an interesting question. He asked me if that would be possible
to use Active Choices Plug-in with the <a href="https://wiki.jenkins-ci.org/display/JENKINS/Role+Strategy+Plugin">Role Strategy Plug-in</a>.
This plug-in lets you define roles, define which permissions a role has, and then assign users to the roles.</p>

<p class="more-link">
    <a class="post-link" href="/2016/04/24/using-active-choices-with-role-strategy-plugin.html">Continue reading&hellip;</a>
  </p></div>
<div class="post">
  <h3 class="post-header">
    <a class="post-link" href="/2016/04/17/trying-saltstack-with-docker.html">
      Trying SaltStack with Docker
    </a>
  </h3><span class="post-meta">Apr 17, 2016<span>&mdash; star date: -306625.68.</span></span>
  <span class="post-meta">Number of words: 0.</span><p>Some weeks ago I started learning <a href="http://saltstack.com/">SaltStack</a> for a project at work. But I couldnâ€™t
find a good Docker image for that and I had to ask the Ops team for some VMâ€™s. We
are having a rainy weekend in Auckland, so I decided to have another look at the
<a href="https://wiki.jenkins-ci.org/display/JENKINS/saltstack-plugin">Jenkins SaltStack Plug-in</a>.</p>

<p>But now since I was at home, I couldnâ€™t use the VMâ€™s that I had access to at
work. So decided to look again at Docker or Vagrant images. After playing
with a few images, I found <a href="https://hub.docker.com/r/bbinet/salt-master/">bbinet/salt-master</a>.
It not only sets up a master, but also provides an easy way to enable the cherrypy
API (necessary for the Jenkins plug-in).</p>

<p>This post describes the steps that I took to have a running Salt Master with the API
enabled. First you need to create some directories and files to use with the image.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shell<span class="nv">$ </span><span class="nb">mkdir</span> ~/master <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/master
shell<span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> config/master.d/
shell<span class="nv">$ </span>vim config/master.d/api.conf
</code></pre></div></div>

<p>The api.conf contains the SaltStack API configuration. You can change port, user
and other settings if necessary. Just remember to add a credential in Jenkins
for the plug-in.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># File: api.conf</span>
external_auth:
  pam:
    saltapiuser:
      - .<span class="k">*</span>
      - <span class="s1">'@runner'</span>
      - <span class="s1">'@wheel'</span>
      - <span class="s1">'@jobs'</span>
rest_cherrypy:
  port: 8000
  host: 0.0.0.0
  disable_ssl: True
  static: /opt/molten
  static_path: /assets
  app: /opt/molten/index.html
  app_path: /molten
</code></pre></div></div>

<p>The image also conveniently provides a script that is executed before the
entry point (if provided). So we can also create a user for the API automatically
when the image is created.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shell<span class="nv">$ </span>vim config/before-exec.sh
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># File: before-exec.sh</span>
useradd saltapiuser
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"nosecret</span><span class="se">\n</span><span class="s2">nosecret</span><span class="se">\n</span><span class="s2">"</span> | passwd saltapiuser
<span class="nb">exit </span>0
</code></pre></div></div>

<p>Also make the script executable.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x config/before-exec.sh
</code></pre></div></div>

<p>And finally start the container.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--name</span> salt-master <span class="nt">-v</span> <span class="nv">$PWD</span>/config:/config <span class="se">\</span>
    <span class="nt">-p</span> 4505:4505 <span class="nt">-p</span> 4506:4506 <span class="nt">-p</span> 443:443 <span class="nt">-p</span> 8000:8000 <span class="se">\</span>
    bbinet/salt-master
</code></pre></div></div>

<p>Once the container is running, you can go to http://localhost:8000 and
log in as saltapiuser:nosecret, and also configure your plug-in
in Jenkins.</p>

<p>Happy hacking!</p>
</div>
<!-- Pagination links -->
  <div class="pagination">
    <p>
      
      <a href="/blog/page/14/" class="icon item">
        <i class="left chevron icon"></i>Previous
      </a>
      
      <span class="page_number ">Page: 15 of 28</span>
      
      <a href="/blog/page/16/" class="next">
        Next<i class="right chevron icon"></i>
      </a>
      
    </p>
  </div></div>

  </div>
</div>
</body>
</html>
