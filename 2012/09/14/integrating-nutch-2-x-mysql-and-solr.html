<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Integrating Nutch 2.x, MySQL and Solr | kinow</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Integrating Nutch 2.x, MySQL and Solr" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Right now we are working on a new project using Apache Nutch 2.x, Apache Hadoop, Apache Solr 4 and a lot of other cool tools/modules/API’s/etc. After following the instructions found on http://nlp.solutions.asia/?p=180, I’ve successfully connected Apache Nutch, MySQL and Apache Solr." />
<meta property="og:description" content="Right now we are working on a new project using Apache Nutch 2.x, Apache Hadoop, Apache Solr 4 and a lot of other cool tools/modules/API’s/etc. After following the instructions found on http://nlp.solutions.asia/?p=180, I’ve successfully connected Apache Nutch, MySQL and Apache Solr." />
<link rel="canonical" href="https://kinoshita.eti.br/2012/09/14/integrating-nutch-2-x-mysql-and-solr.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2012/09/14/integrating-nutch-2-x-mysql-and-solr.html" />
<meta property="og:site_name" content="kinow" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-09-14T00:00:00+12:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Integrating Nutch 2.x, MySQL and Solr" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2012/09/14/integrating-nutch-2-x-mysql-and-solr.html"},"description":"Right now we are working on a new project using Apache Nutch 2.x, Apache Hadoop, Apache Solr 4 and a lot of other cool tools/modules/API’s/etc. After following the instructions found on http://nlp.solutions.asia/?p=180, I’ve successfully connected Apache Nutch, MySQL and Apache Solr.","@type":"BlogPosting","url":"https://kinoshita.eti.br/2012/09/14/integrating-nutch-2-x-mysql-and-solr.html","headline":"Integrating Nutch 2.x, MySQL and Solr","dateModified":"2012-09-14T00:00:00+12:00","datePublished":"2012-09-14T00:00:00+12:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="kinow" /><link href="https://unpkg.com/pattern.css" rel="stylesheet">

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Integrating Nutch 2.x, MySQL and Solr</h1>
    <span class="post-meta">
      <time class="dt-published" datetime="2012-09-14T00:00:00+12:00" itemprop="datePublished">Sep 14, 2012
      </time>
      <span>&mdash; star date: -310215.85.</span>
      <span>
        Number of words: 262.
      </span></span>
  </header>

  


  <div class="post-content e-content" itemprop="articleBody">
    <p>Right now we are working on a new project using <a href="http://nutch.apache.org" title="Apache Nutch">Apache Nutch</a> 2.x, <a href="http://hadoop.apache.org" title="Apache Hadoop">Apache Hadoop</a>, <a href="http://solr.apache.org" title="Apache Solr">Apache Solr</a> 4 and a lot of other cool tools/modules/API’s/etc. After following the instructions found on <a href="http://nlp.solutions.asia/?p=180" title="http://nlp.solutions.asia/?p=180">http://nlp.solutions.asia/?p=180</a>, I’ve successfully connected Apache Nutch, MySQL and Apache Solr.</p>

<p><img class="ui fluid image" src="/assets/posts/2012-09-14-integrating-nutch-2-x-mysql-and-solr/mysql_hadoop_solr_nutch.png" /></p>

<!--more-->

<p>In summary:</p>

<ul>
<li>Create a database to hold your data</li>
<li>Use SQLDataStore and add configuration for your MySQL server</li>
<li>Update Apache Nutch configuration</li>
<li>Update Solr schema</li>
</ul>

<p>Now our Apache Nutch uses MySQL as data store (the place where it keeps the result of the crawling process, such as URL,  text content, metadata, and so on). That’s grand, but there is one part missing in the Solr Schema provided in the blog post.</p>

<p>Due to <a href="https://issues.apache.org/jira/browse/SOLR-3432" title="SOLR-3432">SOLR-3432</a>, after following the tutorial and replacing the schema, we couldn’t delete the whole index anymore. After following the instructions in the bug comments, and adding the following entry in schema.xml it worked again.</p>

<!--more-->

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">"_version_"</span> <span class="na">type=</span><span class="s">"long"</span> <span class="na">indexed=</span><span class="s">"true"</span> <span class="na">stored=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>Restart Apache Solr and run the following command and your index will be reset.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8983/solr/collection1/update?commit<span class="o">=</span><span class="nb">true</span> <span class="nt">-H</span> <span class="s2">"Content-Type: text/xml"</span> <span class="nt">--data-binary</span> <span class="s2">"&lt;delete&gt;&lt;query&gt;*:*&lt;/query&gt;&lt;/delete&gt;"</span>
</code></pre></div></div>

<p>Hope it helps if you are creating a similar set up. In the next posts we will explain how to set up Apache Nutch 2.x branch in Eclipse. It is very helpful for writing and debugging plug-ins.</p>

<p>Laters! -B</p>

  </div>

  <div class="tags">
    <p>
      Published Sep 14, 2012 in &ldquo;blog&rdquo; and tagged&nbsp;<a class="label" href="/tags#apache software foundation">apache software foundation</a>,&nbsp;<a class="label" href="/tags#web crawling">web crawling</a>. Number of words: 262.
    </p>
  </div>

  <a class="u-url" href="/2012/09/14/integrating-nutch-2-x-mysql-and-solr.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
