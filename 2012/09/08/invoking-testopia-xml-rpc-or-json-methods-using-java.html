<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Invoking Testopia XML-RPC or JSON methods using Java | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Invoking Testopia XML-RPC or JSON methods using Java" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Most TestLink [1] users are aware that there is an external API, maybe for the external API token being displayed in the user profile section. Today after a meeting with Peter Florijn [2], I realized that the same may not be true for Testopia [3] users. I am quite new to Testopia, and there are many features that I haven’t used yet. But if I understand it correctly, the database is interfaced by several Perl scripts that are, by its turns, exposed as Web Service (most of them). The web services are available via a JSON and a XML-RPC API (what is very useful, TestLink supports supports only XML-RPC). The communication between different programming languages and the external API’s is accomplished by a client API. In TestLink you have testlink-java-api [4] and testlink-api-java-client [5]. Testopia has a Java client too, available in Testopia source repository [6] and can be used to integrate your existing Java code with Testopia." />
<meta property="og:description" content="Most TestLink [1] users are aware that there is an external API, maybe for the external API token being displayed in the user profile section. Today after a meeting with Peter Florijn [2], I realized that the same may not be true for Testopia [3] users. I am quite new to Testopia, and there are many features that I haven’t used yet. But if I understand it correctly, the database is interfaced by several Perl scripts that are, by its turns, exposed as Web Service (most of them). The web services are available via a JSON and a XML-RPC API (what is very useful, TestLink supports supports only XML-RPC). The communication between different programming languages and the external API’s is accomplished by a client API. In TestLink you have testlink-java-api [4] and testlink-api-java-client [5]. Testopia has a Java client too, available in Testopia source repository [6] and can be used to integrate your existing Java code with Testopia." />
<link rel="canonical" href="https://kinoshita.eti.br/2012/09/08/invoking-testopia-xml-rpc-or-json-methods-using-java.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2012/09/08/invoking-testopia-xml-rpc-or-json-methods-using-java.html" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-09-08T22:08:09-05:00" />
<script type="application/ld+json">
{"datePublished":"2012-09-08T22:08:09-05:00","headline":"Invoking Testopia XML-RPC or JSON methods using Java","description":"Most TestLink [1] users are aware that there is an external API, maybe for the external API token being displayed in the user profile section. Today after a meeting with Peter Florijn [2], I realized that the same may not be true for Testopia [3] users. I am quite new to Testopia, and there are many features that I haven’t used yet. But if I understand it correctly, the database is interfaced by several Perl scripts that are, by its turns, exposed as Web Service (most of them). The web services are available via a JSON and a XML-RPC API (what is very useful, TestLink supports supports only XML-RPC). The communication between different programming languages and the external API’s is accomplished by a client API. In TestLink you have testlink-java-api [4] and testlink-api-java-client [5]. Testopia has a Java client too, available in Testopia source repository [6] and can be used to integrate your existing Java code with Testopia.","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2012/09/08/invoking-testopia-xml-rpc-or-json-methods-using-java.html"},"@type":"BlogPosting","url":"https://kinoshita.eti.br/2012/09/08/invoking-testopia-xml-rpc-or-json-methods-using-java.html","dateModified":"2012-09-08T22:08:09-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /></head>
<body>
<div id="wrapper">
  <div id="sidebar"><div id="menu">
  <ul class="menu">
    <li class="item">
      <a href="/" aria-label="Home page link">
        <svg id="svg8" version="1.1" viewBox="0 0 58.208 9.2604" xmlns="http://www.w3.org/2000/svg" role="img"
             aria-labelledby="svg-logo-title svg-logo-desc">
          <title id="svg-logo-title">KINOSHITA image</title>
          <desc id="svg-logo-desc">A logo with the word KINOSHITA</desc>
          <g id="layer1" transform="translate(0 -287.74)">
            <g id="text817" transform="translate(-2.4568 -.23624)">
              <g id="logo" transform="matrix(2.6585 0 0 2.5911 -63.587 100.56)" fill="#000000" stroke-width=".26458px">
                <path role="presentation" id="path819"
                      d="m25.178 72.637h0.54187v2.9633h-0.54187zm0.5842 1.397 1.0964-1.397h0.635l-1.1049 1.397 1.1049 1.5663h-0.635z"/>
                <path role="presentation" id="path821" d="m27.832 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path823"
                      d="m29.023 72.637h0.5334l1.2658 1.9135v-1.9135h0.54187v2.9633h-0.4445l-1.3547-2.032v2.032h-0.54187z"/>
                <path role="presentation" id="path825"
                      d="m33.298 75.66q-0.4191 0-0.75353-0.1905-0.3302-0.19473-0.5207-0.54187-0.18627-0.35137-0.18627-0.80857t0.18627-0.80433q0.1905-0.35137 0.5207-0.54187 0.33443-0.19473 0.75353-0.19473t0.7493 0.19473q0.33443 0.1905 0.5207 0.54187 0.1905 0.34713 0.1905 0.80433t-0.1905 0.80857q-0.18627 0.34713-0.5207 0.54187-0.3302 0.1905-0.7493 0.1905zm0-0.52493q0.4318 0 0.6604-0.2794 0.23283-0.2794 0.23283-0.7366t-0.23283-0.7366q-0.2286-0.2794-0.6604-0.2794t-0.66463 0.2794q-0.2286 0.2794-0.2286 0.7366t0.2286 0.7366q0.23283 0.2794 0.66463 0.2794z"/>
                <path role="presentation" id="path827"
                      d="m36.091 75.66q-0.24977 0-0.53763-0.06773-0.28363-0.06773-0.4445-0.14817l0.0635-0.57573q0.5588 0.27093 0.98213 0.27093 0.22437 0 0.35137-0.08467 0.127-0.0889 0.127-0.25823 0-0.127-0.07197-0.20743-0.06773-0.08467-0.19897-0.1397-0.13123-0.05927-0.4191-0.16087-0.27093-0.09313-0.44873-0.19473-0.1778-0.10583-0.28363-0.2667-0.1016-0.1651-0.1016-0.40217 0-0.381 0.2794-0.61383t0.8001-0.23283q0.24553 0 0.48683 0.05503 0.24553 0.05503 0.44873 0.13547l-0.05503 0.55457q-0.26247-0.1143-0.4826-0.16933-0.2159-0.05927-0.4318-0.05927-0.2413 0-0.3683 0.08043t-0.127 0.23283q0 0.11853 0.06773 0.19473t0.18203 0.127q0.11853 0.0508 0.34713 0.12277 0.51223 0.16087 0.74507 0.37253 0.23707 0.20743 0.23707 0.5715 0 0.34713-0.2413 0.60537t-0.90593 0.25823z"/>
                <path role="presentation" id="path829"
                      d="m37.688 72.637h0.54187v1.1726h1.3547v-1.1726h0.54187v2.9633h-0.54187v-1.2827h-1.3547v1.2827h-0.54187z"/>
                <path role="presentation" id="path831" d="m40.78 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path833"
                      d="m42.546 73.162h-0.8382v-0.52493h2.2183v0.52493h-0.8382v2.4384h-0.54187z"/>
                <path role="presentation" id="path835"
                      d="m45.632 74.898h-1.0795l-0.24553 0.70273h-0.52493l1.0541-2.9633h0.51223l1.0541 2.9633h-0.52493zm-0.16933-0.47413-0.3683-1.0583-0.37253 1.0583z"/>
              </g>
            </g>
          </g>
        </svg>
      </a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
      <ul>
        <li class="item">
          <a href="/blog/drawing/">Drawing</a>
        </li>
        <li class="item">
          <a href="/blog/languages/">Languages</a>
        </li>
        <li class="item">
          <a href="/blog/music/">Music</a>
        </li>
        <li class="item">
          <a href="/blog/writing/">Writing</a>
        </li>
      </ul>
    </li>
    <li class="item">
      <a href="/art/" class="">Illustrations</a>
    </li>
    <li class="item">
      <a href="/maps/" class="">Maps</a>
    </li>
  </ul>
  <div id="menu-bottom">
    <p id="feed-subscribe">
      <a href="/feed.xml">
        <svg id="feed-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px"
             viewBox="0 0 256 256">
          <circle cx="68" cy="189" r="24" fill="rgba(255, 255, 255, .2)"/>
          <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="rgba(255, 255, 255, .2)"/>
          <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="rgba(255, 255, 255, .2)"/>
        </svg>
      </a>
    </p>
  </div>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Invoking Testopia XML-RPC or JSON methods using Java</h1>
    <spab class="post-meta">
      <time class="dt-published" datetime="2012-09-08T22:08:09-05:00" itemprop="datePublished">Sep 8, 2012
      </time>
      4<span>&mdash; star date: -310234.97</span></spab>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Most <a href="http://www.teamst.org" title="TestLink">TestLink</a> [1] users are aware that there is an external API, maybe for the external API token being displayed in the user profile section. Today after a meeting with <a href="http://twitter.com/peterflorijn" title="Peter Florijn">Peter Florijn</a> [2], I realized that the same may not be true for <a href="http://www.mozilla.org/projects/testopia/" title="Testopia">Testopia</a>  [3] users.</p>

<p>I am quite new to Testopia, and there are many features that I haven’t used yet. But if I understand it correctly, the database is interfaced by several Perl scripts that are, by its turns, exposed as Web Service (most of them). The web services are available via a JSON and a XML-RPC API (what is very useful, TestLink supports supports only XML-RPC).</p>

<p>The communication between different programming languages and the external API’s is accomplished by a client API. In TestLink you have <a href="http://testlinkjavaapi.sourceforge.net/" title="TestLink Java API">testlink-java-api</a> [4] and <a href="http://code.google.com/p/testlink-api-java-client/" title="TestLink API Java Client">testlink-api-java-client</a> [5].</p>

<p>Testopia has a Java client too, available in <a href="http://bzr.mozilla.org/bugzilla/extensions/testopia/2.2-bugzilla-3.2/files/head:/testopia/contrib/drivers/java/" title="Testopia source repository">Testopia source repository</a> [6] and can be used to integrate your existing Java code with Testopia.</p>

<!--more-->

<p><img src="/assets/posts/2012-09-08-invoking-testopia-xml-rpc-or-json-methods-using-java/testopia_java_300_120.png" /></p>

<p>Peter and I have been working on <a href="https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin" title="Jenkins Testopia Plug-in">Jenkins Testopia Plug-in</a> [7], released few weeks ago and with its new version being released at this very moment. It’s been fun to write this new plug-in, and we are using a type of Scrum to manage the project, what makes it even more interesting.</p>

<p>During the project feature definition and initial structure, we created a new implementation, motivated by the following reasons (in no special order):</p>

<ul>
<li>Provide an API for Maven developers</li>
<li>Publish this new API to Maven central repository (so Gradle, Ivy and Maven users could use it too)</li>
<li>Use a non DDD (Domain Driven Design) approach, as it helps debugging serialization issues in Jenkins (only one element talks to Testopia. So we put this element in Jenkins master, and don't have to worry about calls to objects methods serialized to slaves)</li>
<li>Test doubles, so we could increase test coverage without the need of a Testopia instance running</li>
</ul>

<p>We haven’t released this API to Maven central yet, as we still have to polish the code, add tests and more methods. But you can already start playing with this API, the code is at GitHub, <a href="http://www.github.com/kinow/testopia-java-driver" title="Testopia Java Driver">http://www.github.com/kinow/testopia-java-driver</a> [8], and here’s a Snippet of code to get you started with the API.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">TestopiaAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="s">"http://localhost/bugzilla-4.2.1/xmlrpc.cgi"</span><span class="o">);</span>
<span class="n">api</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"pass"</span><span class="o">);</span>
<span class="nc">TestRun</span> <span class="n">testCaseRun</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">getTestRun</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="nc">TestCase</span><span class="o">[]</span> <span class="n">testCases</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">getTestCases</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getTestRunId</span><span class="o">());</span>
<span class="k">for</span><span class="o">(</span><span class="nc">TestCase</span> <span class="n">testCase</span> <span class="o">:</span> <span class="n">testCases</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">Status</span> <span class="n">status</span> <span class="o">=</span> <span class="nc">Status</span><span class="o">.</span><span class="na">BLOCKED</span><span class="o">;</span>
  <span class="n">testCase</span><span class="o">.</span><span class="na">setStatusId</span><span class="o">(</span><span class="n">status</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
  <span class="n">api</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">testCase</span><span class="o">,</span> <span class="n">testCase</span><span class="o">.</span><span class="na">getRunId</span><span class="o">(),</span> <span class="n">testCase</span><span class="o">.</span><span class="na">getBuildId</span><span class="o">(),</span> <span class="n">testCase</span><span class="o">.</span><span class="na">getEnvId</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Have fun!</p>

<ul>
  <li>[1] http://www.teamst.org</li>
  <li>[2] http://twitter.com/peterflorijn</li>
  <li>[3] http://www.mozilla.org/projects/testopia/</li>
  <li>[4] http://testlinkjavaapi.sourceforge.net/</li>
  <li>[5] http://code.google.com/p/testlink-api-java-client/</li>
  <li>[6] http://bzr.mozilla.org/bugzilla/extensions/testopia/2.2-bugzilla-3.2/files/head:/testopia/contrib/drivers/java/</li>
  <li>[7] https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin</li>
  <li>[8] http://www.github.com/kinow/testopia-java-driver</li>
</ul>

  </div>

  <div class="tags"><a class="label" href="/tags#java">java</a></div>

  <a class="u-url" href="/2012/09/08/invoking-testopia-xml-rpc-or-json-methods-using-java.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
