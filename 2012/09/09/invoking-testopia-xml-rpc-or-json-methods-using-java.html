<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:title" content="Invoking Testopia XML-RPC or JSON methods using Java">
<meta property="og:description" content="Most TestLink [1] users are aware that there is an external API, maybe for the external API token being displayed in the user profile section. Today after a meeting with Peter Florijn [2], I realized that the same may not be true for Testopia  [3] users.
I am quite new to Testopia, and there are many features that I haven&rsquo;t used yet. But if I understand it correctly, the database is interfaced by several Perl scripts that are, by its turns, exposed as Web Service (most of them). The web services are available via a JSON and a XML-RPC API (what is very useful, TestLink supports supports only XML-RPC).
The communication between different programming languages and the external API&rsquo;s is accomplished by a client API. In TestLink you have testlink-java-api [4] and testlink-api-java-client [5].
Testopia has a Java client too, available in Testopia source repository [6] and can be used to integrate your existing Java code with Testopia.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kinoshita.eti.br/2012/09/09/invoking-testopia-xml-rpc-or-json-methods-using-java.html"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2012-09-09T00:00:00+00:00">
<meta property="article:modified_time" content="2012-09-09T00:00:00+00:00">
<link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.b4ba95d89a5e09411badc5c1b726b7d80cafc4d07ce873384e99b41f20d0e27c.css integrity="sha256-tLqV2JpeCUEbrcXBtya32AyvxNB86HM4Tpm0HyDQ4nw=">
<title>kinow | Invoking Testopia XML-RPC or JSON methods using Java</title>
</head>
<body>
<header role=banner class=content>
<nav id=nav aria-label=Main role=navigation class=content>
<ul><li>
<a href=/><i data-feather=about></i> About</a>
</li><li>
<a href=/blog/><i data-feather=blog></i> Blog</a>
</li><li>
<a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a>
</li>
</ul>
</nav>
</header>
<main>
<article class=content>
<h2>Invoking Testopia XML-RPC or JSON methods using Java</h2><div class=metadata>
<i data-feather=calendar></i>
<time datetime=2012-09-09>Sep 9, 2012</time>
</div>
<p>Most <a href=http://www.teamst.org title=TestLink>TestLink</a> [1] users are aware that there is an external API, maybe for the external API token being displayed in the user profile section. Today after a meeting with <a href=http://twitter.com/peterflorijn title="Peter Florijn">Peter Florijn</a> [2], I realized that the same may not be true for <a href=http://www.mozilla.org/projects/testopia/ title=Testopia>Testopia</a> [3] users.</p>
<p>I am quite new to Testopia, and there are many features that I haven&rsquo;t used yet. But if I understand it correctly, the database is interfaced by several Perl scripts that are, by its turns, exposed as Web Service (most of them). The web services are available via a JSON and a XML-RPC API (what is very useful, TestLink supports supports only XML-RPC).</p>
<p>The communication between different programming languages and the external API&rsquo;s is accomplished by a client API. In TestLink you have <a href=http://testlinkjavaapi.sourceforge.net/ title="TestLink Java API">testlink-java-api</a> [4] and <a href=http://code.google.com/p/testlink-api-java-client/ title="TestLink API Java Client">testlink-api-java-client</a> [5].</p>
<p>Testopia has a Java client too, available in <a href=http://bzr.mozilla.org/bugzilla/extensions/testopia/2.2-bugzilla-3.2/files/head:/testopia/contrib/drivers/java/ title="Testopia source repository">Testopia source repository</a> [6] and can be used to integrate your existing Java code with Testopia.</p>
<figure class=feature>
<img src=/assets/posts/2012-09-09-invoking-testopia-xml-rpc-or-json-methods-using-java/testopia_java_300_120.png alt title width height>
<figcaption></figcaption>
</figure>
<p>Peter and I have been working on <a href=https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin title="Jenkins Testopia Plug-in">Jenkins Testopia Plug-in</a> [7], released few weeks ago and with its new version being released at this very moment. It&rsquo;s been fun to write this new plug-in, and we are using a type of Scrum to manage the project, what makes it even more interesting.</p>
<p>During the project feature definition and initial structure, we created a new implementation, motivated by the following reasons (in no special order):</p>
<ul>
<li>Provide an API for Maven developers</li>
<li>Publish this new API to Maven central repository (so Gradle, Ivy and Maven users could use it too)</li>
<li>Use a non DDD (Domain Driven Design) approach, as it helps debugging serialization issues in Jenkins (only one element talks to Testopia. So we put this element in Jenkins master, and don't have to worry about calls to objects methods serialized to slaves)</li>
<li>Test doubles, so we could increase test coverage without the need of a Testopia instance running</li>
</ul>
<p>We haven&rsquo;t released this API to Maven central yet, as we still have to polish the code, add tests and more methods. But you can already start playing with this API, the code is at GitHub, <a href=http://www.github.com/kinow/testopia-java-driver title="Testopia Java Driver"><a href=http://www.github.com/kinow/testopia-java-driver>http://www.github.com/kinow/testopia-java-driver</a></a> [8], and here&rsquo;s a Snippet of code to get you started with the API.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>TestopiaAPI api = <span style=color:navy;font-weight:700>new</span> URL(<span style=color:#00f>&#34;http://localhost/bugzilla-4.2.1/xmlrpc.cgi&#34;</span>);
api.<span style=color:red>login</span>(<span style=color:#00f>&#34;root&#34;</span>, <span style=color:#00f>&#34;pass&#34;</span>);
TestRun testCaseRun = api.<span style=color:red>getTestRun</span>(1);
TestCase[] testCases = api.<span style=color:red>getTestCases</span>(<span style=color:navy;font-weight:700>this</span>.<span style=color:red>getTestRunId</span>());
<span style=color:navy;font-weight:700>for</span>(TestCase testCase : testCases) {
  Status status = Status.<span style=color:red>BLOCKED</span>;
  testCase.<span style=color:red>setStatusId</span>(status.<span style=color:red>getValue</span>());
  api.<span style=color:red>update</span>(testCase, testCase.<span style=color:red>getRunId</span>(), testCase.<span style=color:red>getBuildId</span>(), testCase.<span style=color:red>getEnvId</span>());
}
</code></pre></div><p>Have fun!</p>
<ul>
<li>[1] <a href=http://www.teamst.org>http://www.teamst.org</a></li>
<li>[2] <a href=http://twitter.com/peterflorijn>http://twitter.com/peterflorijn</a></li>
<li>[3] <a href=http://www.mozilla.org/projects/testopia/>http://www.mozilla.org/projects/testopia/</a></li>
<li>[4] <a href=http://testlinkjavaapi.sourceforge.net/>http://testlinkjavaapi.sourceforge.net/</a></li>
<li>[5] <a href=http://code.google.com/p/testlink-api-java-client/>http://code.google.com/p/testlink-api-java-client/</a></li>
<li>[6] <a href=http://bzr.mozilla.org/bugzilla/extensions/testopia/2.2-bugzilla-3.2/files/head:/testopia/contrib/drivers/java/>http://bzr.mozilla.org/bugzilla/extensions/testopia/2.2-bugzilla-3.2/files/head:/testopia/contrib/drivers/java/</a></li>
<li>[7] <a href=https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin>https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin</a></li>
<li>[8] <a href=http://www.github.com/kinow/testopia-java-driver>http://www.github.com/kinow/testopia-java-driver</a></li>
</ul>
<aside class=links>
<a class=previous href=https://kinoshita.eti.br/2012/08/08/how-i-started-in-open-source.html>&#171; Previous</a>
<a class=next href=https://kinoshita.eti.br/2012/09/14/integrating-nutch-2.x-mysql-and-solr.html>Next &#187;</a>
</aside>
</article>
</main>
<footer role=contentinfo>
<ul id=social-media-icons>
<li>
<a href=https://www.instagram.com/brunokinoshita/>
<img src=/assets/icons/instagram.png alt="Instagram link">
</a>
</li>
<li>
<a href=https://twitter.com/kinow/>
<img src=/assets/icons/twitter.png alt="Twitter link">
</a>
</li>
<li>
<a href=https://github.com/kinow/>
<img src=/assets/icons/github.png alt="GitHub link">
</a>
</li>
<li>
<a href=/feed.xml>
<img src=/assets/icons/news.png alt="RSS feed link">
</a>
</li>
</ul>
</footer>
</body>
</html>