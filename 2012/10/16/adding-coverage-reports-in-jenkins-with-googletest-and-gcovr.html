<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2012/10/16/adding-coverage-reports-in-jenkins-with-googletest-and-gcovr.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Adding coverage reports in Jenkins with GoogleTest and gcovr"><meta property="og:description" content="After the [last post]({% post_url 2012-10-11-jenkins-testlink-and-gtest-in-5-minutes-or-so %}) about GoogleTest and TestLink using Jenkins TestLink Plug-in, I received an e-mail asking about coverage with GoogleTest and Jenkins. I&amp;rsquo;ve just updated the Makefile in the samples directory, of the GoogleTest TAP listener project, to output coverage data.
Basically, you have to add the compiler flags -fprofile-arcs -ftest-coverage and link the executable with -lgcov. Take a look at the project&amp;rsquo;s Makefile and you&amp;rsquo;ll notice how simple it is. In order to have Jenkins interpreting your coverage report, you&amp;rsquo;ll have to convert it to cobertura XML. There is a Python utility that can be used for this: gcovr. Download it and copy it to somewhere where Jenkins can execute it (e.g.: /usr/local/bin).
Now, if you&amp;rsquo;ve followed the instructions from the previous post, you should have a job that reports your GoogleTest tests from Jenkins to TestLink using the plug-in, and is downloading the source code from GitHub. Add an extra build step (Shell) to execute gcovr.
"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-10-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-12T11:37:26+02:00"><meta property="article:tag" content="Jenkins"><meta property="article:tag" content="C++"><meta property="article:tag" content="Test Anything Protocol"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Adding coverage reports in Jenkins with GoogleTest and gcovr"><meta name=twitter:description content="After the [last post]({% post_url 2012-10-11-jenkins-testlink-and-gtest-in-5-minutes-or-so %}) about
GoogleTest and TestLink using
Jenkins TestLink Plug-in, I received an e-mail
asking about coverage with GoogleTest and
Jenkins. I&rsquo;ve just updated the
Makefile in the samples
directory, of the GoogleTest TAP listener project,
to output coverage data.
Basically, you have to add the compiler flags -fprofile-arcs -ftest-coverage and link the executable with
-lgcov. Take a look at the project&rsquo;s Makefile and you&rsquo;ll notice how simple it is. In order to have Jenkins
interpreting your coverage report, you&rsquo;ll have to convert it to cobertura
XML. There is a Python utility that can be used for this: gcovr.
Download it and copy it to somewhere where Jenkins can execute it (e.g.: /usr/local/bin).
Now, if you&rsquo;ve followed the instructions from the previous post, you should have a job that reports your GoogleTest
tests from Jenkins to TestLink using the plug-in, and is downloading the source code from GitHub. Add an extra build
step (Shell) to execute gcovr."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2012/10/16/adding-coverage-reports-in-jenkins-with-googletest-and-gcovr/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.ecb27dc5d5ced6616f17336fdf32a78aff8278ec4b599f9e5cdc5bb8a09a9f28.css integrity="sha256-7LJ9xdXO1mFvFzNv3zKniv+CeOxLWZ+eXNxbuKCanyg="><title>kinow | Adding coverage reports in Jenkins with GoogleTest and gcovr</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Adding coverage reports in Jenkins with GoogleTest and gcovr","headline":"Adding coverage reports in Jenkins with GoogleTest and gcovr","alternativeHeadline":"","description":"\u003cp\u003eAfter the [last post]({% post_url 2012-10-11-jenkins-testlink-and-gtest-in-5-minutes-or-so %}) about\n\u003ca href=\u0022http:\/\/code.google.com\/p\/googletest\/\u0022\u003eGoogleTest\u003c\/a\u003e and \u003ca href=\u0022http:\/\/www.teamst.org\u0022\u003eTestLink\u003c\/a\u003e using\n\u003ca href=\u0022https:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/TestLink\u002bPlugin\u0022\u003eJenkins TestLink Plug-in\u003c\/a\u003e, I received an e-mail\nasking about \u003ca href=\u0022http:\/\/en.wikipedia.org\/wiki\/Code_coverage\u0022\u003ecoverage\u003c\/a\u003e with GoogleTest and\n\u003ca href=\u0022http:\/\/www.jenkins-ci.org\u0022\u003eJenkins\u003c\/a\u003e. I\u0026rsquo;ve just updated the\n\u003ca href=\u0022https:\/\/github.com\/kinow\/gtest-tap-listener\/blob\/master\/samples\/Makefile\u0022\u003eMakefile\u003c\/a\u003e in the samples\ndirectory, of the \u003ca href=\u0022https:\/\/github.com\/kinow\/gtest-tap-listener\u0022\u003eGoogleTest TAP listener project\u003c\/a\u003e,\nto output coverage data.\u003c\/p\u003e\n\u003cp\u003eBasically, you have to add the compiler flags \u003ccode\u003e-fprofile-arcs -ftest-coverage\u003c\/code\u003e and link the executable with\n\u003ccode\u003e-lgcov\u003c\/code\u003e. Take a look at the project\u0026rsquo;s Makefile and you\u0026rsquo;ll notice how simple it is. In order to have Jenkins\ninterpreting your coverage report, you\u0026rsquo;ll have to convert it to \u003ca href=\u0022http:\/\/cobertura.sourceforge.net\u0022\u003ecobertura\u003c\/a\u003e\nXML. There is a Python utility that can be used for this: \u003ca href=\u0022https:\/\/software.sandia.gov\/trac\/fast\/wiki\/gcovr\u0022\u003egcovr\u003c\/a\u003e.\nDownload it and copy it to somewhere where Jenkins can execute it (e.g.: \u003ccode\u003e\/usr\/local\/bin\u003c\/code\u003e).\u003c\/p\u003e\n\u003cp\u003eNow, if you\u0026rsquo;ve followed the instructions from the previous post, you should have a job that reports your GoogleTest\ntests from Jenkins to TestLink using the plug-in, and is downloading the source code from GitHub. Add an extra build\nstep (Shell) to execute \u003ccode\u003egcovr\u003c\/code\u003e.\u003c\/p\u003e","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2012\/10\/16\/adding-coverage-reports-in-jenkins-with-googletest-and-gcovr.html"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"kinow","copyrightYear":"2012","dateCreated":"2012-10-16T00:00:00.00Z","datePublished":"2012-10-16T00:00:00.00Z","dateModified":"2025-07-12T11:37:26.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2012\/10\/16\/adding-coverage-reports-in-jenkins-with-googletest-and-gcovr.html","wordCount":"323","genre":["jenkins","c\u002b\u002b","test anything protocol"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul style=position:relative><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li><li style=position:absolute;right:0;bottom:-.75rem;text-align:right><span style=text-transform:uppercase;font-weight:700;font-size:3rem;color:#fffefa;line-height:normal;letter-spacing:-.1rem>Kinow</span></li></ul></nav></header><main><article class=content><h1>Adding coverage reports in Jenkins with GoogleTest and gcovr</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2012-10-16>Oct 16, 2012</time></div><aside><nav id=TableOfContents></nav></aside><p>After the [last post]({% post_url 2012-10-11-jenkins-testlink-and-gtest-in-5-minutes-or-so %}) about
<a href=http://code.google.com/p/googletest/>GoogleTest</a> and <a href=http://www.teamst.org>TestLink</a> using
<a href=https://wiki.jenkins-ci.org/display/JENKINS/TestLink+Plugin>Jenkins TestLink Plug-in</a>, I received an e-mail
asking about <a href=http://en.wikipedia.org/wiki/Code_coverage>coverage</a> with GoogleTest and
<a href=http://www.jenkins-ci.org>Jenkins</a>. I&rsquo;ve just updated the
<a href=https://github.com/kinow/gtest-tap-listener/blob/master/samples/Makefile>Makefile</a> in the samples
directory, of the <a href=https://github.com/kinow/gtest-tap-listener>GoogleTest TAP listener project</a>,
to output coverage data.</p><p>Basically, you have to add the compiler flags <code>-fprofile-arcs -ftest-coverage</code> and link the executable with
<code>-lgcov</code>. Take a look at the project&rsquo;s Makefile and you&rsquo;ll notice how simple it is. In order to have Jenkins
interpreting your coverage report, you&rsquo;ll have to convert it to <a href=http://cobertura.sourceforge.net>cobertura</a>
XML. There is a Python utility that can be used for this: <a href=https://software.sandia.gov/trac/fast/wiki/gcovr>gcovr</a>.
Download it and copy it to somewhere where Jenkins can execute it (e.g.: <code>/usr/local/bin</code>).</p><p>Now, if you&rsquo;ve followed the instructions from the previous post, you should have a job that reports your GoogleTest
tests from Jenkins to TestLink using the plug-in, and is downloading the source code from GitHub. Add an extra build
step (Shell) to execute <code>gcovr</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>gcovr -x -r samples/src &gt; coverage.xml
</span></span></code></pre></div><figure class=feature><img src=/assets/posts/2012-10-16-adding-coverage-reports-in-jenkins-with-googletest-and-gcovr/screenshot_0031.png alt title width height><figcaption></figcaption></figure><p>This should produce a file coverage.xml in your build workspace. The last step is add cobertura post build step.
Of course you&rsquo;ll need <a href=https://wiki.jenkins-ci.org/display/JENKINS/Cobertura+Plugin>Jenkins Cobertura Plug-in</a>
(quick tip: if you are using the newest Jenkins, you can install it without restarting, it works well).
Simply add the cobertura post build step and make sure to use an include pattern that matches your output file from
gcovr (e.g.: **/coverage.xml).</p><p>Voilà , you should now have coverage reports in Jenkins that looks like the image below.</p><figure class=feature><img src=/assets/posts/2012-10-16-adding-coverage-reports-in-jenkins-with-googletest-and-gcovr/screenshot_0011.png alt title width height><figcaption></figcaption></figure><figure class=feature><img src=/assets/posts/2012-10-16-adding-coverage-reports-in-jenkins-with-googletest-and-gcovr/screenshot_0021.png alt title width height><figcaption></figcaption></figure><p>A final note, is that we used an example project bundled with GoogleTest TAP Listener, and is not very useful,
as it has no other classes being tested. In a real world project, you&rsquo;ll have many classes that you want to coverage,
while other you&rsquo;d prefer to omit from the report. You can do so by using the <code>-e</code> gcovr flag. For more, try
<code>gcovr --help</code>.</p><p>Hope that helps, have fun!</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/jenkins.html>Jenkins</a>,
<a href=/tags/c++.html>C++</a>,
<a href=/tags/test-anything-protocol.html>Test Anything Protocol</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2012/10/11/jenkins-testlink-and-gtest-in-5-minutes-or-so.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2012/10/20/replacing-a-hashset-with-a-bitset.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://bsky.app/profile/kinow.bsky.social><img src=/assets/icons/bluesky.png alt="BlueSky link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>