<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2012/12/21/using-apache-commons-functor-functional-interfaces-with-java-8-lambdas.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Using Apache Commons Functor functional interfaces with Java 8 lambdas"><meta property="og:description" content="Apache Commons Functor (hereon [functor]) is an Apache Commons component that provides a functional programming API and several patterns implemented (visitor, generator, aggregator, etc). Java 8 has several nice new features, including lambda expressions and functional interfaces. In Java 8, lambdas or lambdas expressions are closures that can be evaluated and behave like anonymous methods.
Functional interfaces are interfaces with only one method. These interfaces can be used in lambdas and save you a lot of time from writing anonymous classes or even implementing the interfaces. [functor] provides several functional interfaces (thanks to Matt Benson). It hasn't been released yet, but there are some new examples in the project site, in the trunk of the SVN. I will use one of these examples to show how [functor] functional interfaces can be used in conjunction with Java 8 lambdas.
After the example with [functor] in Java 8, I will explain how I am running Java 8 in Eclipse (it's kind of a gambiarra, but works well).
"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-12-21T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-23T17:26:18+02:00"><meta property="article:tag" content="Apache Software Foundation"><meta property="article:tag" content="Java"><meta property="article:tag" content="Functional Programming"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Using Apache Commons Functor functional interfaces with Java 8 lambdas"><meta name=twitter:description content="Apache Commons Functor (hereon [functor]) is an Apache Commons component that provides a functional programming API and several patterns implemented (visitor, generator, aggregator, etc). Java 8 has several nice new features, including lambda expressions and functional interfaces. In Java 8, lambdas or lambdas expressions are closures that can be evaluated and behave like anonymous methods.
Functional interfaces are interfaces with only one method. These interfaces can be used in lambdas and save you a lot of time from writing anonymous classes or even implementing the interfaces. [functor] provides several functional interfaces (thanks to Matt Benson). It hasn't been released yet, but there are some new examples in the project site, in the trunk of the SVN. I will use one of these examples to show how [functor] functional interfaces can be used in conjunction with Java 8 lambdas.
After the example with [functor] in Java 8, I will explain how I am running Java 8 in Eclipse (it's kind of a gambiarra, but works well)."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2012/12/21/using-apache-commons-functor-functional-interfaces-with-java-8-lambdas/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.c3626db3678f53e4a53e3e75c7b2fe34bb46566f00eb84692501404d0064c32a.css integrity="sha256-w2Jts2ePU+SlPj51x7L+NLtGVm8A64RpJQFATQBkwyo="><title>kinow | Using Apache Commons Functor functional interfaces with Java 8 lambdas</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Using Apache Commons Functor functional interfaces with Java 8 lambdas","headline":"Using Apache Commons Functor functional interfaces with Java 8 lambdas","alternativeHeadline":"","description":"\u003cp\u003e\u003ca href=\u0027http:\/\/commons.apache.org\/sandbox\/functor\/\u0027\u003eApache Commons Functor\u003c\/a\u003e (hereon [functor]) is an \u003ca href=\u0027http:\/\/commons.apache.org\/\u0027\u003eApache Commons\u003c\/a\u003e component that provides a functional programming API and several patterns implemented (visitor, generator, aggregator, etc). \u003ca href=\u0022http:\/\/openjdk.java.net\/projects\/lambda\/\u0022 title=\u0022Java 8 lambda\u0022\u003eJava 8\u003c\/a\u003e has several nice new features, including lambda expressions and \u003ca href=\u0022http:\/\/datumedge.blogspot.com.br\/2012\/06\/java-8-lambdas.html\u0022\u003efunctional interfaces\u003c\/a\u003e. In Java 8, lambdas or lambdas expressions are \u003ca href=\u0022http:\/\/tronicek.blogspot.com.br\/2007\/12\/closures-closure-is-form-of-anonymous_28.html\u0022\u003eclosures\u003c\/a\u003e that can be evaluated and behave like anonymous methods.\u003c\/p\u003e\n\u003cp\u003eFunctional interfaces are interfaces with only one method. These interfaces can be used in lambdas and save you a lot of time from writing anonymous classes or even implementing the interfaces. [functor] provides several functional interfaces (thanks to \u003ca href=\u0022https:\/\/issues.apache.org\/jira\/browse\/FUNCTOR-20\u0022\u003eMatt Benson\u003c\/a\u003e). It hasn\u0027t been released yet, but there are some new examples in the project site, in the \u003ca href=\u0022http:\/\/svn.apache.org\/viewvc\/commons\/proper\/functor\/trunk\/\u0022 title=\u0022[functor] SVN trunk\u0022\u003etrunk of the SVN\u003c\/a\u003e. I will use one of these examples to show how [functor] functional interfaces can be used in conjunction with Java 8 lambdas.\u003c\/p\u003e\n\u003cp\u003eAfter the example with [functor] in Java 8, I will explain how I am running Java 8 in Eclipse (it\u0027s kind of a \u003ca href=\u0022http:\/\/www.speaklikeabrazilian.com\/expression\/define?e=Gambiarra\u0022 title=\u0022Gambiarra\u0022\u003egambiarra\u003c\/a\u003e, but works well).\u003c\/p\u003e","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2012\/12\/21\/using-apache-commons-functor-functional-interfaces-with-java-8-lambdas.html"},"author":{"@type":"Person","name":"Bruno P. Kinoshita"},"creator":{"@type":"Person","name":"Bruno P. Kinoshita"},"accountablePerson":{"@type":"Person","name":"Bruno P. Kinoshita"},"copyrightHolder":"kinow","copyrightYear":"2012","dateCreated":"2012-12-21T00:00:00.00Z","datePublished":"2012-12-21T00:00:00.00Z","dateModified":"2024-06-23T17:26:18.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2012\/12\/21\/using-apache-commons-functor-functional-interfaces-with-java-8-lambdas.html","wordCount":"633","genre":["apache software foundation","java","functional programming"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li></ul></nav></header><main><article class=content><h1>Using Apache Commons Functor functional interfaces with Java 8 lambdas</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2012-12-21>Dec 21, 2012</time></div><aside><nav id=TableOfContents><ul><li><a href=#example-using-apache-commons-functor>Example using Apache Commons Functor</a></li><li><a href=#example-with-java-8-lambdas>Example with Java 8 lambdas</a></li></ul></nav></aside><p><a href=http://commons.apache.org/sandbox/functor/>Apache Commons Functor</a> (hereon [functor]) is an <a href=http://commons.apache.org/>Apache Commons</a> component that provides a functional programming API and several patterns implemented (visitor, generator, aggregator, etc). <a href=http://openjdk.java.net/projects/lambda/ title="Java 8 lambda">Java 8</a> has several nice new features, including lambda expressions and <a href=http://datumedge.blogspot.com.br/2012/06/java-8-lambdas.html>functional interfaces</a>. In Java 8, lambdas or lambdas expressions are <a href=http://tronicek.blogspot.com.br/2007/12/closures-closure-is-form-of-anonymous_28.html>closures</a> that can be evaluated and behave like anonymous methods.</p><p>Functional interfaces are interfaces with only one method. These interfaces can be used in lambdas and save you a lot of time from writing anonymous classes or even implementing the interfaces. [functor] provides several functional interfaces (thanks to <a href=https://issues.apache.org/jira/browse/FUNCTOR-20>Matt Benson</a>). It hasn't been released yet, but there are some new examples in the project site, in the <a href=http://svn.apache.org/viewvc/commons/proper/functor/trunk/ title="[functor] SVN trunk">trunk of the SVN</a>. I will use one of these examples to show how [functor] functional interfaces can be used in conjunction with Java 8 lambdas.</p><p>After the example with [functor] in Java 8, I will explain how I am running Java 8 in Eclipse (it's kind of a <a href="http://www.speaklikeabrazilian.com/expression/define?e=Gambiarra" title=Gambiarra>gambiarra</a>, but works well).</p><h2 id=example-using-apache-commons-functor>Example using Apache Commons Functor</h2><p>Here is a simple example with one Predicate.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000>&lt;</span><span style=color:#000>Integer</span><span style=color:#000>&gt;</span> <span style=color:#000>numbers</span> <span style=color:#000>=</span> <span style=color:#000>Arrays</span>.<span style=color:#836c28>asList</span>(<span style=color:#000>1</span>, <span style=color:#000>2</span>, <span style=color:#000>3</span>, <span style=color:#000>4</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>UnaryPredicate</span><span style=color:#000>&lt;</span><span style=color:#000>Integer</span><span style=color:#000>&gt;</span> <span style=color:#000>isEven</span> <span style=color:#000>=</span> <span style=color:#a90d91>new</span> <span style=color:#000>UnaryPredicate</span><span style=color:#000>&lt;</span><span style=color:#000>Integer</span><span style=color:#000>&gt;</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a90d91>public</span> <span style=color:#a90d91>boolean</span> <span style=color:#000>test</span>(<span style=color:#000>Integer</span> <span style=color:#000>obj</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a90d91>return</span> <span style=color:#000>obj</span> <span style=color:#000>%</span> <span style=color:#000>2</span> <span style=color:#000>==</span> <span style=color:#000>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>for</span>( <span style=color:#000>Integer</span> <span style=color:#000>number</span> : <span style=color:#000>numbers</span> ) {
</span></span><span style=display:flex><span>    <span style=color:#a90d91>if</span> (<span style=color:#000>isEven</span>.<span style=color:#836c28>test</span>(<span style=color:#000>number</span>)) {
</span></span><span style=display:flex><span>        <span style=color:#000>System</span>.<span style=color:#836c28>out</span>.<span style=color:#836c28>print</span>(<span style=color:#000>number</span> <span style=color:#000>+</span> <span style=color:#c41a16>&#34; &#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It prints only the the even numbers, those that pass by the predicate test.</p><h2 id=example-with-java-8-lambdas>Example with Java 8 lambdas</h2><p>This modified version is using Java 8 lambdas</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000>&lt;</span><span style=color:#000>Integer</span><span style=color:#000>&gt;</span> <span style=color:#000>numbers</span> <span style=color:#000>=</span> <span style=color:#000>Arrays</span>.<span style=color:#836c28>asList</span>(<span style=color:#000>1</span>, <span style=color:#000>2</span>, <span style=color:#000>3</span>, <span style=color:#000>4</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>UnaryPredicate</span><span style=color:#000>&lt;</span><span style=color:#000>Integer</span><span style=color:#000>&gt;</span> <span style=color:#000>isEven</span> <span style=color:#000>=</span> (<span style=color:#000>Integer</span> <span style=color:#000>obj</span>) <span style=color:#000>-&gt;</span> { <span style=color:#a90d91>return</span> <span style=color:#000>obj</span> <span style=color:#000>%</span> <span style=color:#000>2</span> <span style=color:#000>==</span> <span style=color:#000>0</span>; };
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#a90d91>for</span>( <span style=color:#000>Integer</span> <span style=color:#000>number</span> : <span style=color:#000>numbers</span> ) {
</span></span><span style=display:flex><span>    <span style=color:#a90d91>if</span> (<span style=color:#000>isEven</span>.<span style=color:#836c28>test</span>(<span style=color:#000>number</span>)) {
</span></span><span style=display:flex><span>        <span style=color:#000>System</span>.<span style=color:#836c28>out</span>.<span style=color:#836c28>print</span>(<span style=color:#000>number</span> <span style=color:#000>+</span> <span style=color:#c41a16>&#34; &#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The behaviour is the same. <strong>UnaryPredicate</strong> is a functional interface. Its only method is <code>boolean test(A obj);</code>. And when used in a lambda expression you just have to provide the right number of arguments and implement the closure code.</p><p>The difference in the two code snippets are the way that the UnaryPredicate for even numbers is created. Below you can see the two ways of creating this predicate, with and without Java 8 lambdas.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#177500>// pre-java-8</span>
</span></span><span style=display:flex><span><span style=color:#000>UnaryPredicate</span> <span style=color:#000>isEven</span> <span style=color:#000>=</span> <span style=color:#a90d91>new</span> <span style=color:#000>UnaryPredicate</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a90d91>public</span> <span style=color:#a90d91>boolean</span> <span style=color:#000>test</span>(<span style=color:#000>Integer</span> <span style=color:#000>obj</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a90d91>return</span> <span style=color:#000>obj</span> <span style=color:#000>%</span> <span style=color:#000>2</span> <span style=color:#000>==</span> <span style=color:#000>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500>// with lambda-8</span>
</span></span><span style=display:flex><span><span style=color:#000>UnaryPredicate</span> <span style=color:#000>isEven</span> <span style=color:#000>=</span> (<span style=color:#000>Integer</span> <span style=color:#000>obj</span>) <span style=color:#000>-&gt;</span> { <span style=color:#a90d91>return</span> <span style=color:#000>obj</span> <span style=color:#000>%</span> <span style=color:#000>2</span> <span style=color:#000>==</span> <span style=color:#000>0</span>; };
</span></span></code></pre></div><h3>Java 8 in Eclipse</h3><p>Eclipse 8 doesn't support Java 8, so you have to create a new builder in order to have Eclipse compiling your project's sources. For a complete step-by-step guide on how to set up Eclipse Juno and Java 8, please refer to <a href="http://tuhrig.de/?p=921" title="http://tuhrig.de/?p=921">http://tuhrig.de/?p=921</a>. I will summarize the steps here, and will show how to include [functor] jar to the project classpath.</p><ul><li>Download the JDK from <a href=http://jdk8.java.net/lambda title=http://jdk8.java.net/lambda>http://jdk8.java.net/lambda</a> and install it (I installed in <em>/opt/java/jdk1.8.0</em>)</li><li>Create a new Java project in Eclipse (<em>try-lambdas</em> in my case)</li><li>Disable the default <strong>Java Builder</strong> from your Eclipse project, as it doesn't work with Java 8</li><li>Create a new builder. When prompted with a screen that lets you browse for a program, select Java 8 javac (for me it was <em>/opt/java/jdk1.8.0/bin/javac</em>)</li><li>Add the arguments below to your builder:<br>```shell
-classpath %CLASSPATH%;commons-functor-1.0-SNAPSHOT-jar-with-dependencies.jar;.
-source 8
-d ${workspace_loc:/lambdas}/bin
${workspace_loc:/Java8}/src/lambdas/*.java
```</li></ul><p>You have to include [functor]'s jar, as well as its dependencies. For the sake of convenience, I used <a href=http://maven.apache.org/plugins/maven-assembly-plugin/ title=maven-assembly-plugin>maven-assembly-plugin</a> to generate a jar with dependencies for [functor]. The code and the jar are available from this <a href=https://github.com/kinow/try-lambdas title="try-lambdas GitHub repository">GitHub repository</a>. Or if you prefer generate your own [functor] jar with dependencies, check out the code from the repository as below.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>svn checkout https://svn.apache.org/repos/asf/commons/sandbox/functor/trunk/ commons-functor
</span></span></code></pre></div><p>And finally include the following to [functor] <em>pom.xml</em> before running <code>mvn clean assembly:assembly</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#000>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;artifactId&gt;</span>maven-assembly-plugin<span style=color:#000>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;version&gt;</span>2.3<span style=color:#000>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;descriptorRefs&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000>&lt;descriptorRef&gt;</span>jar-with-dependencies<span style=color:#000>&lt;/descriptorRef&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>&lt;/descriptorRefs&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>Thanks for your time, hope you enjoyed it! :-)</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/apache-software-foundation.html>Apache Software Foundation</a>,
<a href=/tags/java.html>Java</a>,
<a href=/tags/functional-programming.html>Functional Programming</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2012/11/07/running-bdd-tests-from-testlink-in-jenkins.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2013/01/17/git-clone-fails-with-fatal-unable-to-find-remote-helper-for-https.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>