  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <title>Bruno P. Kinoshita &mdash; Home</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="Bruno de Paula Kinoshita personal web site" />
    <meta name="keywords"
        content="kinoshita, bruno de paula kinoshita, geek, geek stuff, java, python, c, c++, msn now playing, neural network, mackenzie, sao paulo, brasil, brazil, nerd, nerd stuff, cool, jenkins, illustration, quadrinhos, machine learning, linguistic, apache, open source, codigo livre, codigo aberto" />
    <meta name="author" content="" />
    <meta name="generator" content="PieCrust 3.2.0" />
    <meta name="template-engine" content="Twig" />
    <meta name="robots" content="all=index,follow" />
    <meta name="revisit-after" content="15 days" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="distribution" content="Global" />
    <meta name="url" content="/" />
    <meta name="copyright" content="Bruno de Paula Kinoshita" />
    <meta name="Googlebot" content="all" />
    <meta name="rating" content="general" />
    <meta http-equiv="expires" content="0" />
    <meta name="city" content="Sao Paulo" />
    <meta name="state" content="Brasil, Sao Paulo" />
    <meta http-equiv="content-language" content="en" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta id="page_favicon" href="/favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="alternate" type="application/rss+xml" title="Bruno P. Kinoshita &raquo; Feed" href="/feed.xml" />
    <link rel="stylesheet" href="/css/semantic/dist/semantic.min.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    <link rel="stylesheet" href="/css/prettyPhoto.css" type="text/css" media="all" />
</head>
<body id="body">
    <div class="ui vertical sidebar menu" id="toc">
        <nav class="menu" role="navigation">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/art">Art</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
      <a href="/presentations/">Presentations</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
</nav>
<img src="/img/bruno.jpg" title="Hmmmm" alt="My picture" width="134px" height="215px" />
    </div>
    <div class="ui black big launch right attached fixed button">
        <i class="content icon"></i>
        <span class="text">Menu</span>
    </div>
    <div class="ui fixed inverted main menu">
        <div class="ui container">
            <a class="launch icon item">
                <i class="content icon"></i>
            </a>
            <div class="item">
                Home
            </div>
        </div>
    </div>
    <div class="pusher">
        <div class="full height">
            <div class="toc">
                <div class="ui vertical sticky fixed top menu">
                    <nav class="menu" role="navigation">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/art">Art</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
      <a href="/presentations/">Presentations</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
</nav>
<img src="/img/bruno.jpg" title="Hmmmm" alt="My picture" width="134px" height="215px" />
                </div>
            </div>
            <div class="article">
                <div class="main container" role="main">
                    <!-- right fixed menu -->
                    <div class="ui dividing right rail" id="taxonomy">
                        <div class="ui sticky fixed top">
                            <br/>
                            <h4>Blog Taxonomy</h4>
                            <nav id="tag-cloud" class="sidebar-box" role="complementary">
                              
                              <span style="font-size: 22.5pt"><a href="/tag/apache%20software%20foundation">apache software foundation</a></span>&nbsp;(25)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/articles">articles</a></span>&nbsp;(5)
                              
                              <span style="font-size: 11.5pt"><a href="/tag/aws">aws</a></span>&nbsp;(3)
                              
                              <span style="font-size: 13.5pt"><a href="/tag/c%2B%2B">c++</a></span>&nbsp;(7)
                              
                              <span style="font-size: 13.5pt"><a href="/tag/cylc">cylc</a></span>&nbsp;(7)
                              
                              <span style="font-size: 12.0pt"><a href="/tag/docker">docker</a></span>&nbsp;(4)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/events">events</a></span>&nbsp;(5)
                              
                              <span style="font-size: 11.5pt"><a href="/tag/functional%20programming">functional programming</a></span>&nbsp;(3)
                              
                              <span style="font-size: 16.5pt"><a href="/tag/illustrations">illustrations</a></span>&nbsp;(13)
                              
                              <span style="font-size: 27.5pt"><a href="/tag/java">java</a></span>&nbsp;(35)
                              
                              <span style="font-size: 13.0pt"><a href="/tag/jena">jena</a></span>&nbsp;(6)
                              
                              <span style="font-size: 23.0pt"><a href="/tag/jenkins">jenkins</a></span>&nbsp;(26)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/krita">krita</a></span>&nbsp;(5)
                              
                              <span style="font-size: 12.0pt"><a href="/tag/natural%20language%20processing">natural language processing</a></span>&nbsp;(4)
                              
                              <span style="font-size: 29.0pt"><a href="/tag/opensource">opensource</a></span>&nbsp;(38)
                              
                              <span style="font-size: 26.5pt"><a href="/tag/programming">programming</a></span>&nbsp;(33)
                              
                              <span style="font-size: 17.0pt"><a href="/tag/python">python</a></span>&nbsp;(14)
                              
                              <span style="font-size: 11.5pt"><a href="/tag/r">r</a></span>&nbsp;(3)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/security">security</a></span>&nbsp;(5)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/shell%20script">shell script</a></span>&nbsp;(5)
                              
                              <span style="font-size: 24.5pt"><a href="/tag/software%20quality">software quality</a></span>&nbsp;(29)
                              
                              <span style="font-size: 12.0pt"><a href="/tag/sparql">sparql</a></span>&nbsp;(4)
                              
                              <span style="font-size: 13.5pt"><a href="/tag/test%20anything%20protocol">test anything protocol</a></span>&nbsp;(7)
                              
                              <span style="font-size: 16.5pt"><a href="/tag/testlink">testlink</a></span>&nbsp;(13)
                              
                            </nav>
                            
                        </div>
                    </div>
                
                    
                    <div class='ui padded container'>
                        <h1 class='topic'>Home</h1>
                    </div>
                    
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/08/03/my-favourite-star-trek-captain-jean-luc-picard" title="Permanent link">My favourite Star Trek captain: Jean-Luc Picard</a>
                        </h2>
                        <small>kinow</small> @ <small>Aug 03, 2017&nbsp;21:52:03 (<span class='stardate' data-input-date='Aug 03, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/08/03/my-favourite-star-trek-captain-jean-luc-picard" data-text="My favourite Star Trek captain: Jean-Luc Picard" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>My favourite Star Trek captain: <a href="http://www.startrek.com/database_article/picard-jean-luc">Jean-Luc Picard</a>.</p>
<blockquote>&ldquo;Space, the final frontier. These are the voyages of the starship Enterprise. Its continuing mission: to explore strange new worlds, to seek out new life and new civilizations, to boldly go where no one has gone before!&rdquo;</blockquote>

<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/08/03/my-favourite-star-trek-captain-jean-luc-picard/jeanlucpicard.jpg" rel="prettyPhoto" class="thumbnail" title="Jean-Luc Picard">
<img style="height: 400px;" class="ui image" src="/2017/08/03/my-favourite-star-trek-captain-jean-luc-picard/jeanlucpicard.jpg" alt="Jean-Luc Picard" />
</a>
<figcaption>Jean-Luc Picard</figcaption>
</figure>
</div>
</div>

<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/08/03/my-favourite-star-trek-captain-jean-luc-picard/jeanlucpicard-photo.jpg" rel="prettyPhoto" class="thumbnail" title="Jean-Luc Picard">
<img style="height: 400px;" class="ui image" src="/2017/08/03/my-favourite-star-trek-captain-jean-luc-picard/jeanlucpicard-photo.jpg" alt="Jean-Luc Picard" />
</a>
<figcaption>Jean-Luc Picard</figcaption>
</figure>
</div>
</div>

<p>2B pencil, rubber eraser, blending stump, and HB 0.3 mechanical pencil. Yellow-ish layer added adjusting LAB colour space in GIMP.</p>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/science%20fiction/"
                                rel="tag">science fiction</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/illustrations/"
                                rel="tag">illustrations</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/blog"
                                title="View all posts in blog"
                                rel="category tag">blog</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/07/21/scico-2017-an-introduction-to-the-international-image-interoperability-framework-iiif" title="Permanent link">SciCo 2017: An Introduction to the International Image Interoperability Framework (IIIF)</a>
                        </h2>
                        <small>kinow</small> @ <small>Jul 21, 2017&nbsp;21:25:03 (<span class='stardate' data-input-date='Jul 21, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/07/21/scico-2017-an-introduction-to-the-international-image-interoperability-framework-iiif" data-text="SciCo 2017: An Introduction to the International Image Interoperability Framework (IIIF)" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p><strong>An Introduction to the International Image Interoperability Framework (IIIF)</strong></p>
<div class='row'>
<div class="ui embed">
<iframe src="https://kinow.github.io/scico-2017/" frameborder="0" allowfullscreen></iframe>
</div>
</div>

<dl>
<dt>Event</dt>
<dd><a href="http://nesi-cri.nz/">Science Coding Conference 2017</a></dd>
<dt>Where ?</dt>
<dd><a href="https://www.google.co.nz/maps/place/Wellington/@-41.244027,174.6217709,11z/data=!3m1!4b1!4m5!3m4!1s0x6d38b1fc49e974cb:0xa00ef63a213b470!8m2!3d-41.2864603!4d174.776236">Wellington, New Zealand</a></dd>
<dt>When ?</dt>
<dd>2017-08-04</dd>
</dl>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/iiif/"
                                rel="tag">iiif</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/presentations"
                                title="View all posts in presentations"
                                rel="category tag">presentations</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/06/27/drawing-archer" title="Permanent link">Drawing Archer</a>
                        </h2>
                        <small>kinow</small> @ <small>Jun 27, 2017&nbsp;00:09:03 (<span class='stardate' data-input-date='Jun 27, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/06/27/drawing-archer" data-text="Drawing Archer" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>Archer, from <a href="https://www.reddit.com/r/redditgetsdrawn/comments/4cwiyf/flinging_arrows_in_humid_louisiana_yesterday_my/">redditgetsdrawn</a>.</p>
<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/06/27/drawing-archer/archer1.png" rel="prettyPhoto" class="thumbnail" title="Archer drawing">
<img style="height: 400px;" class="ui image" src="/2017/06/27/drawing-archer/archer1.png" alt="Archer drawing" />
</a>
<figcaption>Archer drawing</figcaption>
</figure>
</div>
</div>

<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/06/27/drawing-archer/sBcgBwm6ZuoLOjHPf_tAS5kp6qRxUxhTpZUWj9tuADs.jpg" rel="prettyPhoto" class="thumbnail" title="Archer photo">
<img style="height: 400px;" class="ui image" src="/2017/06/27/drawing-archer/sBcgBwm6ZuoLOjHPf_tAS5kp6qRxUxhTpZUWj9tuADs.jpg" alt="Archer photo" />
</a>
<figcaption>Archer photo</figcaption>
</figure>
</div>
</div>

<p>Simplified and changed her angle. On <a href="http://kinow.deviantart.com/art/Archer1-688782846">DeviantArt</a> too.</p>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/illustrations/"
                                rel="tag">illustrations</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/blog"
                                title="View all posts in blog"
                                rel="category tag">blog</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/06/14/how-to-remove-the-signature-from-emails-with-nlp" title="Permanent link">How to remove the signature from e-mails with NLP?</a>
                        </h2>
                        <small>kinow</small> @ <small>Jun 14, 2017&nbsp;13:59:33 (<span class='stardate' data-input-date='Jun 14, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/06/14/how-to-remove-the-signature-from-emails-with-nlp" data-text="How to remove the signature from e-mails with NLP?" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>Some time ago I stumbled across <a href="https://github.com/mynameisvinn/EmailParser">EmailParser</a>, a Python utility to remove e-mail signatures. Here&#8217;s a sample input e-mail from the project documentation.</p>
<div class="highlight"><pre>Wendy – thanks for the intro! Moving you to bcc.

Hi Vincent – nice to meet you over email. Apologize for the late reply, I was on PTO for a couple weeks and this is my first week back in office. As Wendy mentioned, I am leading an AR/VR taskforce at Foobar Retail Solutions. The goal of the taskforce is to better understand how AR/VR can apply to retail/commerce and if/what is the role of a shopping center in AR/VR applications for retail.

Wendy mentioned that you would be a great person to speak to since you are close to what is going on in this space. Would love to set up some time to chat via phone next week. What does your availability look like on Monday or Wednesday?

Best,
Joe Smith

Joe Smith | Strategy &amp; Business Development
111 Market St. Suite 111| San Francisco, CA 94103
M: 111.111.1111| joe@foobar.com
</pre></div>

<p>And here&#8217;s what it looks like afterwards.</p>
<div class="highlight"><pre>Wendy – thanks for the intro! Moving you to bcc.

Hi Vincent – nice to meet you over email. Apologize for the late reply, I was on PTO for a couple weeks and this is my first week back in office. As Wendy mentioned, I am leading an AR/VR taskforce at Foobar Retail Solutions. The goal of the taskforce is to better understand how AR/VR can apply to retail/commerce and if/what is the role of a shopping center in AR/VR applications for retail.

Wendy mentioned that you would be a great person to speak to since you are close to what is going on in this space. Would love to set up some time to chat via phone next week. What does your availability look like on Monday or Wednesday?
</pre></div>

<p>As you can see, it removed all the lines after the main part of the message (i.e. after the three paragraphs). Here&#8217;s what the Python code looks like.</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">Parser</span> <span class="kn">import</span> <span class="n">read_email</span><span class="p">,</span> <span class="n">strip</span><span class="p">,</span> <span class="n">prob_block</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">spacy.en</span> <span class="kn">import</span> <span class="n">English</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">English</span><span class="p">()</span>  <span class="c"># part-of-speech tagger</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">msg_raw</span> <span class="o">=</span> <span class="n">read_email</span><span class="p">(</span><span class="s">&#39;emails/test1.txt&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">msg_stripped</span> <span class="o">=</span> <span class="n">strip</span><span class="p">(</span><span class="n">msg_raw</span><span class="p">)</span>  <span class="c"># preprocessing text before POS tagging</span>

<span class="c"># iterate through lines, write to file if not signature block</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">generate_text</span><span class="p">(</span><span class="n">msg_stripped</span><span class="p">,</span> <span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="n">pos_tagger</span><span class="p">,</span> <span class="s">&#39;emails/test1_clean.txt&#39;</span><span class="p">)</span>
</pre></div>

<p>What got me interested about this utility was the use of NLP. I couldn&#8217;t imagine how someone could use NLP for that. And I liked the simplicity of the approach, which is not perfect, but can be useful someday.</p>
<p>After the imports in the code, it creates a <a href="https://en.wikipedia.org/wiki/Part_of_speech">Part of Speech</a> tagger using <a href="https://spacy.io/">spaCy</a> NLP library, reads the e-mail from a file, and sripts and creates an array with each paragraph of the message.</p>
<p>The magic happens in the <code>generate_text</code> function, which receives the <strong>array of paragraphs</strong>, a <strong>threshold</strong>, the <strong>POS tagger</strong>, and the <strong>output destination</strong>. Here&#8217;s what the function does.</p>
<div class="highlight"><pre>for each message
    if probability ( signature block | message ) &lt; threshold
        write to output file
</pre></div>

<p>And the formula for calculating the probability is quite simple too.</p>
<div class="highlight"><pre>1. For a given paragraph (message block), find all the sentences in it.
2. Then for each word (token) in the sentence, count the number of times a non-verb appears.
3. Return the proportion of non-verbs per sentence, i.e. number of non-verbs / number of sentences.
</pre></div>

<p>In summary, it discards blocks that do not contain enough verbs to be considered a message block, being treated as signature blocks instead.</p>
<p>Never thought about using an approach like this. It may definitely be helpful when doing data analysis, information retrieval, or scraping data from the web. Not necessarily with e-mails and signatures, but you got the gist of it.</p>
<p>&hearts; Open Source</p>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/python/"
                                rel="tag">python</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/programming/"
                                rel="tag">programming</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/natural%20language%20processing/"
                                rel="tag">natural language processing</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/opensource/"
                                rel="tag">opensource</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/06/10/backward-compatibility-and-switch-statements-with-constant-expressions" title="Permanent link">Backward compatibility and switch statement with constant expressions</a>
                        </h2>
                        <small>kinow</small> @ <small>Jun 10, 2017&nbsp;17:35:39 (<span class='stardate' data-input-date='Jun 10, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/06/10/backward-compatibility-and-switch-statements-with-constant-expressions" data-text="Backward compatibility and switch statement with constant expressions" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>Maintaining Open Source software can be challenging. Making sure you keep backward compatibility (not only binary) can be even more challenging. <a href="https://commons.apache.org/proper/commons-lang/">Apache Commons Lang</a> 3.6 release is happening right now thanks to <a href="http://www.benediktritter.de/">Benedikt Ritter</a>, and it is on its fourth Release Candidate (i.e. RC4).</p>
<p>A previous RC2 was cancelled due to <a href="http://commons.markmail.org/thread/57sqt2hkusegda73#query:+page:1+mid:dnwo5tjqo2e5bwuo+state:results">IBM JDK 8 compatibility</a>, more specifically the lazy initialization of ArrayList&#8217;s seems to be different in Oracle JDK and IBM JDK.</p>
<p>The RC3 was cancelled due to a <a href="https://github.com/apache/commons-lang/commit/18e692478dcf91fdceb9b9fdca7c61a1111d63aa">change</a> that could affect users using a switch statement.</p>
<p>The change was in the <em>CharEncoding</em> class. The issue was that this class has some constants, that stopped being <a href="http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.28">constant expressions</a>.</p>
<blockquote>A constant expression is an expression denoting a value of primitive type or a String that does not complete abruptly and is composed using only the following (&#8230;)</blockquote>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CharEncoding</span> <span class="o">{</span>
    <span class="c1">// ...</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ISO_8859_1</span> <span class="o">=</span> <span class="s">&quot;ISO-8859-1&quot;</span><span class="o">;</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>

<p>The code above contains a constant (<em>static final</em>) variable, that is a constant expression. So users can safely use it in switch statements, and the Java compiler won&#8217;t complain about it.</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CharEncoding</span> <span class="o">{</span>
    <span class="c1">// ...</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ISO_8859_1</span> <span class="o">=</span> <span class="n">StandardCharsets</span><span class="o">.</span><span class="na">ISO_8859_1</span><span class="o">.</span><span class="na">name</span><span class="o">();</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>

<p>The code above is from the change that caused the regression. Any user that was using the ISO_8859_1 constant variable in a switch statement would get a compilation error (e.g. <em>case expressions must be constant expressions</em>) when updating to Apache Commons Lang 3.6. That is because the constant variable is not a constant expression.</p>
<p>I think I learned that some time ago, but if you asked me what was wrong with the change, and if it would break backward compatibility, I would probably fail to spot the issue. There are tools for that now (e.g. Clirr, japicmp) though they may miss some cases too.</p>
<p>Luckily in this case a user subscribed to the Apache Commons development mailing list spotted the issue and quickly reported it. It gets easier maintaining an Open Source project with the constructive feedback of users, like this one.</p>
<p>&hearts; Open Source</p>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/java/"
                                rel="tag">java</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/programming/"
                                rel="tag">programming</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/apache%20software%20foundation/"
                                rel="tag">apache software foundation</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/opensource/"
                                rel="tag">opensource</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                        </p>
                    </div>
                    
                    
                    <div class="ui pagination menu">
                        
                        <a class="item" href="/7"><i class='left arrow icon'></i> Previous Posts</a>
                        
                        
                        <a class="item" href="/5"><i class='right arrow icon'></i> Next Posts</a>
                        
                    </div>
                    
                
               </div>
            </div>
        </div>
        <div class="ui vertical footer segment">
            <div class="ui center aligned container">
                           <div id="copy" class="">
                <p>&copy; <a href="/about"><span
                            class="b">Bru</span><span
                            class="r">no de</span> <span
                            class="a">Paula</span> <span
                            class="s"></span><span
                            class="i">Kinos</span><span
                            class="l">hita</span></a>
                </p>
            </div>
            </div>
         </div>
    </div>
</body>
</html>
<script src="/js/jquery-2.2.3.min.js"  type="text/javascript"></script>
<script src="/css/semantic/dist/semantic.min.js"  type="text/javascript"></script>
<script src="/js/jquery.prettyPhoto.js"></script>
<script src="/js/site.js"></script>