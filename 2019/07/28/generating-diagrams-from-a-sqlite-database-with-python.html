<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Generating diagrams from a SQlite database with Python | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Generating diagrams from a SQlite database with Python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="There are tools out there that can be used to reverse engineer databases and generate diagrams. These tools normally are GUI based. But I needed one that could be used in a project build to generate a simple diagram for documentation. A tool in Python would be ideal, as that is the language the project I was working on was written in. After searching in DuckDuckGo and PYPI, I found ERAlchemy that seemed to have the features I needed - kinda." />
<meta property="og:description" content="There are tools out there that can be used to reverse engineer databases and generate diagrams. These tools normally are GUI based. But I needed one that could be used in a project build to generate a simple diagram for documentation. A tool in Python would be ideal, as that is the language the project I was working on was written in. After searching in DuckDuckGo and PYPI, I found ERAlchemy that seemed to have the features I needed - kinda." />
<link rel="canonical" href="https://kinoshita.eti.br/2019/07/28/generating-diagrams-from-a-sqlite-database-with-python.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2019/07/28/generating-diagrams-from-a-sqlite-database-with-python.html" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-28T00:00:00+12:00" />
<script type="application/ld+json">
{"dateModified":"2019-07-28T00:00:00+12:00","datePublished":"2019-07-28T00:00:00+12:00","description":"There are tools out there that can be used to reverse engineer databases and generate diagrams. These tools normally are GUI based. But I needed one that could be used in a project build to generate a simple diagram for documentation. A tool in Python would be ideal, as that is the language the project I was working on was written in. After searching in DuckDuckGo and PYPI, I found ERAlchemy that seemed to have the features I needed - kinda.","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2019/07/28/generating-diagrams-from-a-sqlite-database-with-python.html"},"url":"https://kinoshita.eti.br/2019/07/28/generating-diagrams-from-a-sqlite-database-with-python.html","headline":"Generating diagrams from a SQlite database with Python","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /></head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <a href="/" aria-label="Home page link">
        <svg id="svg8" version="1.1" viewBox="0 0 58.208 9.2604" xmlns="http://www.w3.org/2000/svg" role="img"
             aria-labelledby="svg-logo-title svg-logo-desc">
          <title id="svg-logo-title">KINOSHITA image</title>
          <desc id="svg-logo-desc">A logo with the word KINOSHITA</desc>
          <g id="layer1" transform="translate(0 -287.74)">
            <g id="text817" transform="translate(-2.4568 -.23624)">
              <g id="logo" transform="matrix(2.6585 0 0 2.5911 -63.587 100.56)" fill="#000000" stroke-width=".26458px">
                <path role="presentation" id="path819"
                      d="m25.178 72.637h0.54187v2.9633h-0.54187zm0.5842 1.397 1.0964-1.397h0.635l-1.1049 1.397 1.1049 1.5663h-0.635z"/>
                <path role="presentation" id="path821" d="m27.832 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path823"
                      d="m29.023 72.637h0.5334l1.2658 1.9135v-1.9135h0.54187v2.9633h-0.4445l-1.3547-2.032v2.032h-0.54187z"/>
                <path role="presentation" id="path825"
                      d="m33.298 75.66q-0.4191 0-0.75353-0.1905-0.3302-0.19473-0.5207-0.54187-0.18627-0.35137-0.18627-0.80857t0.18627-0.80433q0.1905-0.35137 0.5207-0.54187 0.33443-0.19473 0.75353-0.19473t0.7493 0.19473q0.33443 0.1905 0.5207 0.54187 0.1905 0.34713 0.1905 0.80433t-0.1905 0.80857q-0.18627 0.34713-0.5207 0.54187-0.3302 0.1905-0.7493 0.1905zm0-0.52493q0.4318 0 0.6604-0.2794 0.23283-0.2794 0.23283-0.7366t-0.23283-0.7366q-0.2286-0.2794-0.6604-0.2794t-0.66463 0.2794q-0.2286 0.2794-0.2286 0.7366t0.2286 0.7366q0.23283 0.2794 0.66463 0.2794z"/>
                <path role="presentation" id="path827"
                      d="m36.091 75.66q-0.24977 0-0.53763-0.06773-0.28363-0.06773-0.4445-0.14817l0.0635-0.57573q0.5588 0.27093 0.98213 0.27093 0.22437 0 0.35137-0.08467 0.127-0.0889 0.127-0.25823 0-0.127-0.07197-0.20743-0.06773-0.08467-0.19897-0.1397-0.13123-0.05927-0.4191-0.16087-0.27093-0.09313-0.44873-0.19473-0.1778-0.10583-0.28363-0.2667-0.1016-0.1651-0.1016-0.40217 0-0.381 0.2794-0.61383t0.8001-0.23283q0.24553 0 0.48683 0.05503 0.24553 0.05503 0.44873 0.13547l-0.05503 0.55457q-0.26247-0.1143-0.4826-0.16933-0.2159-0.05927-0.4318-0.05927-0.2413 0-0.3683 0.08043t-0.127 0.23283q0 0.11853 0.06773 0.19473t0.18203 0.127q0.11853 0.0508 0.34713 0.12277 0.51223 0.16087 0.74507 0.37253 0.23707 0.20743 0.23707 0.5715 0 0.34713-0.2413 0.60537t-0.90593 0.25823z"/>
                <path role="presentation" id="path829"
                      d="m37.688 72.637h0.54187v1.1726h1.3547v-1.1726h0.54187v2.9633h-0.54187v-1.2827h-1.3547v1.2827h-0.54187z"/>
                <path role="presentation" id="path831" d="m40.78 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path833"
                      d="m42.546 73.162h-0.8382v-0.52493h2.2183v0.52493h-0.8382v2.4384h-0.54187z"/>
                <path role="presentation" id="path835"
                      d="m45.632 74.898h-1.0795l-0.24553 0.70273h-0.52493l1.0541-2.9633h0.51223l1.0541 2.9633h-0.52493zm-0.16933-0.47413-0.3683-1.0583-0.37253 1.0583z"/>
              </g>
            </g>
          </g>
        </svg>
      </a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
      <ul>
        <li class="item">
          <a href="/blog/drawing/">Drawing</a>
        </li>
        <li class="item">
          <a href="/blog/languages/">Languages</a>
        </li>
        <li class="item">
          <a href="/blog/music/">Music</a>
        </li>
        <li class="item">
          <a href="/blog/writing/">Writing</a>
        </li>
      </ul>
    </li>
    <li class="item">
      <a href="/art/" class="">Illustrations</a>
    </li>
    <li class="item">
      <a href="/maps/" class="">Maps</a>
    </li>
  </ul>
  <div id="menu-bottom">
    <p id="feed-subscribe">
      <a href="/feed.xml">
        <svg id="feed-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px"
             viewBox="0 0 256 256">
          <circle cx="68" cy="189" r="24" fill="rgba(255, 255, 255, .2)"/>
          <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="rgba(255, 255, 255, .2)"/>
          <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="rgba(255, 255, 255, .2)"/>
        </svg>
      </a>
    </p>
  </div>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <a href="/" aria-label="Home page link">
        <svg id="svg8" version="1.1" viewBox="0 0 58.208 9.2604" xmlns="http://www.w3.org/2000/svg" role="img"
             aria-labelledby="svg-logo-title svg-logo-desc">
          <title id="svg-logo-title">KINOSHITA image</title>
          <desc id="svg-logo-desc">A logo with the word KINOSHITA</desc>
          <g id="layer1" transform="translate(0 -287.74)">
            <g id="text817" transform="translate(-2.4568 -.23624)">
              <g id="logo" transform="matrix(2.6585 0 0 2.5911 -63.587 100.56)" fill="#000000" stroke-width=".26458px">
                <path role="presentation" id="path819"
                      d="m25.178 72.637h0.54187v2.9633h-0.54187zm0.5842 1.397 1.0964-1.397h0.635l-1.1049 1.397 1.1049 1.5663h-0.635z"/>
                <path role="presentation" id="path821" d="m27.832 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path823"
                      d="m29.023 72.637h0.5334l1.2658 1.9135v-1.9135h0.54187v2.9633h-0.4445l-1.3547-2.032v2.032h-0.54187z"/>
                <path role="presentation" id="path825"
                      d="m33.298 75.66q-0.4191 0-0.75353-0.1905-0.3302-0.19473-0.5207-0.54187-0.18627-0.35137-0.18627-0.80857t0.18627-0.80433q0.1905-0.35137 0.5207-0.54187 0.33443-0.19473 0.75353-0.19473t0.7493 0.19473q0.33443 0.1905 0.5207 0.54187 0.1905 0.34713 0.1905 0.80433t-0.1905 0.80857q-0.18627 0.34713-0.5207 0.54187-0.3302 0.1905-0.7493 0.1905zm0-0.52493q0.4318 0 0.6604-0.2794 0.23283-0.2794 0.23283-0.7366t-0.23283-0.7366q-0.2286-0.2794-0.6604-0.2794t-0.66463 0.2794q-0.2286 0.2794-0.2286 0.7366t0.2286 0.7366q0.23283 0.2794 0.66463 0.2794z"/>
                <path role="presentation" id="path827"
                      d="m36.091 75.66q-0.24977 0-0.53763-0.06773-0.28363-0.06773-0.4445-0.14817l0.0635-0.57573q0.5588 0.27093 0.98213 0.27093 0.22437 0 0.35137-0.08467 0.127-0.0889 0.127-0.25823 0-0.127-0.07197-0.20743-0.06773-0.08467-0.19897-0.1397-0.13123-0.05927-0.4191-0.16087-0.27093-0.09313-0.44873-0.19473-0.1778-0.10583-0.28363-0.2667-0.1016-0.1651-0.1016-0.40217 0-0.381 0.2794-0.61383t0.8001-0.23283q0.24553 0 0.48683 0.05503 0.24553 0.05503 0.44873 0.13547l-0.05503 0.55457q-0.26247-0.1143-0.4826-0.16933-0.2159-0.05927-0.4318-0.05927-0.2413 0-0.3683 0.08043t-0.127 0.23283q0 0.11853 0.06773 0.19473t0.18203 0.127q0.11853 0.0508 0.34713 0.12277 0.51223 0.16087 0.74507 0.37253 0.23707 0.20743 0.23707 0.5715 0 0.34713-0.2413 0.60537t-0.90593 0.25823z"/>
                <path role="presentation" id="path829"
                      d="m37.688 72.637h0.54187v1.1726h1.3547v-1.1726h0.54187v2.9633h-0.54187v-1.2827h-1.3547v1.2827h-0.54187z"/>
                <path role="presentation" id="path831" d="m40.78 72.637h0.54187v2.9633h-0.54187z"/>
                <path role="presentation" id="path833"
                      d="m42.546 73.162h-0.8382v-0.52493h2.2183v0.52493h-0.8382v2.4384h-0.54187z"/>
                <path role="presentation" id="path835"
                      d="m45.632 74.898h-1.0795l-0.24553 0.70273h-0.52493l1.0541-2.9633h0.51223l1.0541 2.9633h-0.52493zm-0.16933-0.47413-0.3683-1.0583-0.37253 1.0583z"/>
              </g>
            </g>
          </g>
        </svg>
      </a>
    </li>
    <li class="item">
      <a href="/blog/" class="">Blog</a>
      <ul>
        <li class="item">
          <a href="/blog/drawing/">Drawing</a>
        </li>
        <li class="item">
          <a href="/blog/languages/">Languages</a>
        </li>
        <li class="item">
          <a href="/blog/music/">Music</a>
        </li>
        <li class="item">
          <a href="/blog/writing/">Writing</a>
        </li>
      </ul>
    </li>
    <li class="item">
      <a href="/art/" class="">Illustrations</a>
    </li>
    <li class="item">
      <a href="/maps/" class="">Maps</a>
    </li>
  </ul>
  <div id="menu-bottom">
    <p id="feed-subscribe">
      <a href="/feed.xml">
        <svg id="feed-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px"
             viewBox="0 0 256 256">
          <circle cx="68" cy="189" r="24" fill="rgba(255, 255, 255, .2)"/>
          <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="rgba(255, 255, 255, .2)"/>
          <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="rgba(255, 255, 255, .2)"/>
        </svg>
      </a>
    </p>
  </div>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Generating diagrams from a SQlite database with Python</h1>
    <span class="post-meta">
      <time class="dt-published" datetime="2019-07-28T00:00:00+12:00" itemprop="datePublished">Jul 28, 2019
      </time>
      <span>&mdash; star date: -303345.21.</span>
      <span>
        Number of words: 1086.
      </span></span>
  </header>

  


  <div class="post-content e-content" itemprop="articleBody">
    <p><img class="ui fluid image" src="/assets/posts/2019-07-28-generating-diagrams-from-a-sqlite-database-with-python/Amiga.png" style="float: left; width: 30%;" alt="A 1984 Apple Macintosh drawing" /></p>

<p>There are tools out there that can be used to reverse engineer databases and generate diagrams. These tools
normally are GUI based. But <a href="https://github.com/cylc/cylc-doc/pull/29">I needed</a> one that could be used in a
project build to generate a simple diagram for documentation.</p>

<p>A tool in Python would be ideal, as that is the language the project I was working on was written in. After
searching in DuckDuckGo and PYPI, I found <a href="https://pypi.org/project/ERAlchemy/">ERAlchemy</a> that
seemed to have the features I needed - kinda.</p>

<!--more-->

<p>Running the default <code class="language-plaintext highlighter-rouge">eralchemy -i sqlite:///relative/path/to/db.db -o erd_from_sqlite.pdf</code> against
the project database, the diagram generated was not really easy to read. It was very tall,
and did not appear to respect any order such as number of relationships, alphabetical order, etc.</p>

<p><img class="ui image" src="/assets/posts/2019-07-28-generating-diagrams-from-a-sqlite-database-with-python/default.png" width="50%" /></p>

<p>Looking at the code, I found where it produced a <code class="language-plaintext highlighter-rouge">dot</code> file. So I decided first to have a go at
quickly customizing that file and running <code class="language-plaintext highlighter-rouge">dot</code> to produce a better diagram.</p>

<div class="language-dot highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># file: custom.dot
</span><span class="k">graph</span> <span class="p">{</span>
	<span class="k">node</span> <span class="o">[</span><span class="n">label</span> <span class="p">=</span> <span class="s2">"\N"</span><span class="p">,</span> <span class="n">shape</span> <span class="p">=</span> <span class="nv">plaintext</span><span class="o">]</span><span class="p">;</span>
	<span class="k">edge</span> <span class="o">[</span><span class="n">color</span> <span class="p">=</span> <span class="nv">gray50</span><span class="p">,</span> <span class="n">minlen</span> <span class="p">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">style</span> <span class="p">=</span> <span class="nv">dashed</span><span class="o">]</span><span class="p">;</span>
	<span class="n">rankdir</span> <span class="p">=</span> <span class="s2">"TB"</span><span class="p">;</span>
	<span class="n">newrank</span><span class="p">=</span><span class="s2">"true"</span>

	<span class="s2">"broadcast_events"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>broadcast_events<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>time<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>change<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>point<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>namespace<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>key<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>value<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="s2">"broadcast_states"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>broadcast_states<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>point<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>namespace<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>key<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>value<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="err">...</span>
	<span class="s2">"task_timeout_timers"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>task_timeout_timers<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>cycle<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>name<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>timeout<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="s2">"xtriggers"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>xtriggers<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>signature<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>results<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="s2">"task_states"</span> <span class="o">--</span> <span class="s2">"task_events"</span> <span class="o">[</span><span class="n">taillabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>0..N<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;,</span><span class="n">headlabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>{0,1}<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="err">...</span>
	<span class="s2">"task_pool"</span> <span class="o">--</span> <span class="s2">"task_timeout_timers"</span> <span class="o">[</span><span class="n">taillabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>{0,1}<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;,</span><span class="n">headlabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>{0,1}<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>That worked initially, producing a horizontal diagram as I wanted.</p>

<p><img class="ui fluid image" src="/assets/posts/2019-07-28-generating-diagrams-from-a-sqlite-database-with-python/custom.png" /></p>

<p>But the utility tables, those without any relationship, were scattered over the diagram, and I wanted them grouped.</p>

<p>After fiddling with the graph syntax, and finding an example with a subgraph, I was able to organize the tables in a way that
seemed easier for other developers and users to read and understand it.</p>

<div class="language-dot highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># file: final.dot
</span><span class="k">graph</span> <span class="p">{</span>
	<span class="k">node</span> <span class="o">[</span><span class="n">label</span> <span class="p">=</span> <span class="s2">"\N"</span><span class="p">,</span> <span class="n">shape</span> <span class="p">=</span> <span class="nv">plaintext</span><span class="o">]</span><span class="p">;</span>
	<span class="k">edge</span> <span class="o">[</span><span class="n">color</span> <span class="p">=</span> <span class="nv">gray50</span><span class="p">,</span> <span class="n">minlen</span> <span class="p">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">style</span> <span class="p">=</span> <span class="nv">dashed</span><span class="o">]</span><span class="p">;</span>
	<span class="n">rankdir</span> <span class="p">=</span> <span class="s2">"TB"</span><span class="p">;</span>
	<span class="n">newrank</span><span class="p">=</span><span class="s2">"true"</span>

	<span class="k">subgraph</span> <span class="nv">orphan</span> <span class="p">{</span><span class="n">rank</span> <span class="p">=</span> <span class="nv">sink</span>
		<span class="s2">"broadcast_events"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>broadcast_events<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>time<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>change<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>point<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>namespace<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>key<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>value<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
		<span class="s2">"inheritance"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>inheritance<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>namespace<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>inheritance<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
		<span class="s2">"suite_template_vars"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>suite_template_vars<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>key<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>value<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
		<span class="s2">"xtriggers"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>xtriggers<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>signature<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>results<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
		<span class="s2">"broadcast_states"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>broadcast_states<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>point<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>namespace<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>key<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>value<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="s2">"broadcast_states_checkpoints"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>broadcast_states_checkpoints<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>id<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>point<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>namespace<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>key<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>value<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="err">...</span>
	<span class="s2">"task_timeout_timers"</span> <span class="o">[</span><span class="n">label</span><span class="p">=&lt;</span><span class="nt">&lt;FONT</span> <span class="na">FACE=</span><span class="s">"Helvetica"</span><span class="nt">&gt;&lt;TABLE</span> <span class="na">BORDER=</span><span class="s">"0"</span> <span class="na">CELLBORDER=</span><span class="s">"1"</span> <span class="na">CELLPADDING=</span><span class="s">"4"</span> <span class="na">CELLSPACING=</span><span class="s">"0"</span><span class="nt">&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;FONT</span> <span class="na">POINT-SIZE=</span><span class="s">"16"</span><span class="nt">&gt;</span>task_timeout_timers<span class="nt">&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>cycle<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;u&gt;&lt;FONT&gt;</span>name<span class="nt">&lt;/FONT&gt;&lt;/u&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD</span> <span class="na">ALIGN=</span><span class="s">"LEFT"</span><span class="nt">&gt;&lt;FONT&gt;</span>timeout<span class="nt">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="s2">"task_states"</span> <span class="o">--</span> <span class="s2">"task_events"</span> <span class="o">[</span><span class="n">taillabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>0..N<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;,</span><span class="n">headlabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>{0,1}<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
	<span class="err">...</span>
	<span class="s2">"task_pool"</span> <span class="o">--</span> <span class="s2">"task_timeout_timers"</span> <span class="o">[</span><span class="n">taillabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>{0,1}<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;,</span><span class="n">headlabel</span><span class="p">=&lt;</span><span class="nt">&lt;FONT&gt;</span>{0,1}<span class="nt">&lt;/FONT&gt;</span><span class="p">&gt;</span><span class="o">]</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img class="ui fluid image" src="/assets/posts/2019-07-28-generating-diagrams-from-a-sqlite-database-with-python/final.png" /></p>

<p>And that way you can generate your database diagram during your build process, and include in your project documentation.
Here’s the <a href="https://gist.github.com/kinow/7c8e1a2da97c9746f0cbc868b33839c3">final script</a>.</p>

<p>And an <a href="https://github.com/Alexis-benoist/eralchemy/issues/63">issue</a> created asking to allow
more customization for cases like this one.</p>

  </div>

  <div class="tags">
    <p>
      Published Jul 28, 2019 in &ldquo;blog&rdquo; and tagged&nbsp;<a class="label" href="/tags#python">python</a>,&nbsp;<a class="label" href="/tags#cylc">cylc</a>,&nbsp;<a class="label" href="/tags#database">database</a>. Number of words: 1086.
    </p>
  </div>

  <a class="u-url" href="/2019/07/28/generating-diagrams-from-a-sqlite-database-with-python.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
