<!doctype html><html lang=en><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.bb12278f082614f093646fd8c21cd5db009382bf5777a5ca1b84c705f7ff5e2d.css integrity="sha256-uxInjwgmFPCTZG/YwhzV2wCTgr9Xd6XKG4THBff/Xi0=">
<title>kinow | Cypher, Gremlin and SPARQL: Graph dialects</title>
</head>
<body><header role=banner class=content>
<nav id=nav aria-label=Main role=navigation class=content>
<ul><li>
<a href=/>
<i data-feather=about></i> About</a>
</li><li>
<a href=/blog/>
<i data-feather=blog></i> Blog</a>
</li><li>
<a href=/portfolio/>
<i data-feather=portfolio></i> Portfolio</a>
</li><li></li>
</ul>
</nav>
</header>
<main>
<article class=content>
<h2>Cypher, Gremlin and SPARQL: Graph dialects</h2><div class=metadata>
<i data-feather=calendar></i>
<time datetime=2014-09-09>Sep 9, 2014</time>
</div>
<p>When I was younger and my older brother was living in Germany, I asked him if he
had learned German. He said that he did, and explained that there are several
dialects, and he was quite proud for some people told him that he was using the
Bavarian dialect correctly.</p>
<p>Even though <a href=http://www.neo4j.org/learn/cypher>Cypher</a>,
<a href=http://gremlindocs.com/>Gremlin</a> and <a href=http://en.wikipedia.org/wiki/SPARQL>SPARQL</a>
are all query languages, I think we can consider them dialects of a common graph language.
Cypher is the query language used in <a href=http://www.neo4j.org/>neo4j</a>, a graph database.
Gremlin is part of the <a href=http://www.tinkerpop.com/>Tinkerpop</a>, an open source project
that contains graph server, graph algorithms, graph language, among other sub-projects.
And last but not least, SPARQL is used to query <a href=http://en.wikipedia.org/wiki/Resource_Description_Framework>RDF documents</a>.</p>
<p>Let&rsquo;s use the example of the Matrix movie provided by neo4j to take a look at the
three languages.</p>
<h2 id=cypher>Cypher</h2>
<p>First we create the graph.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:navy;font-weight:700>create</span><span style=color:#bbb> </span>(matrix1:Movie<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span>id<span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;603&#39;</span>,<span style=color:#bbb> </span>title<span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;The Matrix&#39;</span>,<span style=color:#bbb> </span><span style=color:navy;font-weight:700>year</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;1999-03-31&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix2:Movie<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span>id<span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;604&#39;</span>,<span style=color:#bbb> </span>title<span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;The Matrix Reloaded&#39;</span>,<span style=color:#bbb> </span><span style=color:navy;font-weight:700>year</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;2003-05-07&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix3:Movie<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span>id<span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;605&#39;</span>,<span style=color:#bbb> </span>title<span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;The Matrix Revolutions&#39;</span>,<span style=color:#bbb> </span><span style=color:navy;font-weight:700>year</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;2003-10-27&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>),<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb> </span>(neo:Actor<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span>name:<span style=color:#00f>&#39;Keanu Reeves&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(morpheus:Actor<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span>name:<span style=color:#00f>&#39;Laurence Fishburne&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(trinity:Actor<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span>name:<span style=color:#00f>&#39;Carrie-Anne Moss&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>),<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix1)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Neo&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(neo),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix2)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Neo&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(neo),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix3)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Neo&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(neo),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix1)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Morpheus&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(morpheus),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix2)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Morpheus&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(morpheus),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix3)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Morpheus&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(morpheus),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix1)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Trinity&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(trinity),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix2)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Trinity&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(trinity),<span style=color:#bbb>
</span><span style=color:#bbb> </span>(matrix3)&lt;-[:ACTS_IN<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:navy;font-weight:700>role</span><span style=color:#bbb> </span>:<span style=color:#bbb> </span><span style=color:#00f>&#39;Trinity&#39;</span><span style=color:#a61717;background-color:#e3d2d2>}</span>]-(trinity)<span style=color:#bbb>
</span></code></pre></div><p><code>Added 6 labels, created 6 nodes, set 21 properties, created 9 relationships, returned 0 rows in 2791 ms</code></p>
<p>And execute a simple query.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:navy;font-weight:700>MATCH</span><span style=color:#bbb> </span>(a:Actor<span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:#bbb> </span>name:<span style=color:#00f>&#34;Keanu Reeves&#34;</span><span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>}</span>)<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:navy;font-weight:700>RETURN</span><span style=color:#bbb> </span>a<span style=color:#bbb>
</span></code></pre></div><p><code>(9:Actor {name:&ldquo;Keanu Reeves&rdquo;})</code></p>
<h2 id=gremlin>Gremlin</h2>
<p>Again, let&rsquo;s start by creating our graph.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:navy;font-weight:700>g</span><span style=color:#bbb> </span>=<span style=color:#bbb> </span><span style=color:navy;font-weight:700>new</span><span style=color:#bbb> </span>TinkerGraph();<span style=color:#bbb>
</span><span style=color:#bbb></span>matrix1<span style=color:#bbb> </span>=<span style=color:#bbb> </span><span style=color:navy;font-weight:700>g</span>.addVertex([<span style=color:#00f>&#34;_id&#34;</span>:<span style=color:#00f>603</span>,<span style=color:#00f>&#34;title&#34;</span>:<span style=color:#00f>&#34;The Matrix&#34;</span>,<span style=color:#bbb> </span><span style=color:#00f>&#34;year&#34;</span>:<span style=color:#bbb> </span><span style=color:#00f>&#34;1999-03-31&#34;</span>]);<span style=color:#bbb>
</span><span style=color:#bbb></span>matrix2<span style=color:#bbb> </span>=<span style=color:#bbb> </span><span style=color:navy;font-weight:700>g</span>.addVertex([<span style=color:#00f>&#34;_id&#34;</span>:<span style=color:#00f>604</span>,<span style=color:#00f>&#34;title&#34;</span>:<span style=color:#00f>&#34;The Matrix Reloaded&#34;</span>,<span style=color:#bbb> </span><span style=color:#00f>&#34;year&#34;</span>:<span style=color:#bbb> </span><span style=color:#00f>&#34;2003-05-07&#34;</span>]);<span style=color:#bbb>
</span><span style=color:#bbb></span>matrix3<span style=color:#bbb> </span>=<span style=color:#bbb> </span><span style=color:navy;font-weight:700>g</span>.addVertex([<span style=color:#00f>&#34;_id&#34;</span>:<span style=color:#00f>605</span>,<span style=color:#00f>&#34;title&#34;</span>:<span style=color:#00f>&#34;The Matrix Revolutions&#34;</span>,<span style=color:#bbb> </span><span style=color:#00f>&#34;year&#34;</span>:<span style=color:#bbb> </span><span style=color:#00f>&#34;2003-10-27&#34;</span>]);<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span>neo<span style=color:#bbb> </span>=<span style=color:#bbb> </span><span style=color:navy;font-weight:700>g</span>.addVertex([<span style=color:#00f>&#34;name&#34;</span>:<span style=color:#bbb> </span><span style=color:#00f>&#34;Keanu Reeves&#34;</span>]);<span style=color:#bbb>
</span><span style=color:#bbb></span>morpheus<span style=color:#bbb> </span>=<span style=color:#bbb> </span><span style=color:navy;font-weight:700>g</span>.addVertex([<span style=color:#00f>&#34;name&#34;</span>:<span style=color:#bbb> </span><span style=color:#00f>&#34;Laurence Fishburne&#34;</span>]);<span style=color:#bbb>
</span><span style=color:#bbb></span>trinity<span style=color:#bbb> </span>=<span style=color:#bbb> </span><span style=color:navy;font-weight:700>g</span>.addVertex([<span style=color:#00f>&#34;name&#34;</span>:<span style=color:#bbb> </span><span style=color:#00f>&#34;Carrie-Anne Moss&#34;</span>]);<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span>neo.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix1);<span style=color:#bbb> 
</span><span style=color:#bbb></span>neo.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix2);<span style=color:#bbb> 
</span><span style=color:#bbb></span>neo.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix3);<span style=color:#bbb> 
</span><span style=color:#bbb></span>morpheus.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix1);<span style=color:#bbb> 
</span><span style=color:#bbb></span>morpheus.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix2);<span style=color:#bbb> 
</span><span style=color:#bbb></span>morpheus.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix3);<span style=color:#bbb> 
</span><span style=color:#bbb></span>trinity.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix1);<span style=color:#bbb> 
</span><span style=color:#bbb></span>trinity.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix2);<span style=color:#bbb> 
</span><span style=color:#bbb></span>trinity.addEdge(<span style=color:#00f>&#34;actsIn&#34;</span>,<span style=color:#bbb> </span>matrix3);<span style=color:#bbb> 
</span></code></pre></div><p>And execute a simple query.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:navy;font-weight:700>g</span>.V.has(<span style=color:#00f>&#39;name&#39;</span>,<span style=color:#bbb> </span><span style=color:#00f>&#39;Keanu Reeves&#39;</span>).<span style=color:navy;font-weight:700>map</span><span style=color:#bbb>
</span></code></pre></div><p><code>gremlin> g.V.has(&lsquo;name&rsquo;, &lsquo;Keanu Reeves&rsquo;).map
==>{name=Keanu Reeves}
gremlin></code></p>
<p>Quite similar to neo4j.</p>
<h2 id=sparql>SPARQL</h2>
<p>Let&rsquo;s load our example (thanks to <a href=https://twitter.com/kendall>Kendall G. Clark</a>). I used
<a href=http://jena.apache.org/documentation/serving_data/>Fuseki</a> to run these queries.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>@prefix :          <span style=color:navy;font-weight:700>&lt;http:</span><span style=color:#a61717;background-color:#e3d2d2>//example.org/matrix</span><span style=color:navy;font-weight:700>/&gt;</span> .

 :m1 a :Movie; :title &#34;The Matrix&#34;; :year &#34;1999-03-31&#34;.
 :m2 a :Movie; :title &#34;The Matrix Reloaded&#34;; :year &#34;2003-05-07&#34;.
 :m3 a :Movie; :title &#34;The Matrix Revolutions&#34;; :year &#34;2003-10-27&#34;.
 
 :neo a :Actor; :name &#34;Keanu Reeves&#34;.
 :morpheus a :Actor; :name &#34;Laurence Fishburne&#34;.
 :trinity a :Actor; :name &#34;Carrie-Anne Moss&#34;.
 
 :neo :hasRole [:as &#34;Neo&#34;; :in :m1].
 :neo :hasRole [:as &#34;Neo&#34;; :in :m2].
 :neo :hasRole [:as &#34;Neo&#34;; :in :m2].
 :morpheus :hasRole [:as &#34;Morpheus&#34;; :in :m1].
 :morpheus :hasRole [:as &#34;Morpheus&#34;; :in :m2].
 :morpheus :hasRole [:as &#34;Morpheus&#34;; :in :m2].
 :trinity :hasRole [:as &#34;Trinity&#34;; :in :m1].
 :trinity :hasRole [:as &#34;Trinity&#34;; :in :m2].
 :trinity :hasRole [:as &#34;Trinity&#34;; :in :m2].
</code></pre></div><p>And finally the SPARQL query.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:navy;font-weight:700>SELECT</span><span style=color:#bbb> </span>?a<span style=color:#bbb> </span><span style=color:navy;font-weight:700>WHERE</span><span style=color:#bbb> </span><span style=color:#a61717;background-color:#e3d2d2>{</span><span style=color:#bbb>
</span><span style=color:#bbb>   </span>?a<span style=color:#bbb> </span>a<span style=color:#bbb> </span>&lt;http://example.org/matrix/Actor&gt;<span style=color:#bbb> </span>.<span style=color:#bbb>
</span><span style=color:#bbb>   </span>?a<span style=color:#bbb> </span>&lt;http://example.org/matrix/name&gt;<span style=color:#bbb> </span>?name<span style=color:#bbb> </span>.<span style=color:#bbb>
</span><span style=color:#bbb>   </span>FILTER(?name<span style=color:#bbb>  </span>=<span style=color:#bbb> </span><span style=color:#00f>&#34;Keanu Reeves&#34;</span>)<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a61717;background-color:#e3d2d2>}</span><span style=color:#bbb>
</span></code></pre></div><p>Returning the Keanu Reeves actor instance.</p>
<pre>-----------------------------------
| a                               |
===================================
| &lt;http://example.org/matrix/neo&gt; |
-----------------------------------</pre>
<p>SPARQL supports inference (or I must say that OWL, RDFS and the reasoners do),
but it is easier to define the depth of a search in the graph using neo4j. As for
Gremlin, it has native support to Groovy and Java. There is a common denominator
for these three languages, but what makes them really powerful are their unique features.</p>
<p>I hope you enjoyed, and that this post gave you a quick overview of some of the existing
graph languages. Make sure you ponder the pros and cons of each server/language, and
make the best decision for your project. Take a look at <a href=http://en.wikipedia.org/wiki/Graph_database#APIs_and_Graph_Query.2FProgramming_Languages>other graph query languages</a> too.</p>
<p>Happy hacking!</p>
<hr>
<p>This post has been updated as suggested by <a href=https://twitter.com/kendall>@kendall</a> (Thank you!).
You can check the diff at <a href=https://github.com/kinow/kinoshita.eti.br/commits/master/site/_content/posts/2014-09-09_cypher-gremlin-and-sparql-graph-dialects.html>GitHub</a></p>
<aside class=links>
<a class=previous href=https://kinoshita.eti.br/2014/08/09/strings-transliteration-in-java-with-apache-commons-lang.html>&#171; Previous</a>
<a class=next href=https://kinoshita.eti.br/2014/10/11/basic-workflow-of-a-sparql-query-in-fuseki.html>Next &#187;</a>
</aside>
</article>
</main>
<footer role=contentinfo>
<ul id=social-media-icons>
<li>
<a href=https://www.instagram.com/brunokinoshita/>
<img src=/assets/icons/instagram.png alt="Instagram link">
</a>
</li>
<li>
<a href=https://twitter.com/kinow/>
<img src=/assets/icons/twitter.png alt="Twitter link">
</a>
</li>
<li>
<a href=https://github.com/kinow/>
<img src=/assets/icons/github.png alt="GitHub link">
</a>
</li>
</ul>
</footer>
</body>
</html>