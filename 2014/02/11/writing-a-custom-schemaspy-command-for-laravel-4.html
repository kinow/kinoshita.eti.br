<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2014/02/11/writing-a-custom-schemaspy-command-for-laravel-4.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Writing a custom SchemaSpy command for Laravel 4"><meta property="og:description" content="This week I had to write my first custom command for Laravel 4. In Nestor-QA, Peter and I thought it would be useful to have the database schema being automatically generated with SchemaSpy in our Jenkins box.
Thanks to Artisan this task is much simpler than I thought. The following command creates the schemaspy command.
php artisan command:make SchemaSpyCommand --command=schemaspy This will create the file app/commands/SchemaSpyCommand.php. And all I had to do was just fill in the options and write the exec command as the Laravel 4 docs explain."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-02-11T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-16T15:01:06+02:00"><meta property="article:tag" content="Php"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Writing a custom SchemaSpy command for Laravel 4"><meta name=twitter:description content="This week I had to write my first custom command for Laravel 4. In Nestor-QA, Peter and I thought it would be useful to have the database schema being automatically generated with SchemaSpy in our Jenkins box.
Thanks to Artisan this task is much simpler than I thought. The following command creates the schemaspy command.
php artisan command:make SchemaSpyCommand --command=schemaspy This will create the file app/commands/SchemaSpyCommand.php. And all I had to do was just fill in the options and write the exec command as the Laravel 4 docs explain."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2014/02/11/writing-a-custom-schemaspy-command-for-laravel-4/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.13c9ee0d80c48570210cc93178b06dc3fd170877e34518da00976da6c2e40702.css integrity="sha256-E8nuDYDEhXAhDMkxeLBtw/0XCHfjRRjaAJdtpsLkBwI="><title>kinow | Writing a custom SchemaSpy command for Laravel 4</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Writing a custom SchemaSpy command for Laravel 4","headline":"Writing a custom SchemaSpy command for Laravel 4","alternativeHeadline":"","description":"This week I had to write my first custom command for Laravel 4. In Nestor-QA, Peter and I thought it would be useful to have the database schema being automatically generated with SchemaSpy in our Jenkins box.\nThanks to Artisan this task is much simpler than I thought. The following command creates the schemaspy command.\nphp artisan command:make SchemaSpyCommand --command=schemaspy This will create the file app\/commands\/SchemaSpyCommand.php. And all I had to do was just fill in the options and write the exec command as the Laravel 4 docs explain.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2014\/02\/11\/writing-a-custom-schemaspy-command-for-laravel-4.html"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"kinow","copyrightYear":"2014","dateCreated":"2014-02-11T00:00:00.00Z","datePublished":"2014-02-11T00:00:00.00Z","dateModified":"2024-08-16T15:01:06.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2014\/02\/11\/writing-a-custom-schemaspy-command-for-laravel-4.html","wordCount":"172","genre":["php"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul style=position:relative><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li><li style=position:absolute;right:0;bottom:-.75rem;text-align:right><span style=text-transform:uppercase;font-weight:700;font-size:3rem;color:#fffefa;line-height:normal;letter-spacing:-.1rem>Kinow</span></li></ul></nav></header><main><article class=content><h1>Writing a custom SchemaSpy command for Laravel 4</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2014-02-11>Feb 11, 2014</time></div><aside><nav id=TableOfContents></nav></aside><p>This week I had to write my first custom command for <a href=http://laravel.com/>Laravel 4</a>.
In <a href=http://nestor-qa.org/>Nestor-QA</a>, <a href=https://github.com/tooh>Peter</a> and I thought it would be useful to have
the database schema being automatically generated with
<a href=http://schemaspy.sourceforge.net/>SchemaSpy</a> in our <a href=http://builds.tupilabs.com/view/Nestor-QA/>Jenkins box</a>.</p><p>Thanks to <a href=http://laravel.com/docs/artisan>Artisan</a> this task is much simpler than I thought.
The following command creates the <code>schemaspy</code> command.</p><pre><code>php artisan command:make SchemaSpyCommand --command=schemaspy
</code></pre><p>This will create the file <code>app/commands/SchemaSpyCommand.php</code>. And all I had to do was
just fill in the options and write the exec command as the <a href=http://laravel.com/docs/commands>Laravel 4 docs</a> explain.</p><pre><code>$this-&gt;info('Creating SchemaSpy');

$jar = $this-&gt;option(&quot;jar&quot;);
$dbtype = $this-&gt;option(&quot;dbtype&quot;);
$output = $this-&gt;option(&quot;output&quot;);

$commandLine = sprintf(&quot;java -jar %s -u none -t %s -o %s&quot;, $jar, $dbtype, $output);

$this-&gt;info(sprintf(&quot;Command line: [%s]&quot;, $commandLine));

exec($commandLine);
</code></pre><p>That&rsquo;s how my final command looks. Now the final step is integrate it into the application by adding the line below to
<code>app/start/artisan.php</code>.</p><pre><code>Artisan::add(new SchemaSpyCommand);
</code></pre><p>And that&rsquo;s it, running <code>php artisan schemaspy &ndash;jar=/opt/schemaspy/schemaSpy_5.0.0.jar
&ndash;dbtype=app/database/sqlite.properties &ndash;output=database-schema</code>
creates the database schema docs in the <code>database-schema</code> directory.</p><p>Check this <a href=https://gist.github.com/kinow/8936667>gist</a> for the final code.</p><p>Happy coding!</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/php.html>Php</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2013/10/27/missing-menus-in-new-installation-of-testlink-1.9.8.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2014/05/19/treemapping-jenkins-extension-points-with-r.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>