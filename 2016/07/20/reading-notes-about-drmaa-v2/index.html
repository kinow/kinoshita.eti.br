  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <title>Bruno P. Kinoshita &mdash; Reading notes about DRMAA v2</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="Bruno de Paula Kinoshita personal web site" />
    <meta name="keywords"
        content="kinoshita, bruno de paula kinoshita, geek, geek stuff, java, python, c, c++, msn now playing, neural network, mackenzie, sao paulo, brasil, brazil, nerd, nerd stuff, cool, jenkins, illustration, quadrinhos, machine learning, linguistic, apache, open source, codigo livre, codigo aberto" />
    <meta name="author" content="" />
    <meta name="generator" content="PieCrust 3.2.1" />
    <meta name="template-engine" content="Twig" />
    <meta name="robots" content="all=index,follow" />
    <meta name="revisit-after" content="15 days" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="distribution" content="Global" />
    <meta name="url" content="/" />
    <meta name="copyright" content="Bruno de Paula Kinoshita" />
    <meta name="Googlebot" content="all" />
    <meta name="rating" content="general" />
    <meta http-equiv="expires" content="0" />
    <meta name="city" content="Sao Paulo" />
    <meta name="state" content="Brasil, Sao Paulo" />
    <meta http-equiv="content-language" content="en" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta id="page_favicon" href="/favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="alternate" type="application/rss+xml" title="Bruno P. Kinoshita &raquo; Feed" href="/feed.xml" />
    <link rel="stylesheet" href="/css/semantic/dist/semantic.min.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    <link rel="stylesheet" href="/css/prettyPhoto.css" type="text/css" media="all" />
</head>
<body id="body">
    <div class="ui vertical sidebar menu" id="toc">
        <nav class="menu" role="navigation">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/art">Art</a>
    </div>
    <div class="item">
      <a href="/presentations/">Presentations</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
</nav>
<a href="/about/"><img src="/img/bruno.jpg" title="Hmmmm" alt="My picture" width="134px" height="215px" /></a>
    </div>
    <div class="ui black big launch right attached fixed button">
        <i class="content icon"></i>
        <span class="text">Menu</span>
    </div>
    <div class="ui fixed inverted main menu">
        <div class="ui container">
            <a class="launch icon item">
                <i class="content icon"></i>
            </a>
            <div class="item">
                Reading notes about DRMAA v2
            </div>
        </div>
    </div>
    <div class="pusher">
        <div class="full height">
            <div class="toc">
                <div class="ui vertical sticky fixed top menu">
                    <nav class="menu" role="navigation">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/art">Art</a>
    </div>
    <div class="item">
      <a href="/presentations/">Presentations</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
</nav>
<a href="/about/"><img src="/img/bruno.jpg" title="Hmmmm" alt="My picture" width="134px" height="215px" /></a>
                </div>
            </div>
            <div class="article">
                <div class="main container" role="main">

                
<div class="ui raised padded container segment">
  <h1 class='post-topic'>Reading notes about DRMAA v2</h1>
  <small>kinow</small> @
	<small>2016-07-20&nbsp;19:59:03 (<span class='stardate' data-input-date='2016-07-20'></span>)</small>
  <div class="entry">
    





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2016/07/20/reading-notes-about-drmaa-v2" data-text="Reading notes about DRMAA v2" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

	  <p>The DRMAA v2 specification draft is ready to be published, and is in <a href="https://redmine.ogf.org/boards/36/topics/494">public
comment</a> until 31st July this year.
I used DRMAA v1 to integrate Jenkins and PBS some time ago, but it was not a
very elegant solution.</p>
<p>And in the end integrating other grid computing implementations like SGE would
not be very simple.</p>
<p>This post contains my reading notes for DRMAA v2, and a short analysis of how
this new specification could be used in a new tentative to integrate
Jenkins and several grid computing implementations in a single plug-in.</p>
<!-- more -->

<h3>Notes about the new specification</h3>
<ul>
<li>Jobs can have categories, like OpenMP jobs, MPI jobs, Java jobs, R jobs,
institute-X jobs, etc<ul>
<li>in Jenkins this could be displayed as a label to
the jobs in the job queue, or as a filter</li>
</ul>
</li>
<li>DRMAA implementations offer DRMAA capabilities, with the features and data
attributes supported<ul>
<li>this could be used while creating a slave/cloud computer in Jenkins</li>
</ul>
</li>
<li>queue, machine, slot, job, reservation have structures that may vary,
but can tell more about the environment</li>
<li>sessions must have an unique name, otherwise you will get an
InvalidArgumentException</li>
<li>the method <strong>openMonitoring</strong> can be used to open a stateless <em>MonitoringSession</em>
for querying about the DRM system<ul>
<li><strong>Question: maybe it would be nice to have a note saying that implementations could
use caching or other mechanisms to alleviate resource usage, as long as it is
guaranteed that users will always get the latest valid information about the DRM
system?</strong></li>
<li><strong>Question: what is the output of this method? Does it include information
about jobs too?</strong></li>
</ul>
</li>
<li>for Jobs, you will have JobSession, Job and JobArray. JobSession = control and
monitoring of jobs. Job = control of a single job. JobArray = bulk submission.</li>
<li>a job has the valid states UNDETERMINED, QUEUED, QUEUED_HELD, RUNNING,
SUSPENDED, REQUEUED, REQUEUED_HELD, DONE, and FAILED</li>
</ul>
<p><img class="ui centered large bordered image" src="/2016/07/20/reading-notes-about-drmaa-v2/drmaav2_screen.png" alt="DRMAA Job States" /></p>
<ul>
<li><blockquote>If a DRMAA job state has no representation in the underlying DRMS, the DRMAA implementation MAY
never report it</blockquote><ul>
<li>Important to include in the plug-in documentation, and also troubleshooting page. As
jobs could be considered not found, but simply because of its state</li>
<li><strong>Question: is UNDETERMINED state assigned to a job that does not exist, or
only to a job that exists but state cannot be determined?</strong></li>
</ul>
</li>
<li>The callbacks look interesting too, but not required for all implementations, so
we can&#8217;t use it in the Jenkins plug-in</li>
<li>the monitoring method <em>getAllReservations</em> could be used to show future jobs, scheduled
jobs? Not a question to the working group, more internal work.</li>
<li>the monitoring method <em>getAllJobs</em> can be used to query for all jobs that the use
has access to, with a given filter too</li>
</ul>
<h3>How a DRMAA v2 Java implementation could be used with Jenkins</h3>
<ol>
<li>The Eclipse Science project <a href="https://projects.eclipse.org/projects/technology.triquetrum">Triquetrum</a>
is working <a href="https://www.ogf.org/pipermail/drmaa-wg/2016-July/001562.html">on a Java implementation</a>
that could possibly be re-used in BioUno to integrate DRM systems with Jenkins.</li>
<li>The new monitoring methods - if widely used by implementers - could replace
most of the code that was written to parse the output of the response of qsub/qstat or
even DRMAA v1 methods</li>
<li>Setting up nodes in Jenkins could be simplified by querying the server capabilities</li>
</ol>
<p>Time to go back to the blackboard, but in the meantime, will start a development cycle
for Jenkins plug-ins, and will work with the <a href="https://github.com/w3c/sparql-exists">EXISTS W3C working group</a>
for a while.</p>
<p><small>What I was listening while writing this blog post: <a href="https://www.youtube.com/watch?v=vh9RI0aLidQ">Paola Pequena - Sonata her&oacute;ica</a></small></p>
  </div>
  <p class="postmetadata">
    
    <small>tags [&nbsp;<a href="/tag/programming" rel="tag">programming</a>&nbsp;]&nbsp;[&nbsp;<a href="/tag/grid%20computing" rel="tag">grid computing</a>&nbsp;]&nbsp;</small>
    
    
    <br/>
    <small>posted in [&nbsp;<a href="/blog" title="View all posts in blog" rel="category tag">blog</a>&nbsp;]&nbsp; category </small>
    
  </p>
  
</div>

                </div>
            </div>
        </div>
        <div class="ui vertical footer segment">
            <div class="ui center aligned container">
                           <div id="copy" class="">
                <p>&copy; <a href="/about"><span
                            class="b">Bru</span><span
                            class="r">no de</span> <span
                            class="a">Paula</span> <span
                            class="s"></span><span
                            class="i">Kinos</span><span
                            class="l">hita</span></a>
                </p>
            </div>
            </div>
         </div>
    </div>
</body>
</html>
<script src="/js/jquery-2.2.3.min.js"  type="text/javascript"></script>
<script src="/css/semantic/dist/semantic.min.js"  type="text/javascript"></script>
<script src="/js/jquery.prettyPhoto.js"></script>
<script src="/js/site.js"></script>