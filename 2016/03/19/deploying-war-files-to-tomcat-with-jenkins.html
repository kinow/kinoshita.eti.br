<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Deploying WAR files to Tomcat with Jenkins | Bruno P. Kinoshita</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Deploying WAR files to Tomcat with Jenkins" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Table of Contents Deploying with custom scripts Deploying with a build tool Deploying with a build server Final thoughts A co-worker asked me this week about how to deploy a WAR file to Tomcat with Jenkins. In my team we are currently maintaining and deploying about 10 Java web systems, but we have no consistent way of deploying the applications to Tomcat yet. In the past I used Ant, Maven, Cargo, Grunt, and Jenkins, so I decided to write this short post to show a few different ways it can be achieved, à la Perl’s TMTOWTDI motto. #1 Deploying with custom scripts At first you may be tempted to write your own script to deploy to Tomcat with some Shell, Perl, Python or Java. But I think I would choose this option only because either I needed some feature that is not available in the other options, or in order to call other tasks or debug some problem. Example: $ docker run -d -p 8888:8080 jeanblanchard/tomcat:8 $ git clone https://github.com/spring-projects/spring-petclinic.git &amp;&amp; cd spring-petclinic &amp;&amp; mvn package $ curl --upload-file target/petclinic.war &quot;http://admin:admin@localhost:8888/manager/text/deploy?path=/spring-petclinic&amp;update=true&quot; OK - Deployed application at context path /spring-petclinic" />
<meta property="og:description" content="Table of Contents Deploying with custom scripts Deploying with a build tool Deploying with a build server Final thoughts A co-worker asked me this week about how to deploy a WAR file to Tomcat with Jenkins. In my team we are currently maintaining and deploying about 10 Java web systems, but we have no consistent way of deploying the applications to Tomcat yet. In the past I used Ant, Maven, Cargo, Grunt, and Jenkins, so I decided to write this short post to show a few different ways it can be achieved, à la Perl’s TMTOWTDI motto. #1 Deploying with custom scripts At first you may be tempted to write your own script to deploy to Tomcat with some Shell, Perl, Python or Java. But I think I would choose this option only because either I needed some feature that is not available in the other options, or in order to call other tasks or debug some problem. Example: $ docker run -d -p 8888:8080 jeanblanchard/tomcat:8 $ git clone https://github.com/spring-projects/spring-petclinic.git &amp;&amp; cd spring-petclinic &amp;&amp; mvn package $ curl --upload-file target/petclinic.war &quot;http://admin:admin@localhost:8888/manager/text/deploy?path=/spring-petclinic&amp;update=true&quot; OK - Deployed application at context path /spring-petclinic" />
<link rel="canonical" href="https://kinoshita.eti.br/2016/03/19/deploying-war-files-to-tomcat-with-jenkins.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2016/03/19/deploying-war-files-to-tomcat-with-jenkins.html" />
<meta property="og:site_name" content="Bruno P. Kinoshita" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-03-19T21:29:03-05:00" />
<script type="application/ld+json">
{"datePublished":"2016-03-19T21:29:03-05:00","headline":"Deploying WAR files to Tomcat with Jenkins","description":"Table of Contents Deploying with custom scripts Deploying with a build tool Deploying with a build server Final thoughts A co-worker asked me this week about how to deploy a WAR file to Tomcat with Jenkins. In my team we are currently maintaining and deploying about 10 Java web systems, but we have no consistent way of deploying the applications to Tomcat yet. In the past I used Ant, Maven, Cargo, Grunt, and Jenkins, so I decided to write this short post to show a few different ways it can be achieved, à la Perl’s TMTOWTDI motto. #1 Deploying with custom scripts At first you may be tempted to write your own script to deploy to Tomcat with some Shell, Perl, Python or Java. But I think I would choose this option only because either I needed some feature that is not available in the other options, or in order to call other tasks or debug some problem. Example: $ docker run -d -p 8888:8080 jeanblanchard/tomcat:8 $ git clone https://github.com/spring-projects/spring-petclinic.git &amp;&amp; cd spring-petclinic &amp;&amp; mvn package $ curl --upload-file target/petclinic.war &quot;http://admin:admin@localhost:8888/manager/text/deploy?path=/spring-petclinic&amp;update=true&quot; OK - Deployed application at context path /spring-petclinic","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2016/03/19/deploying-war-files-to-tomcat-with-jenkins.html"},"@type":"BlogPosting","url":"https://kinoshita.eti.br/2016/03/19/deploying-war-files-to-tomcat-with-jenkins.html","dateModified":"2016-03-19T21:29:03-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="Bruno P. Kinoshita" /></head>
<body>
<div id="wrapper">
  <div id="sidebar"><ul class="menu">
  <li class="item">
    <a href="/" aria-label="Home page link">
      <svg id="svg8" version="1.1" viewBox="0 0 58.208 9.2604" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svg-logo-title svg-logo-desc">
        <title id="svg-logo-title">KINOSHITA image</title>
        <desc id="svg-logo-desc">A logo with the word KINOSHITA</desc>
        <g id="layer1" transform="translate(0 -287.74)">
          <g id="text817" transform="translate(-2.4568 -.23624)">
            <g id="logo" transform="matrix(2.6585 0 0 2.5911 -63.587 100.56)" fill="#000000" stroke-width=".26458px">
              <path role="presentation" id="path819" d="m25.178 72.637h0.54187v2.9633h-0.54187zm0.5842 1.397 1.0964-1.397h0.635l-1.1049 1.397 1.1049 1.5663h-0.635z"/>
              <path role="presentation" id="path821" d="m27.832 72.637h0.54187v2.9633h-0.54187z"/>
              <path role="presentation" id="path823" d="m29.023 72.637h0.5334l1.2658 1.9135v-1.9135h0.54187v2.9633h-0.4445l-1.3547-2.032v2.032h-0.54187z"/>
              <path role="presentation" id="path825" d="m33.298 75.66q-0.4191 0-0.75353-0.1905-0.3302-0.19473-0.5207-0.54187-0.18627-0.35137-0.18627-0.80857t0.18627-0.80433q0.1905-0.35137 0.5207-0.54187 0.33443-0.19473 0.75353-0.19473t0.7493 0.19473q0.33443 0.1905 0.5207 0.54187 0.1905 0.34713 0.1905 0.80433t-0.1905 0.80857q-0.18627 0.34713-0.5207 0.54187-0.3302 0.1905-0.7493 0.1905zm0-0.52493q0.4318 0 0.6604-0.2794 0.23283-0.2794 0.23283-0.7366t-0.23283-0.7366q-0.2286-0.2794-0.6604-0.2794t-0.66463 0.2794q-0.2286 0.2794-0.2286 0.7366t0.2286 0.7366q0.23283 0.2794 0.66463 0.2794z"/>
              <path role="presentation" id="path827" d="m36.091 75.66q-0.24977 0-0.53763-0.06773-0.28363-0.06773-0.4445-0.14817l0.0635-0.57573q0.5588 0.27093 0.98213 0.27093 0.22437 0 0.35137-0.08467 0.127-0.0889 0.127-0.25823 0-0.127-0.07197-0.20743-0.06773-0.08467-0.19897-0.1397-0.13123-0.05927-0.4191-0.16087-0.27093-0.09313-0.44873-0.19473-0.1778-0.10583-0.28363-0.2667-0.1016-0.1651-0.1016-0.40217 0-0.381 0.2794-0.61383t0.8001-0.23283q0.24553 0 0.48683 0.05503 0.24553 0.05503 0.44873 0.13547l-0.05503 0.55457q-0.26247-0.1143-0.4826-0.16933-0.2159-0.05927-0.4318-0.05927-0.2413 0-0.3683 0.08043t-0.127 0.23283q0 0.11853 0.06773 0.19473t0.18203 0.127q0.11853 0.0508 0.34713 0.12277 0.51223 0.16087 0.74507 0.37253 0.23707 0.20743 0.23707 0.5715 0 0.34713-0.2413 0.60537t-0.90593 0.25823z"/>
              <path role="presentation" id="path829" d="m37.688 72.637h0.54187v1.1726h1.3547v-1.1726h0.54187v2.9633h-0.54187v-1.2827h-1.3547v1.2827h-0.54187z"/>
              <path role="presentation" id="path831" d="m40.78 72.637h0.54187v2.9633h-0.54187z"/>
              <path role="presentation" id="path833" d="m42.546 73.162h-0.8382v-0.52493h2.2183v0.52493h-0.8382v2.4384h-0.54187z"/>
              <path role="presentation" id="path835" d="m45.632 74.898h-1.0795l-0.24553 0.70273h-0.52493l1.0541-2.9633h0.51223l1.0541 2.9633h-0.52493zm-0.16933-0.47413-0.3683-1.0583-0.37253 1.0583z"/>
            </g>
          </g>
        </g>
      </svg>
    </a>
  </li>
  <li class="item">
    <a href="/blog/" class="">Blog</a>
    <ul>
      <li class="item">
        <a href="/blog/drawing/">Drawing</a>
      </li>
      <li class="item">
        <a href="/blog/languages/">Languages</a>
      </li>
      <li class="item">
        <a href="/blog/music/">Music</a>
      </li>
      <li class="item">
        <a href="/blog/writing/">Writing</a>
      </li>
    </ul>
  </li>
  <li class="item">
    <a href="/art/" class="">Illustrations</a>
  </li>
  <li class="item">
    <a href="/maps/" class="">Maps</a>
  </li>
</ul>
<div id="menu-bottom">
  <p id="feed-subscribe">
    <a href="/feed.xml">
      <svg id="feed-icon" xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px" viewBox="0 0 256 256">
        <circle cx="68" cy="189" r="24" fill="rgba(255, 255, 255, .2)"/>
        <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="rgba(255, 255, 255, .2)"/>
        <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="rgba(255, 255, 255, .2)"/>
      </svg>
    </a>
  </p>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Deploying WAR files to Tomcat with Jenkins</h1>
    <spab class="post-meta">
      <time class="dt-published" datetime="2016-03-19T21:29:03-05:00" itemprop="datePublished">Mar 19, 2016
      </time>
      17<span>&mdash; star date: -306704.92</span></spab>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><strong>Table of Contents</strong></p>

<ul>
  <li><a href="#1-deploying-with-custom-scripts">Deploying with custom scripts</a></li>
  <li><a href="#2-deploying-with-a-build-tool">Deploying with a build tool</a></li>
  <li><a href="#3-deploying-with-a-build-server">Deploying with a build server</a></li>
  <li><a href="#final-thoughts">Final thoughts</a></li>
</ul>

<p>A co-worker asked me this week about how to deploy a WAR file to Tomcat with Jenkins. In my team we are
currently maintaining and deploying about 10 Java web systems, but we have no consistent way of deploying
the applications to Tomcat yet. In the past I used Ant, Maven, Cargo, Grunt, and Jenkins, so I
decided to write this short post to show a few different ways it can be achieved, à la
<a href="https://en.wikipedia.org/wiki/There's_more_than_one_way_to_do_it">Perl’s TMTOWTDI</a> motto.</p>

<h2><a name="1-deploying-with-custom-scripts" style="color: #222222;">#1 Deploying with custom scripts</a></h2>

<p>At first you may be tempted to write your own script to deploy to Tomcat with some Shell, Perl, Python
or Java. But I think I would choose this option only because either I needed some feature that is not
available in the other options, or in order to call other tasks or debug some problem.</p>

<p>Example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 8888:8080 jeanblanchard/tomcat:8
<span class="nv">$ </span>git clone https://github.com/spring-projects/spring-petclinic.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>spring-petclinic <span class="o">&amp;&amp;</span> mvn package
<span class="nv">$ </span>curl <span class="nt">--upload-file</span> target/petclinic.war <span class="s2">"http://admin:admin@localhost:8888/manager/text/deploy?path=/spring-petclinic&amp;update=true"</span>
OK - Deployed application at context path /spring-petclinic
</code></pre></div></div>

<!--more-->

<h3 id="pros">Pros</h3>

<ul>
  <li>Flexible option. You can customise the deployment and even call other tasks before, after or during the
deployment</li>
  <li>Easy to get it working, as you have few dependencies and no learning curve for learning about any tool</li>
</ul>

<h3 id="cons">Cons</h3>

<ul>
  <li>Susceptible to bugs (<a href="https://en.wikipedia.org/wiki/Don't_repeat_yourself">DRY</a>)</li>
  <li>You will have to spend time maintaining your scripts if Tomcat changes (e.g. from Tomcat 6 to 7,
the deploy URL changed adding a ‘/text’ token)</li>
  <li>Integration with other tools, such as a build tool or build server may not be simple</li>
</ul>

<h2><a name="2-deploying-with-a-build-tool" style="color: #222222;">#2 Deploying with a build tool</a></h2>

<p>For this example I will use Apache Maven, but you can achieve the same with Grunt, Ant, Gradle,
or Make. Each of these tools provide different mechanisms to call external tools, some providing
plug-ins that can be used to deploy a WAR file to Tomcat, like Maven and the
<a href="https://codehaus-cargo.github.io/cargo/Maven2+Plugin+Getting+Started.html">Cargo plug-in</a>.</p>

<p>But even with Maven you have a few options. For example.</p>

<ul>
  <li>You can use Cargo Maven Plug-in. This plug-in contains several options and lets you abstract how
you interface with Tomcat</li>
  <li>You can use Maven Exec Plug-in and call some command or script that deploys your application to
Tomcat. This script can use Tomcat web services to deploy the application, or execute commands remotely
via SSH in the server, copying the file and stop/starting the services</li>
  <li>You can even write your own plug-in, where it wouldn’t be much different than option #1</li>
</ul>

<p>Example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone https://github.com/spring-projects/spring-petclinic.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>spring-petclinic
</code></pre></div></div>

<p>Add the following to the pom.xml file, under the right XML tags, of course.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- from https://gist.github.com/mdread/5900034 --&gt;</span>
<span class="nt">&lt;plugins&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.cargo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>cargo-maven2-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;container&gt;</span>
                <span class="nt">&lt;containerId&gt;</span>tomcat7x<span class="nt">&lt;/containerId&gt;</span>
                <span class="nt">&lt;type&gt;</span>remote<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;/container&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
                <span class="nt">&lt;type&gt;</span>runtime<span class="nt">&lt;/type&gt;</span>
                <span class="nt">&lt;properties&gt;</span>
                    <span class="nt">&lt;cargo.hostname&gt;</span>${cargo.hostname}<span class="nt">&lt;/cargo.hostname&gt;</span>
                    <span class="nt">&lt;cargo.servlet.port&gt;</span>${cargo.servlet.port}<span class="nt">&lt;/cargo.servlet.port&gt;</span>
                    <span class="nt">&lt;cargo.tomcat.manager.url&gt;</span>${cargo.tomcat.manager.url}<span class="nt">&lt;/cargo.tomcat.manager.url&gt;</span>
                    <span class="nt">&lt;cargo.remote.username&gt;</span>${cargo.remote.username}<span class="nt">&lt;/cargo.remote.username&gt;</span>
                    <span class="nt">&lt;cargo.remote.password&gt;</span>${cargo.remote.password}<span class="nt">&lt;/cargo.remote.password&gt;</span>
                <span class="nt">&lt;/properties&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;deployer&gt;</span>
                <span class="nt">&lt;type&gt;</span>remote<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;/deployer&gt;</span>
            <span class="nt">&lt;deployables&gt;</span>
                <span class="nt">&lt;deployable&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>${project.groupId}<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>${project.artifactId}<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;type&gt;</span>${project.packaging}<span class="nt">&lt;/type&gt;</span>
                <span class="nt">&lt;/deployable&gt;</span>
            <span class="nt">&lt;/deployables&gt;</span>

        <span class="nt">&lt;/configuration&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
<span class="nt">&lt;/plugins&gt;</span>

<span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
        <span class="nt">&lt;id&gt;</span>prod<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;properties&gt;</span>
            <span class="nt">&lt;deploy.env&gt;</span>prod<span class="nt">&lt;/deploy.env&gt;</span>
            <span class="nt">&lt;cargo.hostname&gt;</span>srvprd001<span class="nt">&lt;/cargo.hostname&gt;</span>
            <span class="nt">&lt;cargo.servlet.port&gt;</span>8080<span class="nt">&lt;/cargo.servlet.port&gt;</span>
            <span class="nt">&lt;cargo.tomcat.manager.url&gt;</span>http://srvprd001:8080/manager<span class="nt">&lt;/cargo.tomcat.manager.url&gt;</span>
            <span class="nt">&lt;cargo.remote.username&gt;</span>user<span class="nt">&lt;/cargo.remote.username&gt;</span>
            <span class="nt">&lt;cargo.remote.password&gt;</span>pass<span class="nt">&lt;/cargo.remote.password&gt;</span>
        <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
        <span class="nt">&lt;id&gt;</span>test<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;properties&gt;</span>
            <span class="nt">&lt;deploy.env&gt;</span>dev<span class="nt">&lt;/deploy.env&gt;</span>
            <span class="nt">&lt;cargo.hostname&gt;</span>srvtst001<span class="nt">&lt;/cargo.hostname&gt;</span>
            <span class="nt">&lt;cargo.servlet.port&gt;</span>9090<span class="nt">&lt;/cargo.servlet.port&gt;</span>
            <span class="nt">&lt;cargo.tomcat.manager.url&gt;</span>http://srvtst001:9090/manager<span class="nt">&lt;/cargo.tomcat.manager.url&gt;</span>
            <span class="nt">&lt;cargo.remote.username&gt;</span>user<span class="nt">&lt;/cargo.remote.username&gt;</span>
            <span class="nt">&lt;cargo.remote.password&gt;</span>pass<span class="nt">&lt;/cargo.remote.password&gt;</span>
        <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
<span class="nt">&lt;/profiles&gt;</span>
</code></pre></div></div>

<p>And finally start Tomcat and call the Cargo Maven plug-in.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 8888:8080 jeanblanchard/tomcat:8
<span class="nv">$ </span>mvn package org.codehaus.cargo:cargo-maven2-plugin:deploy <span class="nt">-Ptest</span> <span class="nt">-Dcargo</span>.hostname<span class="o">=</span>localhost <span class="nt">-Dcargo</span>.servlet.port<span class="o">=</span>8888 <span class="nt">-Dcargo</span>.tomcat.manager.url<span class="o">=</span>http://localhost:8888/manager/text <span class="nt">-Dcargo</span>.remote.username<span class="o">=</span>admin <span class="nt">-Dcargo</span>.remote.password<span class="o">=</span>admin
</code></pre></div></div>

<p>What I like about this approach is that using profiles and environments with Maven, you can have pre-defined
variables per profile, but also overwrite them when necessary. For example in the previous command line,
the host, port, user and password are overwritten to match the default values from the Docker image used.</p>

<h3 id="pros-1">Pros</h3>

<ul>
  <li>You are using a tool that is being used by other people. So bugs are fixed much faster and by
a lot of people, with different environments and use cases</li>
  <li>Normally, build tools provide some mechanism for you to parameterise your build, controlling flags
and allowing a more flexible process</li>
  <li>It is a lot easier to find examples and workarounds online</li>
</ul>

<h3 id="cons-1">Cons</h3>

<ul>
  <li>New features depend on how well maintained your build tool or plug-in is. For example, with the Maven Cargo
Plug-in, it took some time till Java 7 was fully supported (but you can submit pull requests/patches)</li>
  <li>There is a learning curve for either learning about the build tool or about its plug-ins and extension
points</li>
  <li>Sometimes you may have to dig into the build tool or plug-in source code to debug problems in your build,
such as JVM or some system library incompatibility</li>
</ul>

<h2><a name="3-deploying-with-a-build-server" style="color: #222222;">#3 Deploying with a build server</a></h2>

<p>Deploying with a build server is not very different from approach #2. For this example I will use Jenkins,
as this is the build server I am most familiar with, and also the one that I am using at work.</p>

<p>Example:</p>

<p>Install the <a href="https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin">Deploy Plugin</a> in
Jenkins (it appears as “Deploy to container Plugin” in the plug-in selection screen), as well as the
git plug-in to check out the project.</p>

<p>In your job configuration, add a SCM step to clone the petclinic war project, and another step
to invoke a Maven top level target execute <code class="language-plaintext highlighter-rouge">mvn package</code>. Also add a post build step to deploy with the following
settings.</p>

<ul>
  <li>WAR/EAR files: target/*.war</li>
  <li>Context-path: spring-petclinic</li>
  <li>Containers: add Tomcat 7.x</li>
  <li>
    <ul>
      <li>Manager user name: admin</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>Manager password: admin</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>Tomcat URL: http://localhost:8888</li>
    </ul>
  </li>
</ul>

<p>Instead of a screenshot, here is the config.xml file for my example job - easier to diff your job
configuration.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;actions/&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;keepDependencies&gt;</span>false<span class="nt">&lt;/keepDependencies&gt;</span>
  <span class="nt">&lt;properties/&gt;</span>
  <span class="nt">&lt;scm</span> <span class="na">class=</span><span class="s">"hudson.plugins.git.GitSCM"</span> <span class="na">plugin=</span><span class="s">"git@2.4.3"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;configVersion&gt;</span>2<span class="nt">&lt;/configVersion&gt;</span>
    <span class="nt">&lt;userRemoteConfigs&gt;</span>
      <span class="nt">&lt;hudson.plugins.git.UserRemoteConfig&gt;</span>
        <span class="nt">&lt;url&gt;</span>https://github.com/spring-projects/spring-petclinic.git<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;/hudson.plugins.git.UserRemoteConfig&gt;</span>
    <span class="nt">&lt;/userRemoteConfigs&gt;</span>
    <span class="nt">&lt;branches&gt;</span>
      <span class="nt">&lt;hudson.plugins.git.BranchSpec&gt;</span>
        <span class="nt">&lt;name&gt;</span>*/master<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;/hudson.plugins.git.BranchSpec&gt;</span>
    <span class="nt">&lt;/branches&gt;</span>
    <span class="nt">&lt;doGenerateSubmoduleConfigurations&gt;</span>false<span class="nt">&lt;/doGenerateSubmoduleConfigurations&gt;</span>
    <span class="nt">&lt;submoduleCfg</span> <span class="na">class=</span><span class="s">"list"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/scm&gt;</span>
  <span class="nt">&lt;canRoam&gt;</span>true<span class="nt">&lt;/canRoam&gt;</span>
  <span class="nt">&lt;disabled&gt;</span>false<span class="nt">&lt;/disabled&gt;</span>
  <span class="nt">&lt;blockBuildWhenDownstreamBuilding&gt;</span>false<span class="nt">&lt;/blockBuildWhenDownstreamBuilding&gt;</span>
  <span class="nt">&lt;blockBuildWhenUpstreamBuilding&gt;</span>false<span class="nt">&lt;/blockBuildWhenUpstreamBuilding&gt;</span>
  <span class="nt">&lt;triggers/&gt;</span>
  <span class="nt">&lt;concurrentBuild&gt;</span>false<span class="nt">&lt;/concurrentBuild&gt;</span>
  <span class="nt">&lt;builders&gt;</span>
    <span class="nt">&lt;hudson.tasks.Maven&gt;</span>
      <span class="nt">&lt;targets&gt;</span>clean package<span class="nt">&lt;/targets&gt;</span>
      <span class="nt">&lt;mavenName&gt;</span>3.3.9<span class="nt">&lt;/mavenName&gt;</span>
      <span class="nt">&lt;usePrivateRepository&gt;</span>false<span class="nt">&lt;/usePrivateRepository&gt;</span>
      <span class="nt">&lt;settings</span> <span class="na">class=</span><span class="s">"jenkins.mvn.DefaultSettingsProvider"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;globalSettings</span> <span class="na">class=</span><span class="s">"jenkins.mvn.DefaultGlobalSettingsProvider"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/hudson.tasks.Maven&gt;</span>
  <span class="nt">&lt;/builders&gt;</span>
  <span class="nt">&lt;publishers&gt;</span>
    <span class="nt">&lt;hudson.plugins.deploy.DeployPublisher</span> <span class="na">plugin=</span><span class="s">"deploy@1.10"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;adapters&gt;</span>
        <span class="nt">&lt;hudson.plugins.deploy.tomcat.Tomcat7xAdapter&gt;</span>
          <span class="nt">&lt;userName&gt;</span>admin<span class="nt">&lt;/userName&gt;</span>
          <span class="nt">&lt;passwordScrambled&gt;</span>YWRtaW4=<span class="nt">&lt;/passwordScrambled&gt;</span>
          <span class="nt">&lt;url&gt;</span>http://localhost:8888<span class="nt">&lt;/url&gt;</span>
        <span class="nt">&lt;/hudson.plugins.deploy.tomcat.Tomcat7xAdapter&gt;</span>
      <span class="nt">&lt;/adapters&gt;</span>
      <span class="nt">&lt;contextPath&gt;</span>spring-petclinic<span class="nt">&lt;/contextPath&gt;</span>
      <span class="nt">&lt;war&gt;</span>target/*.war<span class="nt">&lt;/war&gt;</span>
      <span class="nt">&lt;onFailure&gt;</span>false<span class="nt">&lt;/onFailure&gt;</span>
    <span class="nt">&lt;/hudson.plugins.deploy.DeployPublisher&gt;</span>
  <span class="nt">&lt;/publishers&gt;</span>
  <span class="nt">&lt;buildWrappers/&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<p>When running this job, you should see in the end of the console output, something similar to this.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>INFO] Building war: /tmp/1/jobs/deploy01/workspace/target/petclinic.war
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] BUILD SUCCESS
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] Total <span class="nb">time</span>: 20.590 s
<span class="o">[</span>INFO] Finished at: 2016-03-20T19:13:51+13:00
<span class="o">[</span>INFO] Final Memory: 36M/359M
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
Deploying /tmp/1/jobs/deploy01/workspace/target/petclinic.war to container Tomcat 7.x Remote
  <span class="o">[</span>/tmp/1/jobs/deploy01/workspace/target/petclinic.war] is not deployed. Doing a fresh deployment.
  Deploying <span class="o">[</span>/tmp/1/jobs/deploy01/workspace/target/petclinic.war]
Finished: SUCCESS
</code></pre></div></div>

<p>You can chain several jobs, creating a pipeline with one job to build, one for functional tests, and
another job to deploy.</p>

<h3 id="pros-2">Pros</h3>

<ul>
  <li>Since you are using Jenkins you can also chain other tools together, as well as other jobs, creating a build
pipeline (doable with the other two approaches, but just harder IMO)</li>
  <li>Like in option #2, you can use parameters and customise the behaviour of the tools used</li>
  <li>You can use Jenkins remote API or CLI to chain other tools or react to events in other systems
(harder to achieve with the other approaches)</li>
</ul>

<h3 id="cons-2">Cons</h3>

<ul>
  <li>There is a learning curve for learning Jenkins, as well as any plug-in or other tools that you may be using</li>
  <li>You have to maintain a new infrastructure with Jenkins</li>
  <li>When new versions of containers are released, Jenkins developers, and plug-in developers may have to update and
release an updated plug-in to be able to support these versions. You have to wait till that happens to use
the plug-in (or submit a patch/pull request)</li>
</ul>

<h2><a name="final-thoughts" style="color: #222222;">Final thoughts</a></h2>

<p>Whenever I can, I try to avoid reinventing the wheel. The less code I write, and the more good quality
code that I reuse, the merrier for me. So approach #1 is my less favorite way of deploying WAR files to
Tomcat.</p>

<p><strong>My preferred approach for deploying WAR files to Tomcat, is a mix of #2 and #3</strong>.</p>

<p>You configure the deploy tasks in your build tool, be it Maven, Grunt, Ant, or etc. And configure a job
in Jenkins to check out the code and deploy it, calling your build tool.</p>

<p>Using the previous examples, you would configure profiles in your pom.xml, and also combine parameters
in Jenkins to define which profile to activate (as well as override parameters if necessary).</p>

<p>This way you give developers the power to choose how/where to deploy. In case they need to deploy to a
different environment, they can change the build scripts, commit, and wait for Jenkins to be ready to
deploy. Leaving the deployment environment configuration in Jenkins jobs would require developers to
request changes in jobs, which would slow down the development pipeline.</p>

<p>Furthermore, you can also overwrite values in the build tools, so you can still control it in the build
server too. And you are getting the best of both worlds, having Jenkins parameters, over 1000 plug-ins,
and being able to create a build workflow/pipeline.</p>

<p>But remember, that is my opinion. I hope you can assimilate everything you have read here, and choose
what will work best in your case.</p>

<p>Happy hacking!</p>

  </div>

  <div class="tags"><a class="label" href="/tags#jenkins">jenkins</a><a class="label" href="/tags#tomcat">tomcat</a><a class="label" href="/tags#docker">docker</a></div>

  <a class="u-url" href="/2016/03/19/deploying-war-files-to-tomcat-with-jenkins.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
