<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" /><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Checking the operating system type in shell script | kinow</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Checking the operating system type in shell script" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Last week I learned about a tool called ShellCheck, a tool for static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated syntax, etc. I decided to check some projects I contribute to, and the first issue I found was in Apache Jena: kinow@localhost:~/Development/java/jena/jena/apache-jena/bin$ shellcheck arq In arq line 8: case &quot;$OSTYPE&quot; in ^-- SC2039: In POSIX sh, OSTYPE is not supported. So, in summary, the OSTYPE variable should not be available in POSIX shell. The case in question, where OSTYPE is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you use different operating systems, I decided to check and learn how OSTYPE works. Here’s what I found. In Ubuntu, with /bin/bash, OSTYPE works fine (linux-gnu) In Ubuntu, with /bin/sh, OSTYPE is not set In Mac OS, with /bin/sh, OSTYPE is set (darwin15) I checked the shells to make sure they were not pointing to symbolic links - some distributions use a different default shell, and replace /bin/bash and/or /bin/sh by a link to another shell. Looks like Mac OS has a POSIX shell that behaves different than Ubuntu’s. Instead of trying to find a way to use OSTYPE, I decided to spend some time looking at how other projects do the same thing. And the best example I could find was git. Instead of relying on OSTYPE, git uses uname. I will spend some time during the next days working on a proposal to replace the OSTYPE from Apache Jena scripts, but then may have to submit more changes for the other issues found by ShellCheck. Happy hacking!" />
<meta property="og:description" content="Last week I learned about a tool called ShellCheck, a tool for static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated syntax, etc. I decided to check some projects I contribute to, and the first issue I found was in Apache Jena: kinow@localhost:~/Development/java/jena/jena/apache-jena/bin$ shellcheck arq In arq line 8: case &quot;$OSTYPE&quot; in ^-- SC2039: In POSIX sh, OSTYPE is not supported. So, in summary, the OSTYPE variable should not be available in POSIX shell. The case in question, where OSTYPE is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you use different operating systems, I decided to check and learn how OSTYPE works. Here’s what I found. In Ubuntu, with /bin/bash, OSTYPE works fine (linux-gnu) In Ubuntu, with /bin/sh, OSTYPE is not set In Mac OS, with /bin/sh, OSTYPE is set (darwin15) I checked the shells to make sure they were not pointing to symbolic links - some distributions use a different default shell, and replace /bin/bash and/or /bin/sh by a link to another shell. Looks like Mac OS has a POSIX shell that behaves different than Ubuntu’s. Instead of trying to find a way to use OSTYPE, I decided to spend some time looking at how other projects do the same thing. And the best example I could find was git. Instead of relying on OSTYPE, git uses uname. I will spend some time during the next days working on a proposal to replace the OSTYPE from Apache Jena scripts, but then may have to submit more changes for the other issues found by ShellCheck. Happy hacking!" />
<link rel="canonical" href="https://kinoshita.eti.br/2016/11/05/checking-the-operating-system-type-in-shell-script.html" />
<meta property="og:url" content="https://kinoshita.eti.br/2016/11/05/checking-the-operating-system-type-in-shell-script.html" />
<meta property="og:site_name" content="kinow" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-11-05T00:00:00+13:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Checking the operating system type in shell script" />
<script type="application/ld+json">
{"description":"Last week I learned about a tool called ShellCheck, a tool for static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated syntax, etc. I decided to check some projects I contribute to, and the first issue I found was in Apache Jena: kinow@localhost:~/Development/java/jena/jena/apache-jena/bin$ shellcheck arq In arq line 8: case &quot;$OSTYPE&quot; in ^-- SC2039: In POSIX sh, OSTYPE is not supported. So, in summary, the OSTYPE variable should not be available in POSIX shell. The case in question, where OSTYPE is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you use different operating systems, I decided to check and learn how OSTYPE works. Here’s what I found. In Ubuntu, with /bin/bash, OSTYPE works fine (linux-gnu) In Ubuntu, with /bin/sh, OSTYPE is not set In Mac OS, with /bin/sh, OSTYPE is set (darwin15) I checked the shells to make sure they were not pointing to symbolic links - some distributions use a different default shell, and replace /bin/bash and/or /bin/sh by a link to another shell. Looks like Mac OS has a POSIX shell that behaves different than Ubuntu’s. Instead of trying to find a way to use OSTYPE, I decided to spend some time looking at how other projects do the same thing. And the best example I could find was git. Instead of relying on OSTYPE, git uses uname. I will spend some time during the next days working on a proposal to replace the OSTYPE from Apache Jena scripts, but then may have to submit more changes for the other issues found by ShellCheck. Happy hacking!","@type":"BlogPosting","headline":"Checking the operating system type in shell script","url":"https://kinoshita.eti.br/2016/11/05/checking-the-operating-system-type-in-shell-script.html","dateModified":"2016-11-05T00:00:00+13:00","datePublished":"2016-11-05T00:00:00+13:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://kinoshita.eti.br/2016/11/05/checking-the-operating-system-type-in-shell-script.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css" /><link type="application/atom+xml" rel="alternate" href="https://kinoshita.eti.br/feed.xml" title="kinow" /><link href="https://unpkg.com/pattern.css" rel="stylesheet" />

</head>
<body>
<div id="mobile-menu"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
<div id="wrapper">
  <div id="sidebar"><div class="menu">
  <ul class="menu">
    <li class="item">
      <h1 id="kinow">KINOW</h1>
    </li>
    <li class="item">
      <a href="/" class="">About</a>
    </li>
    <li class="item">
      <a href="/blog/" class="current">Blog</a>
    </li>
    <li class="item">
      <a href="/portfolio/" class="">Portfolio</a>
    </li>
    <li class="item social-media-item">
      <a href="https://www.instagram.com/brunokinoshita/" class="inline-link">
        <img src="/assets/icons/instagram.png" class="inverted-image" />
      </a>
      <a href="https://twitter.com/kinow/" class="inline-link">
        <img src="/assets/icons/twitter.png" class="inverted-image" />
      </a>
      <a href="https://github.com/kinow/" class="inline-link">
        <img src="/assets/icons/github.png" class="inverted-image" />
      </a>
    </li>
  </ul>
</div>
</div>
  <div id="content">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Checking the operating system type in shell script</h1>
    <span class="post-meta">
      <time class="dt-published" datetime="2016-11-05T00:00:00+13:00" itemprop="datePublished">Nov 5, 2016
      </time>
      <span>&mdash; star date: -306073.77.</span>
      <span>
        Number of words: 303.
      </span></span>
  </header>

  


  <div class="post-content e-content" itemprop="articleBody">
    <p>Last week I learned about a tool called <a href="https://github.com/koalaman/shellcheck">ShellCheck</a>, a tool
for static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated
syntax, etc.</p>

<p>I decided to check some projects I contribute to, and the first issue I found was in
<a href="https://jena.apache.org">Apache Jena</a>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kinow@localhost:~/Development/java/jena/jena/apache-jena/bin<span class="nv">$ </span>shellcheck arq

In arq line 8:
    <span class="k">case</span> <span class="s2">"</span><span class="nv">$OSTYPE</span><span class="s2">"</span> <span class="k">in</span>
          ^-- SC2039: In POSIX sh, OSTYPE is not supported.
</code></pre></div></div>

<p>So, in summary, the <code class="language-plaintext highlighter-rouge">OSTYPE</code> variable should not be available in POSIX shell. The case in question, where
<code class="language-plaintext highlighter-rouge">OSTYPE</code> is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you
use different operating systems, I decided to check and learn how <code class="language-plaintext highlighter-rouge">OSTYPE</code> works. Here’s what I found.</p>

<ul>
  <li>In Ubuntu, with /bin/bash, OSTYPE works fine (linux-gnu)</li>
  <li>In Ubuntu, with /bin/sh, OSTYPE is not set</li>
  <li>In Mac OS, with /bin/sh, OSTYPE is set (darwin15)</li>
</ul>

<p>I checked the shells to make sure they were not pointing to symbolic links - some distributions
use a different default shell, and replace /bin/bash and/or /bin/sh by a link to another
shell. Looks like Mac OS has a POSIX shell that behaves different than Ubuntu’s.</p>

<p>Instead of trying to find a way to use <code class="language-plaintext highlighter-rouge">OSTYPE</code>, I decided to spend some time looking at
how other projects do the same thing. And the best example I could find was
<a href="https://git.kernel.org/cgit/git/git.git/tree/config.mak.uname">git</a>.</p>

<p>Instead of relying on <code class="language-plaintext highlighter-rouge">OSTYPE</code>, git uses <code class="language-plaintext highlighter-rouge">uname</code>.</p>

<p>I will spend some time during the next days working on a proposal to replace the <code class="language-plaintext highlighter-rouge">OSTYPE</code>
from Apache Jena scripts, but then may have to submit more changes for the other issues
found by ShellCheck.</p>

<p>Happy hacking!</p>

  </div>

  <div class="tags"><p>Tags:&nbsp;<a class="label" href="/tag/shell script">shell script</a>.<br/></p></div>

  <a class="u-url" href="/2016/11/05/checking-the-operating-system-type-in-shell-script.html" hidden></a>
</article>

  </div>
</div>
</body>
</html>
