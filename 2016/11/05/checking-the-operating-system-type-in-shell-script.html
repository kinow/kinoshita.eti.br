<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2016/11/05/checking-the-operating-system-type-in-shell-script.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Checking the operating system type in shell script"><meta property="og:description" content='Last week I learned about a tool called ShellCheck, a tool for static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated syntax, etc.
I decided to check some projects I contribute to, and the first issue I found was in Apache Jena:
kinow@localhost:~/Development/java/jena/jena/apache-jena/bin$ shellcheck arq In arq line 8: case "$OSTYPE" in ^-- SC2039: In POSIX sh, OSTYPE is not supported. So, in summary, the OSTYPE variable should not be available in POSIX shell. The case in question, where OSTYPE is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you use different operating systems, I decided to check and learn how OSTYPE works. Here&rsquo;s what I found.
'><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-11-05T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-23T18:12:22+02:00"><meta property="article:tag" content="Shell Script"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Checking the operating system type in shell script"><meta name=twitter:description content='Last week I learned about a tool called ShellCheck, a tool
for static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated
syntax, etc.
I decided to check some projects I contribute to, and the first issue I found was in
Apache Jena:
kinow@localhost:~/Development/java/jena/jena/apache-jena/bin$ shellcheck arq

In arq line 8:
    case "$OSTYPE" in
          ^-- SC2039: In POSIX sh, OSTYPE is not supported.
So, in summary, the OSTYPE variable should not be available in POSIX shell. The case in question, where
OSTYPE is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you
use different operating systems, I decided to check and learn how OSTYPE works. Here&rsquo;s what I found.'><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2016/11/05/checking-the-operating-system-type-in-shell-script/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.2bf0e81b866986f8e894e04d30e6e1e76e2829c06afda356b6fca355d1000a94.css integrity="sha256-K/DoG4ZphvjolOBNMObh524oKcBq/aNWtvyjVdEACpQ="><title>kinow | Checking the operating system type in shell script</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Checking the operating system type in shell script","headline":"Checking the operating system type in shell script","alternativeHeadline":"","description":"\u003cp\u003eLast week I learned about a tool called \u003ca href=\u0022https:\/\/github.com\/koalaman\/shellcheck\u0022\u003eShellCheck\u003c\/a\u003e, a tool\nfor static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated\nsyntax, etc.\u003c\/p\u003e\n\u003cp\u003eI decided to check some projects I contribute to, and the first issue I found was in\n\u003ca href=\u0022https:\/\/jena.apache.org\u0022\u003eApache Jena\u003c\/a\u003e:\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-shell\u0022 data-lang=\u0022shell\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ekinow@localhost:~\/Development\/java\/jena\/jena\/apache-jena\/bin$ shellcheck arq\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eIn arq line 8:\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e    \u003cspan style=\u0022color:#a90d91\u0022\u003ecase\u003c\/span\u003e \u003cspan style=\u0022color:#c41a16\u0022\u003e\u0026#34;\u003c\/span\u003e\u003cspan style=\u0022color:#000\u0022\u003e$OSTYPE\u003c\/span\u003e\u003cspan style=\u0022color:#c41a16\u0022\u003e\u0026#34;\u003c\/span\u003e in\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e          ^-- SC2039: In POSIX sh, OSTYPE is not supported.\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003eSo, in summary, the \u003ccode\u003eOSTYPE\u003c\/code\u003e variable should not be available in POSIX shell. The case in question, where\n\u003ccode\u003eOSTYPE\u003c\/code\u003e is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you\nuse different operating systems, I decided to check and learn how \u003ccode\u003eOSTYPE\u003c\/code\u003e works. Here\u0026rsquo;s what I found.\u003c\/p\u003e","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2016\/11\/05\/checking-the-operating-system-type-in-shell-script.html"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"kinow","copyrightYear":"2016","dateCreated":"2016-11-05T00:00:00.00Z","datePublished":"2016-11-05T00:00:00.00Z","dateModified":"2025-08-23T18:12:22.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2016\/11\/05\/checking-the-operating-system-type-in-shell-script.html","wordCount":"273","genre":["shell script"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul style=position:relative><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li><li style=position:absolute;right:0;bottom:-.75rem;text-align:right><span style=text-transform:uppercase;font-weight:700;font-size:3rem;color:#fffefa;line-height:normal;letter-spacing:-.1rem>Kinow</span></li></ul></nav></header><main><article class=content><h1>Checking the operating system type in shell script</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2016-11-05>Nov 5, 2016</time></div><aside><nav id=TableOfContents></nav></aside><p>Last week I learned about a tool called <a href=https://github.com/koalaman/shellcheck>ShellCheck</a>, a tool
for static analysis of shell scripts. It reports errors like missing double quotes, use of deprecated
syntax, etc.</p><p>I decided to check some projects I contribute to, and the first issue I found was in
<a href=https://jena.apache.org>Apache Jena</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kinow@localhost:~/Development/java/jena/jena/apache-jena/bin$ shellcheck arq
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In arq line 8:
</span></span><span style=display:flex><span>    <span style=color:#a90d91>case</span> <span style=color:#c41a16>&#34;</span><span style=color:#000>$OSTYPE</span><span style=color:#c41a16>&#34;</span> in
</span></span><span style=display:flex><span>          ^-- SC2039: In POSIX sh, OSTYPE is not supported.
</span></span></code></pre></div><p>So, in summary, the <code>OSTYPE</code> variable should not be available in POSIX shell. The case in question, where
<code>OSTYPE</code> is being used, checks for the Darwin OS type (i.e. Mac OS). Knowing how things get weird when you
use different operating systems, I decided to check and learn how <code>OSTYPE</code> works. Here&rsquo;s what I found.</p><ul><li>In Ubuntu, with /bin/bash, OSTYPE works fine (linux-gnu)</li><li>In Ubuntu, with /bin/sh, OSTYPE is not set</li><li>In Mac OS, with /bin/sh, OSTYPE is set (darwin15)</li></ul><p>I checked the shells to make sure they were not pointing to symbolic links - some distributions
use a different default shell, and replace /bin/bash and/or /bin/sh by a link to another
shell. Looks like Mac OS has a POSIX shell that behaves different than Ubuntu&rsquo;s.</p><p>Instead of trying to find a way to use <code>OSTYPE</code>, I decided to spend some time looking at
how other projects do the same thing. And the best example I could find was
<a href=https://git.kernel.org/cgit/git/git.git/tree/config.mak.uname>git</a>.</p><p>Instead of relying on <code>OSTYPE</code>, git uses <code>uname</code>.</p><p>I will spend some time during the next days working on a proposal to replace the <code>OSTYPE</code>
from Apache Jena scripts, but then may have to submit more changes for the other issues
found by ShellCheck.</p><p>Happy hacking!</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/shell-script.html>Shell Script</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2016/10/04/using-the-aws-api-with-python.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2016/11/07/content-negotiation-with-spring-boot-and-react.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://bsky.app/profile/kinow.bsky.social><img src=/assets/icons/bluesky.png alt="BlueSky link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>