<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="https://kinoshita.eti.br/2016/11/07/content-negotiation-with-spring-boot-and-react.html"><meta property="og:site_name" content="kinow"><meta property="og:title" content="Content negotiation with Spring Boot and React"><meta property="og:description" content="A few days ago I had a bug in a system built with Spring Boot and React. The frontend application was using a REST client in React, built in a similar way to what is found in the documentation, and also in blogs.
import rest from 'rest'; const Rest = () => rest.wrap(mime); However, for one of the Spring Boot application endpoints, the React component was not working. The response seemed to be OK in the Network tab, of the browser developer tools. But the component was failing and complaining when parsing the response.
"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-11-07T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-16T10:38:53+01:00"><meta property="article:tag" content="Java"><meta property="og:image" content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta property="fb:admins" content="bruno.kinoshita"><meta name=twitter:title content="Content negotiation with Spring Boot and React"><meta name=twitter:description content="A few days ago I had a bug in a system built with Spring Boot and React. The frontend application
was using a REST client in React, built in a similar way to what is found in the documentation, and
also in blogs.
import rest from 'rest';
const Rest = () => rest.wrap(mime);
However, for one of the Spring Boot application endpoints, the React component was not working. The
response seemed to be OK in the Network tab, of the browser developer tools. But the component was
failing and complaining when parsing the response."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kinoshita.eti.br/assets/photos/about/2023-me-closeup.png"><meta name=twitter:site content="@kinow"><link rel=alternate type=application/rss+xml href=https://kinoshita.eti.br/2016/11/07/content-negotiation-with-spring-boot-and-react/feed.xml title=kinow><link rel=stylesheet type=text/css href=https://kinoshita.eti.br/sass/main.2bf0e81b866986f8e894e04d30e6e1e76e2829c06afda356b6fca355d1000a94.css integrity="sha256-K/DoG4ZphvjolOBNMObh524oKcBq/aNWtvyjVdEACpQ="><title>kinow | Content negotiation with Spring Boot and React</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Content negotiation with Spring Boot and React","headline":"Content negotiation with Spring Boot and React","alternativeHeadline":"","description":"\u003cp\u003eA few days ago I had a bug in a system built with Spring Boot and React. The frontend application\nwas using a REST client in React, built in a similar way to what is found in the documentation, and\nalso in blogs.\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-javascript\u0022 data-lang=\u0022javascript\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#a90d91\u0022\u003eimport\u003c\/span\u003e \u003cspan style=\u0022color:#000\u0022\u003erest\u003c\/span\u003e \u003cspan style=\u0022color:#000\u0022\u003efrom\u003c\/span\u003e \u003cspan style=\u0022color:#c41a16\u0022\u003e\u0026#39;rest\u0026#39;\u003c\/span\u003e;\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#a90d91\u0022\u003econst\u003c\/span\u003e \u003cspan style=\u0022color:#000\u0022\u003eRest\u003c\/span\u003e \u003cspan style=\u0022color:#000\u0022\u003e=\u003c\/span\u003e () =\u0026gt; \u003cspan style=\u0022color:#000\u0022\u003erest\u003c\/span\u003e.\u003cspan style=\u0022color:#000\u0022\u003ewrap\u003c\/span\u003e(\u003cspan style=\u0022color:#000\u0022\u003emime\u003c\/span\u003e);\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003eHowever, for one of the Spring Boot application endpoints, the React component was not working. The\nresponse seemed to be OK in the Network tab, of the browser developer tools. But the component was\nfailing and complaining when parsing the response.\u003c\/p\u003e","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kinoshita.eti.br\/2016\/11\/07\/content-negotiation-with-spring-boot-and-react.html"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":"kinow","copyrightYear":"2016","dateCreated":"2016-11-07T00:00:00.00Z","datePublished":"2016-11-07T00:00:00.00Z","dateModified":"2025-12-16T10:38:53.00Z","publisher":{"@type":"Organization","name":"kinow","url":"https://kinoshita.eti.br/","logo":{"@type":"ImageObject","url":"https:\/\/kinoshita.eti.br\/","width":"32","height":"32"}},"image":"https://kinoshita.eti.br/","url":"https:\/\/kinoshita.eti.br\/2016\/11\/07\/content-negotiation-with-spring-boot-and-react.html","wordCount":"188","genre":["java"],"keywords":[]}</script></head><body><header role=banner class=content><nav id=nav aria-label=Main role=navigation class=content><ul style=position:relative><li><a href=/><i data-feather=about></i> About</a></li><li><a href=/blog/><i data-feather=blog></i> Blog</a></li><li><a href=/portfolio/><i data-feather=portfolio></i> Portfolio</a></li><li style=position:absolute;right:0;bottom:-.75rem;text-align:right><span style=text-transform:uppercase;font-weight:700;font-size:3rem;color:#fffefa;line-height:normal;letter-spacing:-.1rem>Kinow</span></li></ul></nav></header><main><article class=content><h1>Content negotiation with Spring Boot and React</h1><div class=metadata><i data-feather=calendar></i>
<time datetime=2016-11-07>Nov 7, 2016</time></div><aside><nav id=TableOfContents></nav></aside><p>A few days ago I had a bug in a system built with Spring Boot and React. The frontend application
was using a REST client in React, built in a similar way to what is found in the documentation, and
also in blogs.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a90d91>import</span> <span style=color:#000>rest</span> <span style=color:#000>from</span> <span style=color:#c41a16>&#39;rest&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#a90d91>const</span> <span style=color:#000>Rest</span> <span style=color:#000>=</span> () =&gt; <span style=color:#000>rest</span>.<span style=color:#000>wrap</span>(<span style=color:#000>mime</span>);
</span></span></code></pre></div><p>However, for one of the Spring Boot application endpoints, the React component was not working. The
response seemed to be OK in the Network tab, of the browser developer tools. But the component was
failing and complaining when parsing the response.</p><p>Turns out that the frontend was sending the request with the header <code>Accept: text/plain, application/json</code>.
And Spring Boot was just using its <a href=https://spring.io/blog/2013/05/11/content-negotiation-using-spring-mvc>default content negotiation</a>
and returning what the frontend requested: a text plain version of, what looked like, JSON.</p><p>The quick fix was to request the content as JSON in React.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a90d91>import</span> <span style=color:#000>rest</span> <span style=color:#000>from</span> <span style=color:#c41a16>&#39;rest&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#a90d91>import</span> <span style=color:#000>mime</span> <span style=color:#000>from</span> <span style=color:#c41a16>&#39;rest/interceptor/mime&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#a90d91>const</span> <span style=color:#000>Rest</span> <span style=color:#000>=</span> () =&gt; <span style=color:#000>rest</span>.<span style=color:#000>wrap</span>(<span style=color:#000>mime</span> , { <span style=color:#000>mime</span><span style=color:#000>:</span> <span style=color:#c41a16>&#39;application/json&#39;</span> } );
</span></span></code></pre></div><p>Now we will revisit the backend to return the JSON content, as content, regardless of what
the user asks :-)</p><p>Happy hacking!</p><p>Categories:
<a href=/categories/blog.html>Blog</a></p><p>Tags:
<a href=/tags/java.html>Java</a></p><aside class=links><a class=previous href=https://kinoshita.eti.br/2016/11/05/checking-the-operating-system-type-in-shell-script.html>&#171; Previous</a><a class=next href=https://kinoshita.eti.br/2016/11/12/add-a-header-to-a-file-with-shell-script-sed.html>Next &#187;</a></aside></article></main><footer role=contentinfo><ul id=social-media-icons><li><a href=https://www.instagram.com/brunokinoshita/><img src=/assets/icons/instagram.png alt="Instagram link"></a></li><li><a href=https://bsky.app/profile/kinow.bsky.social><img src=/assets/icons/bluesky.png alt="BlueSky link"></a></li><li><a href=https://twitter.com/kinow/><img src=/assets/icons/twitter.png alt="Twitter link"></a></li><li><a href=https://github.com/kinow/><img src=/assets/icons/github.png alt="GitHub link"></a></li><li><a href=/feed.xml><img src=/assets/icons/news.png alt="RSS feed link"></a></li></ul></footer></body></html>