  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <title>Bruno P. Kinoshita &mdash; Home</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="Bruno de Paula Kinoshita personal web site" />
    <meta name="keywords"
        content="kinoshita, bruno de paula kinoshita, geek, geek stuff, java, python, c, c++, msn now playing, neural network, mackenzie, sao paulo, brasil, brazil, nerd, nerd stuff, cool, jenkins, illustration, quadrinhos, machine learning, linguistic, apache, open source, codigo livre, codigo aberto" />
    <meta name="author" content="" />
    <meta name="generator" content="PieCrust 3.2.1" />
    <meta name="template-engine" content="Twig" />
    <meta name="robots" content="all=index,follow" />
    <meta name="revisit-after" content="15 days" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="distribution" content="Global" />
    <meta name="url" content="/" />
    <meta name="copyright" content="Bruno de Paula Kinoshita" />
    <meta name="Googlebot" content="all" />
    <meta name="rating" content="general" />
    <meta http-equiv="expires" content="0" />
    <meta name="city" content="Sao Paulo" />
    <meta name="state" content="Brasil, Sao Paulo" />
    <meta http-equiv="content-language" content="en" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta id="page_favicon" href="/favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="alternate" type="application/rss+xml" title="Bruno P. Kinoshita &raquo; Feed" href="/feed.xml" />
    <link rel="stylesheet" href="/css/semantic/dist/semantic.min.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    <link rel="stylesheet" href="/css/prettyPhoto.css" type="text/css" media="all" />
</head>
<body id="body">
    <div class="ui vertical sidebar menu" id="toc">
        <nav class="menu" role="navigation">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/art">Art</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
      <a href="/presentations/">Presentations</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
</nav>
<img src="/img/bruno.jpg" title="Hmmmm" alt="My picture" width="134px" height="215px" />
    </div>
    <div class="ui black big launch right attached fixed button">
        <i class="content icon"></i>
        <span class="text">Menu</span>
    </div>
    <div class="ui fixed inverted main menu">
        <div class="ui container">
            <a class="launch icon item">
                <i class="content icon"></i>
            </a>
            <div class="item">
                Home
            </div>
        </div>
    </div>
    <div class="pusher">
        <div class="full height">
            <div class="toc">
                <div class="ui vertical sticky fixed top menu">
                    <nav class="menu" role="navigation">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/art">Art</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
      <a href="/presentations/">Presentations</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
</nav>
<img src="/img/bruno.jpg" title="Hmmmm" alt="My picture" width="134px" height="215px" />
                </div>
            </div>
            <div class="article">
                <div class="main container" role="main">
                    <!-- right fixed menu -->
                    <div class="ui dividing right rail" id="taxonomy">
                        <div class="ui sticky fixed top">
                            <br/>
                            <h4>Blog Taxonomy</h4>
                            <nav id="tag-cloud" class="sidebar-box" role="complementary">
                              
                              <span style="font-size: 22.5pt"><a href="/tag/apache%20software%20foundation">apache software foundation</a></span>&nbsp;(25)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/articles">articles</a></span>&nbsp;(5)
                              
                              <span style="font-size: 11.5pt"><a href="/tag/aws">aws</a></span>&nbsp;(3)
                              
                              <span style="font-size: 13.5pt"><a href="/tag/c%2B%2B">c++</a></span>&nbsp;(7)
                              
                              <span style="font-size: 14.0pt"><a href="/tag/cylc">cylc</a></span>&nbsp;(8)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/docker">docker</a></span>&nbsp;(5)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/events">events</a></span>&nbsp;(5)
                              
                              <span style="font-size: 11.5pt"><a href="/tag/functional%20programming">functional programming</a></span>&nbsp;(3)
                              
                              <span style="font-size: 16.5pt"><a href="/tag/illustrations">illustrations</a></span>&nbsp;(13)
                              
                              <span style="font-size: 27.5pt"><a href="/tag/java">java</a></span>&nbsp;(35)
                              
                              <span style="font-size: 13.0pt"><a href="/tag/jena">jena</a></span>&nbsp;(6)
                              
                              <span style="font-size: 23.0pt"><a href="/tag/jenkins">jenkins</a></span>&nbsp;(26)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/krita">krita</a></span>&nbsp;(5)
                              
                              <span style="font-size: 12.0pt"><a href="/tag/natural%20language%20processing">natural language processing</a></span>&nbsp;(4)
                              
                              <span style="font-size: 29.5pt"><a href="/tag/opensource">opensource</a></span>&nbsp;(39)
                              
                              <span style="font-size: 26.5pt"><a href="/tag/programming">programming</a></span>&nbsp;(33)
                              
                              <span style="font-size: 18.0pt"><a href="/tag/python">python</a></span>&nbsp;(16)
                              
                              <span style="font-size: 11.5pt"><a href="/tag/r">r</a></span>&nbsp;(3)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/security">security</a></span>&nbsp;(5)
                              
                              <span style="font-size: 12.5pt"><a href="/tag/shell%20script">shell script</a></span>&nbsp;(5)
                              
                              <span style="font-size: 24.5pt"><a href="/tag/software%20quality">software quality</a></span>&nbsp;(29)
                              
                              <span style="font-size: 12.0pt"><a href="/tag/sparql">sparql</a></span>&nbsp;(4)
                              
                              <span style="font-size: 13.5pt"><a href="/tag/test%20anything%20protocol">test anything protocol</a></span>&nbsp;(7)
                              
                              <span style="font-size: 16.5pt"><a href="/tag/testlink">testlink</a></span>&nbsp;(13)
                              
                            </nav>
                            
                        </div>
                    </div>
                
                    
                    <div class='ui padded container'>
                        <h1 class='topic'>Home</h1>
                    </div>
                    
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/03/14/order-of-containers-in-docker-compose" title="Permanent link">Order of containers in Docker Compose</a>
                        </h2>
                        <small>kinow</small> @ <small>Mar 14, 2017&nbsp;21:22:03 (<span class='stardate' data-input-date='Mar 14, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/03/14/order-of-containers-in-docker-compose" data-text="Order of containers in Docker Compose" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>In Docker Compose you are able to control the startup order of the containers via
the <em>depends_on</em> statement. This is documented in <a href="https://docs.docker.com/compose/startup-order/">Controlling startup order in Compose</a>.</p>
<p>If you have a simple setup, with Tomcat and Postgres, sometimes Postgres will start first, but Compose
will initialize Tomcat before Postgres has fully booted. When that happens, you may receive 401, 404, or other
application errors.</p>
<p>You can fix it by combining <em>depends_on</em> with a <em>healthcheck</em>. For example:</p>
<div class="highlight"><pre><span></span><span class="c1"># File: docker-compose.yml</span>
version: <span class="s1">&#39;2.1&#39;</span>
services:
  db:
    container_name: twpg
    build:
      context: .
      dockerfile: Dockerfile.postgres
    restart: always
    ports:
      - <span class="s2">&quot;5432:5432&quot;</span>
    healthcheck:
      test: <span class="s2">&quot;pg_isready -h localhost -p 5432 -q -U postgres&quot;</span>
      interval: 10s
      timeout: 5s
      retries: <span class="m">5</span>

  web:
    container_name: twtc
    build:
      context: .
      dockerfile: Dockerfile.tomcat
    restart: always
    depends_on:
      db:
        condition: service_healthy
    links:
      - db
    ports:
      - <span class="s2">&quot;80:8080&quot;</span>
</pre></div>

<p>In the example docker-compose.yml, there are two containers, <em>db</em> and <em>web</em>. web is running
a Tomcat, and db is running Postgres. Web depends on db (see depends_on), and uses a condition
<em>service_healthy</em>. Which indicates it depends that that container is healthy.</p>
<p>The <em>healthcheck</em> entry under the db container settings define how to check whether Postgres
is running or not. In this case, we are using <em>pg_isready</em>, which is available in the
vanilla Postgres 9 container.</p>
<p>It will try 5 times, with a 10 seconds interval, and will time out after 5 seconds. You may
have to tune these parameters for your application.</p>
<p>This code snippet is from a
<a href="https://github.com/Foxoncz/docker-thingworx/pull/3/files">pull request submitted to Foxoncz/docker-thingworx</a>.</p>
<p>&hearts; Open Source</p>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/docker/"
                                rel="tag">docker</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/blog"
                                title="View all posts in blog"
                                rel="category tag">blog</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/02/28/using-aws-mfa-without-a-mobile-phone" title="Permanent link">Using AWS MFA without a mobile phone</a>
                        </h2>
                        <small>kinow</small> @ <small>Feb 28, 2017&nbsp;00:47:03 (<span class='stardate' data-input-date='Feb 28, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/02/28/using-aws-mfa-without-a-mobile-phone" data-text="Using AWS MFA without a mobile phone" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>If you use AWS, the chances are that you use MFA - Multi-factor Authentication - to authenticate.
I don&#8217;t like to install apps in my mobile phone, unless I need to, so having bought a new phone
recently, I decided to find a replacement for Google Authenticator.</p>
<p>There are several command line utilities, browser extensions, libraries, and tools (free and paid)
that implement the TOTP - time-based one-time password -, the standard
<a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable_virtual.html">required by Amazon</a>
for MFA authentication.</p>
<p>I decided to use a Go tool for the first time: <a href="https://github.com/pcarrier/gauth">gauth</a>. Note that you
won&#8217;t be able to use it from home, in case you don&#8217;t bring your laptop home. You can have one MFA device
linked to your AWS account, so you may have to remove an existing one. Follow these instructions with care :^)</p>
<h2>Install Go</h2>
<div class="highlight"><pre><span></span>sudo apt update <span class="o">&amp;&amp;</span> sudo apt upgrade -y
<span class="nb">cd</span> tmp/ <span class="o">&amp;&amp;</span> wget https://storage.googleapis.com/golang/go1.8.linux-amd64.tar.gz
tar -zxvf go1.*.tar.gz
sudo mv go /usr/local
vim ~/.bashrc
</pre></div>

<p>Add the following at the bottom of the file.</p>
<div class="highlight"><pre><span></span><span class="nv">GOROOT</span><span class="o">=</span>/usr/local/go
<span class="nv">GOPATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/go&quot;</span>
<span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$GOPATH</span><span class="s2">/bin:</span><span class="nv">$GOROOT</span><span class="s2">/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</pre></div>

<p>And you can test it with <code>. ~/.bashrc &amp;&amp; go version</code>.</p>
<h2>Install gauth</h2>
<p>Given your environment is correctly set up, you should be able to use the following command to install
gauth, and have it available in your <em>$PATH</em>.</p>
<div class="highlight"><pre><span></span>go get github.com/pcarrier/gauth
</pre></div>

<p>Edit <em>~/.config/gauth.csv</em> adding a value for the AWS MFA key.</p>
<h2>Getting the AWS MFA key</h2>
<p>To get the value that you must place in your <em>gauth.csv</em> file, you must add a new MFA device. When asked to scan a QR code, look for an option to enter the manual value. That will give you a long string. That&#8217;s the value you are looking for.</p>
<h2>Extra: Auto copy-paste from command line</h2>
<p>If you would like to quickly copy and paste, try creating an alias as described
<a href="https://gist.github.com/ehime/9fd8810442daf64686a34f885e18be01">on this gist</a>.</p>
<p>I used these instructions, and can now run one command line, that will put the next MFA code in my
clipboard. Then just paste into my browser, and that&#8217;s that!</p>
<p>Happy hacking!</p>
<h2>References</h2>
<ul>
<li><a href="https://github.com/pcarrier/gauth">gauth: replace Google Authenticator</a></li>
<li><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable_virtual.html">Enabling a Virtual Multi-factor Authentication (MFA) Device</a></li>
<li><a href="http://tecadmin.net/install-go-on-ubuntu/">How to Install Go 1.7 on Ubuntu 16.04 &amp; 14.04</a></li>
<li><a href="http://garywoodfine.com/use-pbcopy-on-ubuntu/">Use pbcopy on Ubuntu</a></li>
</ul>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/go/"
                                rel="tag">go</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/aws/"
                                rel="tag">aws</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/security/"
                                rel="tag">security</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/blog"
                                title="View all posts in blog"
                                rel="category tag">blog</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/01/15/proposed-logos-for-opennlp" title="Permanent link">Proposed logos for OpenNLP</a>
                        </h2>
                        <small>kinow</small> @ <small>Jan 15, 2017&nbsp;20:42:03 (<span class='stardate' data-input-date='Jan 15, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/01/15/proposed-logos-for-opennlp" data-text="Proposed logos for OpenNLP" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>A couple of logos submitted to <a href="https://issues.apache.org/jira/browse/OPENNLP-6">OPENNLP-6</a>. Made with Inkscape, fonts from Google Fonts.</p>
<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/01/15/proposed-logos-for-opennlp/OpenNLP-logos.svg.png" rel="prettyPhoto" class="thumbnail" title="Proposed logos for OpenNLP">
<img style="height: 400px;" class="ui image" src="/2017/01/15/proposed-logos-for-opennlp/OpenNLP-logos.svg.png" alt="Proposed logos for OpenNLP" />
</a>
<figcaption>Proposed logos for OpenNLP</figcaption>
</figure>
</div>
</div>

<p>For more, check out <a href="http://kinow.deviantart.com/art/Proposed-logos-for-Apache-OpenNLP-657512914">my DeviantArt page</a>.</p>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/illustrations/"
                                rel="tag">illustrations</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/natural%20language%20processing/"
                                rel="tag">natural language processing</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/blog"
                                title="View all posts in blog"
                                rel="category tag">blog</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/01/13/drawing-cave" title="Permanent link">Drawing Cave</a>
                        </h2>
                        <small>kinow</small> @ <small>Jan 13, 2017&nbsp;02:11:03 (<span class='stardate' data-input-date='Jan 13, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/01/13/drawing-cave" data-text="Drawing Cave" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/01/13/drawing-cave/cave_by_kinow-daugn02.png" rel="prettyPhoto" class="thumbnail" title="Cave">
<img style="height: 400px;" class="ui image" src="/2017/01/13/drawing-cave/cave_by_kinow-daugn02.png" alt="Cave" />
</a>
<figcaption>Cave</figcaption>
</figure>
</div>
</div>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/illustrations/"
                                rel="tag">illustrations</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/blog"
                                title="View all posts in blog"
                                rel="category tag">blog</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    <div class="ui raised padded container segment">
                        <h2>
                            <a href="/2017/01/08/apache-commons-lang-memoizer" title="Permanent link">Apache Commons Lang: Memoizer</a>
                        </h2>
                        <small>kinow</small> @ <small>Jan 08, 2017&nbsp;18:34:03 (<span class='stardate' data-input-date='Jan 08, 2017'></span>)</small>
                        <div class="entry">
                            





<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://kinoshita.eti.br/2017/01/08/apache-commons-lang-memoizer" data-text="Apache Commons Lang: Memoizer" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p='https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                            
                            <p>The current release of <a href="https://commons.apache.org/proper/commons-lang/">Apache Commons Lang</a>
is <strong>3.5</strong>. The upcoming release, probably 3.6,
will include a new feature, added in a
<a href="https://github.com/apache/commons-lang/pull/203">pull request</a>:
<strong>a Memoizer implementation</strong>. Check out the ticket <a href="https://issues.apache.org/jira/browse/LANG-740">LANG-740</a>
for more about the implementation being added to [lang].</p>
<p>The book <a href="http://jcip.net/">Java Concurrency in Practice</a> introduces readers to the Memoizer,
and has also a <a href="http://jcip.net/listings/Memoizer.java">public domain implementation available for download</a>
(besides that, the book has also lots of other interesting topics!).</p>
<p>In summary, Memoizer is a simple cache, that will store the result of
a computation. It receives a Computable object, responsible for doing something
that will be stored by the Memoizer. Here&#8217;s a simple code to illustrate how that
will work in your Java code.</p>
<div class="highlight"><pre><span></span><span class="c1">// Computation to be stored in the cache</span>
<span class="n">Computable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">getFormattedCurrentDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Computable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">compute</span><span class="o">(</span><span class="n">String</span> <span class="n">fmt</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InterruptedException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="n">fmt</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">};</span>

<span class="c1">// Our memoizer</span>
<span class="n">Memoizer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">dateCache</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Memoizer</span><span class="o">&lt;&gt;(</span><span class="n">getFormattedCurrentDate</span><span class="o">);</span>

<span class="c1">// To illustrate its use</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">// S -&gt; Millisecond</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dateCache</span><span class="o">.</span><span class="na">compute</span><span class="o">(</span><span class="s">&quot;HH:mm:ss:S Z dd/MM/YYYY&quot;</span><span class="o">));</span>
        <span class="c1">// Regardless of this sleep call, we get the same result every iteration</span>
        <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1500</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>The computable created (<em>getFormattedCurrentDate</em>) will be called only once, and stored in
a map. The parameter passed in the <em>#compute()</em> method will be used as key in the map.
So choose your parameter wisely :-) The output of the example will be similar to the following one.</p>
<div class="highlight"><pre><span></span><span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
<span class="m">19</span>:15:57:854 +1300 <span class="m">08</span>/01/2017
</pre></div>

<p>In the example above I used a <em>for-loop</em> to illustrate what will happen. Even though we call
the memoizer <em>#compute()</em> method several times, followed by
<em>Thread#sleep()</em>; only one result, the first to be computed, will be returned.</p>
<p>So that&#8217;s all for today. Hope you learned something about this new class, that must
be available in the next release of Apache Commons Lang.</p>
<p>Happy hacking!</p>
<p>ps: [lang] uses Java 7, so that is why we do not have a functional instead of the Comparable</p>
                            
                            
                            
                        </div>
                        <p class="postmetadata">
                            
                            <small>tags 
                             [&nbsp;<a
                                href="/tag/java/"
                                rel="tag">java</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/programming/"
                                rel="tag">programming</a>&nbsp;]&nbsp;
                            
                             [&nbsp;<a
                                href="/tag/apache%20software%20foundation/"
                                rel="tag">apache software foundation</a>&nbsp;]&nbsp;
                            
                            </small>
                            
                            
                            <br/>
                            <small>posted in 
                            [&nbsp;<a
                                href="/blog"
                                title="View all posts in blog"
                                rel="category tag">blog</a>&nbsp;]
                                &nbsp;category
                            </small>
                            
                        </p>
                    </div>
                    
                    
                    <div class="ui pagination menu">
                        
                        <a class="item" href="/11"><i class='left arrow icon'></i> Previous Posts</a>
                        
                        
                        <a class="item" href="/9"><i class='right arrow icon'></i> Next Posts</a>
                        
                    </div>
                    
                
               </div>
            </div>
        </div>
        <div class="ui vertical footer segment">
            <div class="ui center aligned container">
                           <div id="copy" class="">
                <p>&copy; <a href="/about"><span
                            class="b">Bru</span><span
                            class="r">no de</span> <span
                            class="a">Paula</span> <span
                            class="s"></span><span
                            class="i">Kinos</span><span
                            class="l">hita</span></a>
                </p>
            </div>
            </div>
         </div>
    </div>
</body>
</html>
<script src="/js/jquery-2.2.3.min.js"  type="text/javascript"></script>
<script src="/css/semantic/dist/semantic.min.js"  type="text/javascript"></script>
<script src="/js/jquery.prettyPhoto.js"></script>
<script src="/js/site.js"></script>