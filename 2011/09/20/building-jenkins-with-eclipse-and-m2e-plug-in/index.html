  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <title>Bruno P. Kinoshita &mdash; Building Jenkins with Eclipse and m2e plug-in</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="Bruno de Paula Kinoshita personal web site" />
    <meta name="keywords"
        content="kinoshita, bruno de paula kinoshita, geek, geek stuff, java, python, c, c++, msn now playing, neural network, mackenzie, sao paulo, brasil, brazil, nerd, nerd stuff, cool, jenkins, illustration, quadrinhos, machine learning, linguistic, apache, open source, codigo livre, codigo aberto" />
    <meta name="author" content="" />
    <meta name="generator" content="PieCrust 2.0.0rc1" />
    <meta name="template-engine" content="Twig" />
    <meta name="robots" content="all=index,follow" />
    <meta name="revisit-after" content="15 days" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="distribution" content="Global" />
    <meta name="url" content="/" />
    <meta name="copyright" content="Bruno de Paula Kinoshita" />
    <meta name="Googlebot" content="all" />
    <meta name="rating" content="general" />
    <meta http-equiv="expires" content="0" />
    <meta name="city" content="Sao Paulo" />
    <meta name="state" content="Brasil, Sao Paulo" />
    <meta http-equiv="content-language" content="en" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta id="page_favicon" href="/favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="alternate" type="application/rss+xml" title="Bruno P. Kinoshita &raquo; Feed" href="/feed.xml" />
    <link rel="stylesheet" href="/css/semantic/dist/semantic.min.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
    <link rel="stylesheet" href="/css/prettyPhoto.css" type="text/css" media="all" />
</head>
<body id="body">
    <div class="ui vertical sidebar menu" id="toc">
        <div class="menu">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
</div>
<img id="me" src="/img/bruno.jpg" title="Hmmmm" alt="Hmmmm" width="134px" height="215px" />
    </div>
    <div class="ui black big launch right attached fixed button">
        <i class="content icon"></i>
        <span class="text">Menu</span>
    </div>
    <div class="ui fixed inverted main menu">
        <div class="ui container">
            <a class="launch icon item">
                <i class="content icon"></i>
            </a>
            <div class="item">
                Building Jenkins with Eclipse and m2e plug-in
            </div>
        </div>
    </div>
    <div class="pusher">
        <div class="full height">
            <div class="toc">
                <div class="ui vertical sticky fixed top menu">
                    <div class="menu">
    <div class="item">
        <a href="/" class="main-link">Kinoshita</a>
    </div>
    <div class="item">
        <a href="/software/">Software</a>
    </div>
    <div class="item">
        <a href="/articles/">Articles</a>
    </div>
    <div class="item">
        <a href="/books/">Books</a>
    </div>
    <div class="item">
        <a href="/about/">About &#038; CV</a>
    </div>
    <div class="item">
        <a href="/contact/">Contact</a>
    </div>
</div>
<img id="me" src="/img/bruno.jpg" title="Hmmmm" alt="Hmmmm" width="134px" height="215px" />
                </div>
            </div>
            <div class="article">
                <div class="main container">

                
<div class="ui raised padded container segment">
    <h1 class='post-topic'>Building Jenkins with Eclipse and m2e plug-in</h1>
    <small>kinow</small> @
	<small>Sep 20, 2011&nbsp;17:50:04</small>
    <div class="entry">
       





<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://kinoshita.eti.br/2011/09/20/building-jenkins-with-eclipse-and-m2e-plug-in" data-text="Building Jenkins with Eclipse and m2e plug-in" data-via="kinow" data-hashtags="opensource">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

	   <p>Yesterday I finally managed to build <a title="Jenkins" href="http://www.jenkins-ci.org">Jenkins</a> using <a title="Eclipse" href="http://www.eclipse.org/">Eclipse</a> and <a title="m2e plug-in" href="http://eclipse.org/m2e/">m2e plug-in</a>. With <a title="Eclipse Indigo" href="http://www.eclipse.org/indigo">Eclipse Indigo</a> release came a new version of the <a title="Maven" href="http://maven.apache.org">Maven</a> plug-in for Eclipse (former <a title="M2Eclipse" href="http://m2eclipse.sonatype.org/">M2Eclipse</a>), m2e. Since I started using Eclipse Indigo and this new plug-in I hadn&#8217;t been able to build Jenkins in Eclipse anymore.</p>

<p>I&#8217;ve been having a terrible fever and thought that it would be a good thing to stop playing <a href="http://www.minecraft.net" title="Minecraft">Minecraft</a> for a while and find a way to build Jenkins in Eclipse + m2e :-).</p>

<h2>1. Maven Plug-ins execution in project life cycle</h2>

<p>The first thing I&#8217;ve noticed were the messages regarding the execution of some Maven plug-ins in the project life cycle. m2e delegates the execution of Maven plug-ins to an external executor. As not all Maven plug-ins have an existing executor for m2e you will receive a message similar to &#8220;Plugin execution not covered by lifecycle configuration: &#8230;&#8221;.</p>

<!-- more -->

<p>The solution for this issue was adding a rule for each plug-in execution. This rule must contain a version or version range and declare whether this plug-in execution must be executed or ignored by m2e. You have two ways of adding these rules. You could a) Google for an example, b) replace group, artifact name and version. Or you could a) open pom.xml and select the tab &#8220;pom.xml&#8221; (this will open the XML source of your pom.xml) b) go to the line marked with an error in Eclipse, leave your mouse pointer over it and select the option &#8220;Permanently mark goal&#8230;&#8221;, choose the parent pom.xml (jenkins/pom.xml) and save all documents.</p>

<div class="highlight"><pre><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupid&gt;</span>org.eclipse.m2e<span class="nt">&lt;/groupid&gt;</span>
  <span class="nt">&lt;artifactid&gt;</span>lifecycle-mapping<span class="nt">&lt;/artifactid&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;lifecyclemappingmetadata&gt;</span>
      <span class="nt">&lt;pluginexecutions&gt;</span>
        <span class="nt">&lt;pluginexecution&gt;</span>
          <span class="nt">&lt;pluginexecutionfilter&gt;</span>
            <span class="nt">&lt;groupid&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupid&gt;</span>
            <span class="nt">&lt;artifactid&gt;</span>build-helper-maven-plugin<span class="nt">&lt;/artifactid&gt;</span>
            <span class="nt">&lt;versionrange&gt;</span>[1.7,)<span class="nt">&lt;/versionrange&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>timestamp-property<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>regex-property<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
         <span class="nt">&lt;/pluginexecutionfilter&gt;</span>
         <span class="nt">&lt;action&gt;</span>
           <span class="nt">&lt;execute</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;/action&gt;</span>
       <span class="nt">&lt;/pluginexecution&gt;</span>
       <span class="c">&lt;!-- other plug-ins... ---&gt;</span>
     <span class="nt">&lt;/pluginexecutions&gt;</span>
   <span class="nt">&lt;/lifecyclemappingmetadata&gt;</span>
  <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</pre></div>

<h2>2. Conflicting Maven repository ids</h2>

<p>Another problem building Jenkins in Eclipse was that as there were SNAPSHOT dependencies in jenkins/pom.xml a snapshots repository was added with the id maven.jenkins-ci.org. This is the same repository id used in some tutorials to build Jenkins plug-ins. Thus, Maven will ignore this repository, using the one from settings.xml.</p>

<p>The solution for this issue was changing the repository id from maven.jenkins-ci.org to maven.jenkins-ci.org-snapshots.</p>

<div class="highlight"><pre><span class="nt">&lt;repository&gt;</span><span class="c">&lt;!-- only until we release ant and javadoc plugins --&gt;</span>
  <span class="nt">&lt;id&gt;</span>maven.jenkins-ci.org-snapshots<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;url&gt;</span>http://maven.jenkins-ci.org/content/repositories/snapshots/<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;releases&gt;</span>
    <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
  <span class="nt">&lt;/releases&gt;</span>
  <span class="nt">&lt;snapshots&gt;</span>
    <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
  <span class="nt">&lt;/snapshots&gt;</span>
<span class="nt">&lt;/repository&gt;</span>
</pre></div>

<div class="highlight"><pre><span class="nt">&lt;snapshotRepository&gt;</span>
  <span class="nt">&lt;id&gt;</span>maven.jenkins-ci.org-snapshots<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;url&gt;</span>http://maven.jenkins-ci.org:8081/content/repositories/snapshots<span class="nt">&lt;/url&gt;</span>
<span class="nt">&lt;/snapshotRepository&gt;</span>
</pre></div>

<h2>3. maven-localizer-plugin</h2>

<p>This issue was related to the generation of the localization Java classes. maven-localizer-plugin reads properties files and generates Java classes with the text in a locale to be used by the plug-in. But sometimes Eclipse doesn&#8217;t include all the source folders generated by this plug-in, causing the project to have compilation errors.</p>

<p>The solution for this issue was to add the generated sources manually in jenkins/pom.xml under the build-helper-maven-plugin plug-in configuration.</p>

<div class="highlight"><pre><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.7<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;executions&gt;</span>
    <span class="nt">&lt;execution&gt;</span>
      <span class="nt">&lt;id&gt;</span>add-eclipse-sources<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;phase&gt;</span>generate-sources<span class="err">&lt;</span>/p<span class="nt">&lt;hase&gt;</span>
      <span class="nt">&lt;goals&gt;</span>
          <span class="nt">&lt;goal&gt;</span>add-source<span class="nt">&lt;/goal&gt;</span>
      <span class="nt">&lt;/goals&gt;</span>
      <span class="nt">&lt;configuration&gt;</span>
      <span class="nt">&lt;sources&gt;</span>
          <span class="nt">&lt;source&gt;</span>${basedir}/target/generated-sources/groovy-stubs/main<span class="nt">&lt;/source&gt;</span>
          <span class="nt">&lt;source&gt;</span>${basedir}/target/generated-sources/localizer<span class="nt">&lt;/source&gt;</span>
          <span class="nt">&lt;source&gt;</span>${basedir}/target/generated-sources/taglib-interface<span class="nt">&lt;/source&gt;</span>
      <span class="nt">&lt;/sources&gt;</span>
   <span class="nt">&lt;/configuration&gt;</span>
  <span class="nt">&lt;/execution&gt;</span>
  <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</pre></div>

<h2>Removing remaining Eclipse errors and warnings</h2>

<p>Matthieu Vincent managed to overcome other Eclipse errors and warnings with the following steps:</p>

<ul>
<li>run mvn generate-sources.</li></li>
<li>this will generate many source files under target/generated-sources sub directories.</li></li>
<li>now go to each project and look for target/generated-sources/localizer, right click on it and Build Path &rarr; Use as Source Folder.</li></li>
<li>the core project generates other files too. Like antlr,taglib-interfaces and other sources. Right click on these folders and use them as source too.</li></li>
<li>look for src/main/groovy (in core project).</li></li>
<li>then again, right click on it, Build Path &rarr; Use as Source Folder.</li></li>
<li>Do the usual Project &rarr; Clean, Project &rarr; Build Project, F5 your projects, and your environment must be fine</li></li>
</ul>
<p>Now you can follow the instructions in Jenkins Wiki for building Jenkins and have fun in your Eclipse. There still seems to have few issues to be solved. I can&#8217;t see the version number in the footer, and the default plug-ins are missing. Time to go back to Minecraft now :D!</p>

<p>Cheers :-)</p>
    </div>
    <p class="postmetadata">
        
        <small>tags 
         [&nbsp;<a
            href="/tag/java"
            rel="tag">java</a>&nbsp;]&nbsp;
        
         [&nbsp;<a
            href="/tag/jenkins"
            rel="tag">jenkins</a>&nbsp;]&nbsp;
        
        </small>
        
        
        <br/>
        <small>posted in 
        [&nbsp;<a
            href="/jenkins"
            title="View all posts in jenkins"
            rel="category tag">jenkins</a>&nbsp;]&nbsp;
        category </small>
        
    </p>
</div>

                </div>
            </div>
        </div>
        <div class="ui vertical footer segment">
            <div class="ui center aligned container">
                           <div id="copy" class="">
                <p>&copy; <a href="/about"><span
                            class="b">Bru</span><span
                            class="r">no de</span> <span
                            class="a">Paula</span> <span
                            class="s"></span><span
                            class="i">Kinos</span><span
                            class="l">hita</span></a>
                </p>
            </div>
            </div>
         </div>
    </div>
</body>
</html>
<script src="/js/jquery-2.2.3.min.js"  type="text/javascript"></script>
    <script src="/css/semantic/dist/semantic.min.js"  type="text/javascript"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto({
        social_tools: false,
        autoplay_slideshow: false, 
        hideflash: true, 
        autoplay: false, 
        overlay_gallery: false
    });

    $("#toc")
        .sidebar({
          dimPage          : true,
          transition       : 'overlay',
          mobileTransition : 'uncover'
        })
    ;

    $("#toc")
        .sidebar('attach events', '.launch.button, .view-ui, .launch.item')
    ;
  });
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32767310-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
